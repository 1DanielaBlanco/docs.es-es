---
title: 'Traslado a .NET Core: bibliotecas'
description: "Obtenga información sobre cómo portar proyectos de .NET Framework a .NET Core."
keywords: .NET, .NET Core
author: cartermp
ms.author: mairaw
ms.date: 07/14/2017
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: a0fd860d-d6b6-4659-b325-8a6e6f5fa4a1
ms.workload: dotnetcore
ms.openlocfilehash: c2cc62d1f7babb09eeccf0422bb4b3022d77ce02
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/23/2017
---
# <a name="porting-to-net-core---libraries"></a><span data-ttu-id="e2053-104">Traslado a .NET Core: bibliotecas</span><span class="sxs-lookup"><span data-stu-id="e2053-104">Porting to .NET Core - Libraries</span></span>

<span data-ttu-id="e2053-105">En este artículo se trata cómo portar el código de biblioteca a .NET Core, para poder ejecutarlo en entornos multiplataforma.</span><span class="sxs-lookup"><span data-stu-id="e2053-105">This article discusses porting library code to .NET Core so that it runs cross-platform.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e2053-106">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="e2053-106">Prerequisites</span></span>

<span data-ttu-id="e2053-107">En este artículo se asume lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e2053-107">This article assumes that you:</span></span>

- <span data-ttu-id="e2053-108">Se usa Visual Studio 2017 o posterior.</span><span class="sxs-lookup"><span data-stu-id="e2053-108">Are using Visual Studio 2017 or later.</span></span>
  - <span data-ttu-id="e2053-109">.NET Core no es compatible con versiones anteriores de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e2053-109">.NET Core isn't supported on earlier versions of Visual Studio</span></span>
- <span data-ttu-id="e2053-110">Se conoce el [proceso de portabilidad recomendado](index.md).</span><span class="sxs-lookup"><span data-stu-id="e2053-110">Understand the [recommended porting process](index.md).</span></span>
- <span data-ttu-id="e2053-111">Se han resuelto los problemas con las [dependencias de terceros](third-party-deps.md).</span><span class="sxs-lookup"><span data-stu-id="e2053-111">Have resolved any issues with [third-party dependencies](third-party-deps.md).</span></span>

<span data-ttu-id="e2053-112">También debe estar familiarizado con el contenido de los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="e2053-112">You should also become familiar with the content of the following topics:</span></span>

<span data-ttu-id="e2053-113">[Estándar .NET](~/docs/standard/net-standard.md) </span><span class="sxs-lookup"><span data-stu-id="e2053-113">[.NET Standard](~/docs/standard/net-standard.md) </span></span>  
<span data-ttu-id="e2053-114">En este tema se describe la especificación formal de las API de .NET que se prevé que estén disponibles en todas las implementaciones de .NET.</span><span class="sxs-lookup"><span data-stu-id="e2053-114">This topic describes the formal specification of .NET APIs that are intended to be available on all .NET implementations.</span></span>

<span data-ttu-id="e2053-115">[Paquetes, metapaquetes y marcos de trabajo](~/docs/core/packages.md) </span><span class="sxs-lookup"><span data-stu-id="e2053-115">[Packages, Metapackages and Frameworks](~/docs/core/packages.md) </span></span>  
<span data-ttu-id="e2053-116">En este artículo se trata cómo .NET Core define y usa paquetes y cómo los paquetes admiten el código que se ejecuta en varias implementaciones de .NET.</span><span class="sxs-lookup"><span data-stu-id="e2053-116">This article discusses how .NET Core defines and uses packages and how packages support code running on multiple .NET implementations.</span></span>

<span data-ttu-id="e2053-117">[Desarrollo de bibliotecas con herramientas multiplataforma](~/docs/core/tutorials/libraries.md) </span><span class="sxs-lookup"><span data-stu-id="e2053-117">[Developing Libraries with Cross Platform Tools](~/docs/core/tutorials/libraries.md) </span></span>  
<span data-ttu-id="e2053-118">En este tema se explica cómo escribir bibliotecas para .NET mediante el uso de herramientas multiplataforma de la CLI.</span><span class="sxs-lookup"><span data-stu-id="e2053-118">This topic explains how to write libraries for .NET using cross-platform CLI tools.</span></span>

<span data-ttu-id="e2053-119">[Adiciones al formato *csproj* para .NET Core](~/docs/core/tools/csproj.md) </span><span class="sxs-lookup"><span data-stu-id="e2053-119">[Additions to the *csproj* format for .NET Core](~/docs/core/tools/csproj.md) </span></span>  
<span data-ttu-id="e2053-120">En este artículo se describen los cambios que se han agregado al archivo de proyecto como parte del cambio a *csproj* y MSBuild.</span><span class="sxs-lookup"><span data-stu-id="e2053-120">This article outlines the changes that were added to the project file as part of the move to *csproj* and MSBuild.</span></span>

<span data-ttu-id="e2053-121">[Migración a .NET Core - Análisis de las dependencias de terceros](~/docs/core/porting/third-party-deps.md) </span><span class="sxs-lookup"><span data-stu-id="e2053-121">[Porting to .NET Core - Analyzing your Third-Party Party Dependencies](~/docs/core/porting/third-party-deps.md) </span></span>  
<span data-ttu-id="e2053-122">En este tema se trata la portabilidad de dependencias de terceros y qué hacer cuando una dependencia de paquetes de .NET Core no se ejecuta en .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-122">This topic discusses the portability of third-party dependencies and what to do when a NuGet package dependency doesn't run on .NET Core.</span></span>

## <a name="net-framework-technologies-unavailable-on-net-core"></a><span data-ttu-id="e2053-123">Tecnologías de .NET Framework no disponibles en .NET Core</span><span class="sxs-lookup"><span data-stu-id="e2053-123">.NET Framework technologies unavailable on .NET Core</span></span>

<span data-ttu-id="e2053-124">Varias tecnologías disponibles para las bibliotecas de .NET Framework no están disponibles para su uso con .NET Core, por ejemplo, dominios de aplicaciones, comunicación remota, seguridad de acceso del código (CAS) y transparencia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e2053-124">Several technologies available to .NET Framework libraries aren't available for use with .NET Core, such as AppDomains, Remoting, Code Access Security (CAS), and Security Transparency.</span></span> <span data-ttu-id="e2053-125">Si las bibliotecas se basan en una o varias de estas tecnologías, considere los enfoques alternativos que se describen a continuación.</span><span class="sxs-lookup"><span data-stu-id="e2053-125">If your libraries rely on one or more of these technologies, consider the alternative approaches outlined below.</span></span> <span data-ttu-id="e2053-126">Para más información sobre la compatibilidad con la API, el equipo de CoreFX mantiene una [lista de cambios de comportamiento/interrupciones de compatibilidad y API desusadas/heredadas](https://github.com/dotnet/corefx/wiki/ApiCompat) en GitHub.</span><span class="sxs-lookup"><span data-stu-id="e2053-126">For more information on API compatibility, the CoreFX team maintains a [List of behavioral changes/compat breaks and deprecated/legacy APIs](https://github.com/dotnet/corefx/wiki/ApiCompat) at GitHub.</span></span>

<span data-ttu-id="e2053-127">El hecho de que una API o tecnología no estén implementadas actualmente no implica que sea incompatible deliberadamente.</span><span class="sxs-lookup"><span data-stu-id="e2053-127">Just because an API or technology isn't currently implemented doesn't imply it's intentionally unsupported.</span></span> <span data-ttu-id="e2053-128">Informe de un problema en el [repositorio de problemas dotnet/corefx](https://github.com/dotnet/corefx/issues) en GitHub para solicitar tecnologías y API específicas.</span><span class="sxs-lookup"><span data-stu-id="e2053-128">File an issue in the [dotnet/corefx repository issues](https://github.com/dotnet/corefx/issues) at GitHub to ask for specific APIs and technologies.</span></span> <span data-ttu-id="e2053-129">[Las solicitudes de portabilidad de los problemas](https://github.com/dotnet/corefx/labels/port-to-core) se marcan con la etiqueta `port-to-core`.</span><span class="sxs-lookup"><span data-stu-id="e2053-129">[Porting requests in the issues](https://github.com/dotnet/corefx/labels/port-to-core) are marked with the `port-to-core` label.</span></span>

### <a name="appdomains"></a><span data-ttu-id="e2053-130">Dominios de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="e2053-130">AppDomains</span></span>

<span data-ttu-id="e2053-131">Los dominios de aplicaciones aíslan las aplicaciones entre sí.</span><span class="sxs-lookup"><span data-stu-id="e2053-131">AppDomains isolate apps from one another.</span></span> <span data-ttu-id="e2053-132">Los dominios de aplicación requieren la compatibilidad con el runtime y suelen ser muy caros.</span><span class="sxs-lookup"><span data-stu-id="e2053-132">AppDomains require runtime support and are generally quite expensive.</span></span> <span data-ttu-id="e2053-133">No se implementan en .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-133">They're not implemented in .NET Core.</span></span> <span data-ttu-id="e2053-134">No se pretende agregar esta compatibilidad en el futuro.</span><span class="sxs-lookup"><span data-stu-id="e2053-134">We don't plan on adding this capability in future.</span></span> <span data-ttu-id="e2053-135">En el caso del aislamiento del código, se recomiendan procesos independientes o usar contenedores como alternativa.</span><span class="sxs-lookup"><span data-stu-id="e2053-135">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="e2053-136">Para la carga dinámica de ensamblados, se recomienda la nueva clase <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="e2053-136">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="e2053-137">Para facilitar la migración de código de .NET Framework, se exponen algunas de las superficies de la API <xref:System.AppDomain> de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-137">To make code migration from .NET Framework easier, we've exposed some of the <xref:System.AppDomain> API surface in .NET Core.</span></span> <span data-ttu-id="e2053-138">Algunas de las API funcionan con normalidad (por ejemplo, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), algunos miembros no hacen nada (por ejemplo, <xref:System.AppDomain.SetCachePath%2A>) y algunos de ellos generan <xref:System.PlatformNotSupportedException> (por ejemplo, <xref:System.AppDomain.CreateDomain%2A>).</span><span class="sxs-lookup"><span data-stu-id="e2053-138">Some of the API functions normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span> <span data-ttu-id="e2053-139">Compruebe los tipos que usa en la [fuente de referencias de `System.AppDomain`](https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Extensions/src/System/AppDomain.cs) en el [repositorio dotnet/corefx de GitHub](https://github.com/dotnet/corefx), y asegúrese de que selecciona la rama correspondiente a la versión implementada.</span><span class="sxs-lookup"><span data-stu-id="e2053-139">Check the types you use against the [`System.AppDomain` reference source](https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Extensions/src/System/AppDomain.cs) in the [dotnet/corefx GitHub repository](https://github.com/dotnet/corefx) making sure to select the branch that matches your implemented version.</span></span>

### <a name="remoting"></a><span data-ttu-id="e2053-140">Comunicación remota</span><span class="sxs-lookup"><span data-stu-id="e2053-140">Remoting</span></span>

<span data-ttu-id="e2053-141">La comunicación remota de .NET se identificó como una arquitectura problemática.</span><span class="sxs-lookup"><span data-stu-id="e2053-141">.NET Remoting was identified as a problematic architecture.</span></span> <span data-ttu-id="e2053-142">Se usa para la comunicación entre dominios de aplicaciones, una funcionalidad que ya no es compatible.</span><span class="sxs-lookup"><span data-stu-id="e2053-142">It's used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="e2053-143">Además, la comunicación remota requiere la compatibilidad con el runtime, cuyo mantenimiento resulta caro.</span><span class="sxs-lookup"><span data-stu-id="e2053-143">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="e2053-144">Por estos motivos, la comunicación remota de .NET no es compatible con .NET Core y no se prevé agregar esta compatibilidad en el futuro.</span><span class="sxs-lookup"><span data-stu-id="e2053-144">For these reasons, .NET Remoting isn't supported on .NET Core, and we don't plan on adding support for it in the future.</span></span>

<span data-ttu-id="e2053-145">Para la comunicación entre procesos, considere la posibilidad de usar mecanismos de comunicación entre procesos (IPC) como alternativa a la comunicación remota, como las clases <xref:System.IO.Pipes> o <xref:System.IO.MemoryMappedFiles.MemoryMappedFile>.</span><span class="sxs-lookup"><span data-stu-id="e2053-145">For communication across processes, consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="e2053-146">En los equipos, utilice una solución basada en red como una alternativa.</span><span class="sxs-lookup"><span data-stu-id="e2053-146">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="e2053-147">Si es posible, use un protocolo de texto sin formato con poca sobrecarga, como HTTP.</span><span class="sxs-lookup"><span data-stu-id="e2053-147">Preferably, use a low-overhead plain text protocol, such as HTTP.</span></span> <span data-ttu-id="e2053-148">El [servidor web Kestrel](https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel), el servidor web que usa ASP.NET Core, se puede usar como opción aquí.</span><span class="sxs-lookup"><span data-stu-id="e2053-148">The [Kestrel web server](https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel), the web server used by ASP.NET Core, is an option here.</span></span> <span data-ttu-id="e2053-149">También considere el uso de <xref:System.Net.Sockets> para escenarios de conexión entre equipos basada en red.</span><span class="sxs-lookup"><span data-stu-id="e2053-149">Also consider using <xref:System.Net.Sockets> for network-based, cross-machine scenarios.</span></span> <span data-ttu-id="e2053-150">Para obtener más opciones, vea [.NET Open Source Developer Projects: Messaging](https://github.com/Microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging) (Proyectos de desarrolladores de código abierto de .NET: mensajería).</span><span class="sxs-lookup"><span data-stu-id="e2053-150">For more options, see [.NET Open Source Developer Projects: Messaging](https://github.com/Microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging).</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="e2053-151">Seguridad de acceso del código (CAS)</span><span class="sxs-lookup"><span data-stu-id="e2053-151">Code Access Security (CAS)</span></span>

<span data-ttu-id="e2053-152">El espacio aislado, que se basa en el runtime o en el marco para restringir qué recursos usa o ejecuta una aplicación administrada, [no es compatible con .NET Framework](~/docs/framework/misc/code-access-security.md) y, por tanto, tampoco se admite en .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-152">Sandboxing, which is relying on the runtime or the framework to constrain which resources a managed application or library uses or runs, [isn't supported on .NET Framework](~/docs/framework/misc/code-access-security.md) and therefore is also not supported on .NET Core.</span></span> <span data-ttu-id="e2053-153">Se considera que existen demasiados casos en .NET Framework y en el runtime en que se produce una elevación de privilegios para continuar tratando la seguridad de acceso del código (CAS) como un límite de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e2053-153">We believe that there are too many cases in the .NET Framework and runtime where an elevation of privileges occurs to continue treating CAS as a security boundary.</span></span> <span data-ttu-id="e2053-154">Además, la seguridad de acceso del código dificulta más la implementación y suele tener implicaciones en el rendimiento de corrección para las aplicaciones que no pretenden usar esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="e2053-154">In addition, CAS makes the implementation more complicated and often has correctness-performance implications for applications that don't intend to use it.</span></span>

<span data-ttu-id="e2053-155">Use los límites de seguridad que proporciona el sistema operativo, como visualización, contenedores o cuentas de usuario para ejecutar procesos con el menor conjunto de privilegios.</span><span class="sxs-lookup"><span data-stu-id="e2053-155">Use security boundaries provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="e2053-156">Transparencia de seguridad</span><span class="sxs-lookup"><span data-stu-id="e2053-156">Security Transparency</span></span>

<span data-ttu-id="e2053-157">De forma similar a lo que ocurre con la seguridad de acceso del código, la transparencia de seguridad permite separar el código de espacios aislados del código crítico de seguridad de manera declarativa, pero [ya no se admite como un límite de seguridad](~/docs/framework/misc/security-transparent-code.md).</span><span class="sxs-lookup"><span data-stu-id="e2053-157">Similar to CAS, Security Transparency allows separating sandboxed code from security critical code in a declarative fashion but is [no longer supported as a security boundary](~/docs/framework/misc/security-transparent-code.md).</span></span> <span data-ttu-id="e2053-158">Silverlight usa mucho esta característica.</span><span class="sxs-lookup"><span data-stu-id="e2053-158">This feature is heavily used by Silverlight.</span></span> 

<span data-ttu-id="e2053-159">Use los límites de seguridad que proporciona el sistema operativo, como visualización, contenedores o cuentas de usuario para ejecutar procesos con el menor conjunto de privilegios.</span><span class="sxs-lookup"><span data-stu-id="e2053-159">Use security boundaries provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

### <a name="globaljson"></a><span data-ttu-id="e2053-160">global.json</span><span class="sxs-lookup"><span data-stu-id="e2053-160">global.json</span></span>

<span data-ttu-id="e2053-161">*global.json* es un archivo opcional que permite establecer la versión de las herramientas de .NET Core de un proyecto.</span><span class="sxs-lookup"><span data-stu-id="e2053-161">The *global.json* file is an optional file that allows you to set the .NET Core tools version of a project.</span></span> <span data-ttu-id="e2053-162">Si usa compilaciones nocturnas de .NET Core y desea especificar una versión del SDK, determine la versión con un archivo *global.json*.</span><span class="sxs-lookup"><span data-stu-id="e2053-162">If you're using nightly builds of .NET Core and wish to specify a specific version of the SDK, specify the version with a *global.json* file.</span></span> <span data-ttu-id="e2053-163">Normalmente se encuentra en el directorio de trabajo actual o en alguno de sus directorios principales.</span><span class="sxs-lookup"><span data-stu-id="e2053-163">It typically resides in the current working directory or one of its parent directories.</span></span> 

```json
{
  "sdk": {
    "version": "2.1.0-preview1-006491"
  }
}
```

## <a name="converting-a-pcl-project"></a><span data-ttu-id="e2053-164">Conversión de un proyecto PCL</span><span class="sxs-lookup"><span data-stu-id="e2053-164">Converting a PCL project</span></span>

<span data-ttu-id="e2053-165">Puede convertir los destinos de un proyecto PCL en un estándar .NET cargando la biblioteca en Visual Studio 2017 y siguiendo estos pasos:</span><span class="sxs-lookup"><span data-stu-id="e2053-165">You can convert the targets of a PCL project to .NET Standard by loading the library in Visual Studio 2017 and performing the following steps:</span></span>

1. <span data-ttu-id="e2053-166">Haga clic con el botón derecho en el archivo de proyecto y seleccione **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e2053-166">Right-click on the project file and select **Properties**.</span></span>
1. <span data-ttu-id="e2053-167">En **Biblioteca**, seleccione **Usar como destino la plataforma del estándar .NET**.</span><span class="sxs-lookup"><span data-stu-id="e2053-167">Under **Library**, select **Target .NET Platform Standard**.</span></span>

<span data-ttu-id="e2053-168">Si los paquetes admiten NuGet 3.0, el proyecto cambia el destino del estándar .NET.</span><span class="sxs-lookup"><span data-stu-id="e2053-168">If your packages support NuGet 3.0, the project retargets to .NET Standard.</span></span>

<span data-ttu-id="e2053-169">Si los paquetes no admiten NuGet 3.0, aparecerá un cuadro de diálogo de Visual Studio para indicar que se deben desinstalar los paquetes actuales.</span><span class="sxs-lookup"><span data-stu-id="e2053-169">If your packages don't support NuGet 3.0, you receive a dialog from Visual Studio telling you to uninstall your current packages.</span></span> <span data-ttu-id="e2053-170">Si recibe este aviso, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="e2053-170">If you receive this notice, perform the following steps:</span></span>

1. <span data-ttu-id="e2053-171">Haga clic con el botón derecho en el proyecto y seleccione **Administrar paquetes NuGet**.</span><span class="sxs-lookup"><span data-stu-id="e2053-171">Right-click the project, select **Manage NuGet Packages**.</span></span>
1. <span data-ttu-id="e2053-172">Tome nota de los paquetes del proyecto.</span><span class="sxs-lookup"><span data-stu-id="e2053-172">Make a note of the project's packages.</span></span>
1. <span data-ttu-id="e2053-173">Desinstale los paquetes uno a uno.</span><span class="sxs-lookup"><span data-stu-id="e2053-173">Uninstall the packages one-by-one.</span></span>
1. <span data-ttu-id="e2053-174">Debe reiniciar Visual Studio para completar el proceso de desinstalación.</span><span class="sxs-lookup"><span data-stu-id="e2053-174">You might need to restart Visual Studio to complete the uninstall process.</span></span> <span data-ttu-id="e2053-175">De ser así, el botón **Reiniciar** aparece en la ventana **Administrador de paquetes de NuGet**.</span><span class="sxs-lookup"><span data-stu-id="e2053-175">If so, a **Restart** button is presented to you in the **NuGet Package Manager** window.</span></span>
1. <span data-ttu-id="e2053-176">Cuando se recarga el proyecto, el destino es el estándar .NET.</span><span class="sxs-lookup"><span data-stu-id="e2053-176">When the project reloads, it targets .NET Standard.</span></span> <span data-ttu-id="e2053-177">Agregue los paquetes que se deben desinstalar.</span><span class="sxs-lookup"><span data-stu-id="e2053-177">Add the packages you were required to uninstall.</span></span>

## <a name="retargeting-your-net-framework-code-to-net-framework-462"></a><span data-ttu-id="e2053-178">Redestinar el código de .NET Framework a .NET Framework 4.6.2</span><span class="sxs-lookup"><span data-stu-id="e2053-178">Retargeting your .NET Framework code to .NET Framework 4.6.2</span></span>

<span data-ttu-id="e2053-179">Si el código no apunta a .NET Framework 4.6.2, se recomienda que lo redestine.</span><span class="sxs-lookup"><span data-stu-id="e2053-179">If your code isn't targeting .NET Framework 4.6.2, we recommended that you retarget to .NET Framework 4.6.2.</span></span> <span data-ttu-id="e2053-180">De esta forma, se garantiza la disponibilidad de las últimas alternativas de API en los casos donde el estándar .NET no admite las API existentes.</span><span class="sxs-lookup"><span data-stu-id="e2053-180">This ensures the availability of the latest API alternatives for cases where the .NET Standard doesn't support existing APIs.</span></span>

<span data-ttu-id="e2053-181">Haga lo siguiente para cada uno de los proyectos de Visual Studio que desea trasladar:</span><span class="sxs-lookup"><span data-stu-id="e2053-181">For each of your projects in Visual Studio you wish to port, do the following:</span></span>

1. <span data-ttu-id="e2053-182">Haga clic con el botón derecho en el proyecto y seleccione Propiedades.</span><span class="sxs-lookup"><span data-stu-id="e2053-182">Right-click on the project and select Properties.</span></span>
1. <span data-ttu-id="e2053-183">En la lista desplegable **Plataforma de destino**, seleccione **.NET Framework 4.6.2**.</span><span class="sxs-lookup"><span data-stu-id="e2053-183">In the **Target Framework** dropdown, select **.NET Framework 4.6.2**.</span></span>
1. <span data-ttu-id="e2053-184">Vuelva a compilar los proyectos.</span><span class="sxs-lookup"><span data-stu-id="e2053-184">Recompile your projects.</span></span>

<span data-ttu-id="e2053-185">Debido a que sus proyectos ahora apuntan a .NET Framework 4.6.2, use esa versión de .NET Framework como la base para portar el código.</span><span class="sxs-lookup"><span data-stu-id="e2053-185">Because your projects now target .NET Framework 4.6.2, use that version of the .NET Framework as your base for porting code.</span></span>

## <a name="determining-the-portability-of-your-code"></a><span data-ttu-id="e2053-186">Determinación de la portabilidad del código</span><span class="sxs-lookup"><span data-stu-id="e2053-186">Determining the portability of your code</span></span>

<span data-ttu-id="e2053-187">El paso siguiente es ejecutar API Portability Analyzer (ApiPort), a fin de generar un informe de portabilidad para analizarlo.</span><span class="sxs-lookup"><span data-stu-id="e2053-187">The next step is to run the API Portability Analyzer (ApiPort) to generate a portability report for analysis.</span></span>

<span data-ttu-id="e2053-188">Asegúrese de que comprende la herramienta [API Portability (ApiPort)](~/docs/standard/portability-analyzer.md) y de que puede generar informes de portabilidad que apunten a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-188">Make sure you understand the [API Portability Analyzer (ApiPort)](~/docs/standard/portability-analyzer.md) and how to generate portability reports for targeting .NET Core.</span></span> <span data-ttu-id="e2053-189">La forma de hacer esto posiblemente variará en función de sus necesidades y de sus preferencias personales.</span><span class="sxs-lookup"><span data-stu-id="e2053-189">How you do this likely varies based on your needs and personal tastes.</span></span> <span data-ttu-id="e2053-190">A continuación se muestran diferentes enfoques.</span><span class="sxs-lookup"><span data-stu-id="e2053-190">What follows are a few different approaches.</span></span> <span data-ttu-id="e2053-191">Es probable que tenga que combinar los pasos de estos enfoques en función de cómo esté estructurado el código.</span><span class="sxs-lookup"><span data-stu-id="e2053-191">You may find yourself mixing steps of these approaches depending on how your code is structured.</span></span>

### <a name="dealing-primarily-with-the-compiler"></a><span data-ttu-id="e2053-192">Trabajar primero con el compilador</span><span class="sxs-lookup"><span data-stu-id="e2053-192">Dealing primarily with the compiler</span></span>

<span data-ttu-id="e2053-193">Este puede ser el mejor enfoque para proyectos pequeños o proyectos que no usan muchas API de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e2053-193">This approach may be the best for small projects or projects which don't use many .NET Framework APIs.</span></span> <span data-ttu-id="e2053-194">El enfoque es sencillo:</span><span class="sxs-lookup"><span data-stu-id="e2053-194">The approach is simple:</span></span>

1. <span data-ttu-id="e2053-195">De manera opcional, ejecute ApiPort en el proyecto.</span><span class="sxs-lookup"><span data-stu-id="e2053-195">Optionally, run ApiPort on your project.</span></span> <span data-ttu-id="e2053-196">Si ejecuta ApiPort, consulte el informe para obtener información sobre los problemas que encontrará.</span><span class="sxs-lookup"><span data-stu-id="e2053-196">If you run ApiPort, gain knowledge from the report on issues you'll need to address.</span></span>
1. <span data-ttu-id="e2053-197">Copie todo el código a un nuevo proyecto de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-197">Copy all of your code over into a new .NET Core project.</span></span>
1. <span data-ttu-id="e2053-198">Mientras consulta el informe de portabilidad (en caso de que se haya generado), solucione los errores del compilador hasta que el proyecto esté totalmente compilado.</span><span class="sxs-lookup"><span data-stu-id="e2053-198">While referring to the portability report (if generated), solve compiler errors until the project fully compiles.</span></span>

<span data-ttu-id="e2053-199">A pesar de que este enfoque no es estructurado, el enfoque centrado en el código suele permitir solucionar rápidamente cualquier problema y es posible que sea el mejor enfoque para las bibliotecas o los proyectos más pequeños.</span><span class="sxs-lookup"><span data-stu-id="e2053-199">Although this approach is unstructured, the code-focused approach often leads to resolving issues quickly and might be the best approach for smaller projects or libraries.</span></span> <span data-ttu-id="e2053-200">Un proyecto que solo contiene modelos de datos puede ser un candidato ideal para este enfoque.</span><span class="sxs-lookup"><span data-stu-id="e2053-200">A project that contains only data models might be an ideal candidate for this approach.</span></span>

### <a name="staying-on-the-net-framework-until-portability-issues-are-resolved"></a><span data-ttu-id="e2053-201">Permanecer en .NET Framework hasta solucionar los problemas de portabilidad</span><span class="sxs-lookup"><span data-stu-id="e2053-201">Staying on the .NET Framework until portability issues are resolved</span></span>

<span data-ttu-id="e2053-202">Este puede ser el mejor enfoque si prefiere que el código se compile durante todo el proceso.</span><span class="sxs-lookup"><span data-stu-id="e2053-202">This approach might be the best if you prefer to have code that compiles during the entire process.</span></span> <span data-ttu-id="e2053-203">El enfoque es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="e2053-203">The approach is as follows:</span></span>

1. <span data-ttu-id="e2053-204">Ejecute ApiPort en un proyecto.</span><span class="sxs-lookup"><span data-stu-id="e2053-204">Run ApiPort on a project.</span></span>
1. <span data-ttu-id="e2053-205">Use distintas API portátiles para solucionar los problemas.</span><span class="sxs-lookup"><span data-stu-id="e2053-205">Address issues by using different APIs that are portable.</span></span>
1. <span data-ttu-id="e2053-206">Anote todas las áreas en las que no se permite usar una alternativa directa.</span><span class="sxs-lookup"><span data-stu-id="e2053-206">Take note of any areas where you're prevented from using a direct alternative.</span></span>
1. <span data-ttu-id="e2053-207">Repita los pasos anteriores para todos los proyectos que desea trasladar hasta tener la seguridad de haber copiado cada uno de ellos a un proyecto nuevo de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-207">Repeat the prior steps for all projects you're porting until you're confident each is ready to be copied over into a new .NET Core project.</span></span>
1. <span data-ttu-id="e2053-208">Copie el código a un nuevo proyecto de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-208">Copy the code into a new .NET Core project.</span></span>
1. <span data-ttu-id="e2053-209">Solucione todos los problemas en los que se indica que no existe una alternativa directa.</span><span class="sxs-lookup"><span data-stu-id="e2053-209">Work out any issues where you noted that a direct alternative doesn't exist.</span></span>

<span data-ttu-id="e2053-210">Este enfoque prudente es más estructurado que simplemente solucionar los errores del compilador, pero de todos modos está relativamente centrado en el código y tiene la ventaja de que siempre hay código que se puede compilar.</span><span class="sxs-lookup"><span data-stu-id="e2053-210">This careful approach is more structured than simply working out compiler errors, but it's still relatively code-focused and has the benefit of always having code that compiles.</span></span> <span data-ttu-id="e2053-211">La manera en que puede solucionar ciertos problemas que no se podrían solucionar si solo se usa otra API varía considerablemente.</span><span class="sxs-lookup"><span data-stu-id="e2053-211">The way you resolve certain issues that couldn't be addressed by just using another API varies greatly.</span></span> <span data-ttu-id="e2053-212">Es posible que deba desarrollar un plan más integral para ciertos proyectos, un aspecto que se abarca en el enfoque siguiente.</span><span class="sxs-lookup"><span data-stu-id="e2053-212">You may find that you need to develop a more comprehensive plan for certain projects, which is covered as the next approach.</span></span>

### <a name="developing-a-comprehensive-plan-of-attack"></a><span data-ttu-id="e2053-213">Desarrollar un plan integral de ataque</span><span class="sxs-lookup"><span data-stu-id="e2053-213">Developing a comprehensive plan of attack</span></span>

<span data-ttu-id="e2053-214">Este puede ser el mejor enfoque para proyectos de mayor tamaño y más complejos, en los que puede ser necesario volver a estructurar el código o reescribir ciertas áreas de código por completo para admitir .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-214">This approach might be best for larger and more complex projects, where restructuring code or completely rewriting certain areas of code might be necessary to support .NET Core.</span></span> <span data-ttu-id="e2053-215">El enfoque es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="e2053-215">The approach is as follows:</span></span>

1. <span data-ttu-id="e2053-216">Ejecute ApiPort en un proyecto.</span><span class="sxs-lookup"><span data-stu-id="e2053-216">Run ApiPort on a project.</span></span>
1. <span data-ttu-id="e2053-217">Observe dónde se usa cada tipo no portátil y cómo ese uso afecta a la portabilidad general.</span><span class="sxs-lookup"><span data-stu-id="e2053-217">Understand where each non-portable type is used and how that affects overall portability.</span></span>
   - <span data-ttu-id="e2053-218">Comprenda la naturaleza de esos tipos.</span><span class="sxs-lookup"><span data-stu-id="e2053-218">Understand the nature of those types.</span></span> <span data-ttu-id="e2053-219">¿Son pocos, pero se usan con frecuencia?</span><span class="sxs-lookup"><span data-stu-id="e2053-219">Are they small in number but used frequently?</span></span> <span data-ttu-id="e2053-220">¿Son muchos, pero no se usan con frecuencia?</span><span class="sxs-lookup"><span data-stu-id="e2053-220">Are they large in number but used infrequently?</span></span> <span data-ttu-id="e2053-221">¿Se usan de manera concentrada o se distribuyen en todo el código?</span><span class="sxs-lookup"><span data-stu-id="e2053-221">Is their use concentrated, or is it spread throughout your code?</span></span>
   - <span data-ttu-id="e2053-222">¿Es simple aislar código no portátil para poder trabajar con él con más eficacia?</span><span class="sxs-lookup"><span data-stu-id="e2053-222">Is it easy to isolate code that isn't portable so that you can deal with it more effectively?</span></span>
   - <span data-ttu-id="e2053-223">¿Es necesario refactorizar el código?</span><span class="sxs-lookup"><span data-stu-id="e2053-223">Do you need to refactor your code?</span></span>
   - <span data-ttu-id="e2053-224">En el caso de los tipos no portátiles, ¿existen API alternativas que permitan realizar la misma tarea?</span><span class="sxs-lookup"><span data-stu-id="e2053-224">For those types which aren't portable, are there alternative APIs that accomplish the same task?</span></span> <span data-ttu-id="e2053-225">Por ejemplo, si usa la clase <xref:System.Net.WebClient>, es posible que, en lugar de esta, pueda usar la clase <xref:System.Net.Http.HttpClient>.</span><span class="sxs-lookup"><span data-stu-id="e2053-225">For example if you're using the <xref:System.Net.WebClient> class, you might be able to use the <xref:System.Net.Http.HttpClient> class instead.</span></span>
   - <span data-ttu-id="e2053-226">¿Hay API portátiles distintas disponibles para realizar una tarea, incluso si no se trata de un reemplazo?</span><span class="sxs-lookup"><span data-stu-id="e2053-226">Are there different portable APIs available to accomplish a task, even if it's not a drop-in replacement?</span></span> <span data-ttu-id="e2053-227">Por ejemplo, si usa <xref:System.Xml.Schema.XmlSchema> para analizar un archivo XML, pero no necesita la detección de esquemas XML, puede usar las API <xref:System.Xml.Linq> e implementar el análisis por su cuenta en lugar de depender de una API.</span><span class="sxs-lookup"><span data-stu-id="e2053-227">For example if you're using <xref:System.Xml.Schema.XmlSchema> to parse XML but don't require XML schema discovery, you could use <xref:System.Xml.Linq> APIs and implement parsing yourself as opposed to relying on an API.</span></span>
1. <span data-ttu-id="e2053-228">Si tiene ensamblados difíciles de trasladar, ¿debe pensarse en dejarlos en .NET Framework por ahora?</span><span class="sxs-lookup"><span data-stu-id="e2053-228">If you have assemblies that are difficult to port, is it worth leaving them on .NET Framework for now?</span></span> <span data-ttu-id="e2053-229">Algunos aspectos que debe considerar:</span><span class="sxs-lookup"><span data-stu-id="e2053-229">Here are some things to consider:</span></span>
   - <span data-ttu-id="e2053-230">Puede que en la biblioteca tenga alguna funcionalidad no compatible con .NET Core, porque depende demasiado de la funcionalidad específica de Windows o específica de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e2053-230">You may have some functionality in your library that's incompatible with .NET Core because it relies too heavily on .NET Framework or Windows-specific functionality.</span></span> <span data-ttu-id="e2053-231">¿Debe considerarse la posibilidad de dejar atrás esa funcionalidad por ahora y lanzar una versión temporal para .NET Core de la biblioteca con menos características, hasta que haya recursos disponibles para portar las características?</span><span class="sxs-lookup"><span data-stu-id="e2053-231">Is it worth leaving that functionality behind for now and releasing a .NET Core version of your library with less features on a temporary basis until resources are available to port the features?</span></span>
   - <span data-ttu-id="e2053-232">¿Sería útil una refactorización en este caso?</span><span class="sxs-lookup"><span data-stu-id="e2053-232">Would a refactor help?</span></span>
1. <span data-ttu-id="e2053-233">¿Es razonable escribir su propia implementación de una API de .NET Framework no disponible?</span><span class="sxs-lookup"><span data-stu-id="e2053-233">Is it reasonable to write your own implementation of an unavailable .NET Framework API?</span></span>
   <span data-ttu-id="e2053-234">Podría considerar copiar, modificar y usar código del [código fuente de referencia de .NET Framework](https://github.com/Microsoft/referencesource).</span><span class="sxs-lookup"><span data-stu-id="e2053-234">You could consider copying, modifying, and using code from the [.NET Framework Reference Source](https://github.com/Microsoft/referencesource).</span></span> <span data-ttu-id="e2053-235">El código fuente de referencia está sujeto a la [licencia de MIT](https://github.com/Microsoft/referencesource/blob/master/LICENSE.txt), por lo que tiene plena libertad para usar la fuente como base para su propio código.</span><span class="sxs-lookup"><span data-stu-id="e2053-235">The reference source code is licensed under the [MIT License](https://github.com/Microsoft/referencesource/blob/master/LICENSE.txt), so you have significant freedom to use the source as a basis for your own code.</span></span> <span data-ttu-id="e2053-236">Solo debe asegurarse de atribuir adecuadamente la propiedad de Microsoft en el código.</span><span class="sxs-lookup"><span data-stu-id="e2053-236">Just be sure to properly attribute Microsoft in your code.</span></span>
1. <span data-ttu-id="e2053-237">Repita este proceso las veces que sea necesario para proyectos distintos.</span><span class="sxs-lookup"><span data-stu-id="e2053-237">Repeat this process as needed for different projects.</span></span>
 
<span data-ttu-id="e2053-238">La fase de análisis puede tardar un poco en función del tamaño de la base de código.</span><span class="sxs-lookup"><span data-stu-id="e2053-238">The analysis phase could take some time depending on the size of your codebase.</span></span> <span data-ttu-id="e2053-239">Dedicar tiempo en esta fase a comprender profundamente el ámbito de los cambios que se necesitan y para desarrollar un plan suele ahorrarle tiempo a largo plazo, principalmente si tiene una base de código compleja.</span><span class="sxs-lookup"><span data-stu-id="e2053-239">Spending time in this phase to thoroughly understand the scope of changes needed and to develop a plan usually saves you time in the long run, particularly if you have a complex codebase.</span></span>

<span data-ttu-id="e2053-240">El plan podría significar realizar cambios importantes en la base de código mientras se sigue apuntando a .NET Framework 4.6.2, lo que hace que esta sea una versión más estructurada del enfoque anterior.</span><span class="sxs-lookup"><span data-stu-id="e2053-240">Your plan could involve making significant changes to your codebase while still targeting .NET Framework 4.6.2, making this a more structured version of the previous approach.</span></span> <span data-ttu-id="e2053-241">La forma de ejecutar el plan depende de la base de código.</span><span class="sxs-lookup"><span data-stu-id="e2053-241">How you go about executing your plan is dependent on your codebase.</span></span>

### <a name="mixing-approaches"></a><span data-ttu-id="e2053-242">Combinación de enfoques</span><span class="sxs-lookup"><span data-stu-id="e2053-242">Mixing approaches</span></span>

<span data-ttu-id="e2053-243">Es probable que vaya a combinar los enfoques anteriores en función de cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="e2053-243">It's likely that you'll mix the above approaches on a per-project basis.</span></span> <span data-ttu-id="e2053-244">Debe hacer lo que corresponda para usted y su base de código.</span><span class="sxs-lookup"><span data-stu-id="e2053-244">You should do what makes the most sense to you and for your codebase.</span></span>

## <a name="porting-your-tests"></a><span data-ttu-id="e2053-245">Portar las pruebas</span><span class="sxs-lookup"><span data-stu-id="e2053-245">Porting your tests</span></span>

<span data-ttu-id="e2053-246">La mejor forma de asegurarse de que todo funciona correctamente cuando traslada el código es probarlo mientras lo traslada a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-246">The best way to make sure everything works when you've ported your code is to test your code as you port it to .NET Core.</span></span> <span data-ttu-id="e2053-247">Para ello, debe usar un marco de pruebas que compila y ejecuta pruebas para .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e2053-247">To do this, you'll need to use a testing framework that builds and runs tests for .NET Core.</span></span> <span data-ttu-id="e2053-248">Actualmente tiene 3 opciones:</span><span class="sxs-lookup"><span data-stu-id="e2053-248">Currently, you have three options:</span></span>

- [<span data-ttu-id="e2053-249">xUnit</span><span class="sxs-lookup"><span data-stu-id="e2053-249">xUnit</span></span>](https://xunit.github.io/)
  * [<span data-ttu-id="e2053-250">Introducción</span><span class="sxs-lookup"><span data-stu-id="e2053-250">Getting Started</span></span>](http://xunit.github.io/docs/getting-started-dotnet-core.html)
  * [<span data-ttu-id="e2053-251">Herramienta para convertir un proyecto MSTest en xUnit</span><span class="sxs-lookup"><span data-stu-id="e2053-251">Tool to convert an MSTest project to xUnit</span></span>](https://github.com/dotnet/codeformatter/tree/master/src/XUnitConverter)
- [<span data-ttu-id="e2053-252">NUnit</span><span class="sxs-lookup"><span data-stu-id="e2053-252">NUnit</span></span>](http://www.nunit.org/)
  * [<span data-ttu-id="e2053-253">Introducción</span><span class="sxs-lookup"><span data-stu-id="e2053-253">Getting Started</span></span>](https://github.com/nunit/docs/wiki/Installation)
  * [<span data-ttu-id="e2053-254">Entrada de blog sobre la migración de MSTest a NUnit.</span><span class="sxs-lookup"><span data-stu-id="e2053-254">Blog post about migrating from MSTest to NUnit</span></span>](http://www.florian-rappl.de/News/Page/275/convert-mstest-to-nunit)
- [<span data-ttu-id="e2053-255">MSTest</span><span class="sxs-lookup"><span data-stu-id="e2053-255">MSTest</span></span>](https://docs.microsoft.com/visualstudio/test/unit-test-basics)

## <a name="recommended-approach-to-porting"></a><span data-ttu-id="e2053-256">Enfoque recomendado de portabilidad</span><span class="sxs-lookup"><span data-stu-id="e2053-256">Recommended approach to porting</span></span>

<span data-ttu-id="e2053-257">En última instancia, el esfuerzo de portabilidad depende significativamente de la estructura del código .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e2053-257">Ultimately, the porting effort depends heavily on how your .NET Framework code is structured.</span></span> <span data-ttu-id="e2053-258">Una forma conveniente de portar el código consiste en comenzar por la *base* de la biblioteca, que son los componentes fundamentales del código.</span><span class="sxs-lookup"><span data-stu-id="e2053-258">A good way to port your code is to begin with the *base* of your library, which are the foundational components of your code.</span></span> <span data-ttu-id="e2053-259">Pueden ser los modelos de datos u otras clases y métodos fundamentales que todo lo demás usa directa o indirectamente.</span><span class="sxs-lookup"><span data-stu-id="e2053-259">This might be data models or some other foundational classes and methods that everything else uses directly or indirectly.</span></span>

1. <span data-ttu-id="e2053-260">Porte el proyecto de prueba que comprueba el nivel de la biblioteca cuya portabilidad se está realizando actualmente.</span><span class="sxs-lookup"><span data-stu-id="e2053-260">Port the test project that tests the layer of your library that you're currently porting.</span></span>
1. <span data-ttu-id="e2053-261">Copie la base de la biblioteca en un nuevo proyecto .NET Core y seleccione la versión del estándar .NET que desea admitir.</span><span class="sxs-lookup"><span data-stu-id="e2053-261">Copy over the base of your library into a new .NET Core project and select the version of the .NET Standard you wish to support.</span></span>
1. <span data-ttu-id="e2053-262">Haga los cambios necesarios para la compilación del código.</span><span class="sxs-lookup"><span data-stu-id="e2053-262">Make any changes needed to get the code to compile.</span></span> <span data-ttu-id="e2053-263">Muchas de estas acciones pueden requerir agregar dependencias del paquete NuGet al archivo *csproj*.</span><span class="sxs-lookup"><span data-stu-id="e2053-263">Much of this may require adding NuGet package dependencies to your *csproj* file.</span></span>
1. <span data-ttu-id="e2053-264">Ejecute las pruebas y haga los ajustes que sean necesarios.</span><span class="sxs-lookup"><span data-stu-id="e2053-264">Run the tests and make any needed adjustments.</span></span>
1. <span data-ttu-id="e2053-265">Elija el nivel de código siguiente que se va a portar y repita los pasos anteriores.</span><span class="sxs-lookup"><span data-stu-id="e2053-265">Pick the next layer of code to port over and repeat the prior steps.</span></span>

<span data-ttu-id="e2053-266">Si empieza por la base de la biblioteca y avanza a partir de ella para probar cada nivel según sea necesario, la portabilidad es un proceso sistemático en el que se aíslan los problemas a un nivel de código a la vez.</span><span class="sxs-lookup"><span data-stu-id="e2053-266">If you start with the base of your library and move outward from the base and test each layer as needed, porting is a systematic process where problems are isolated to one layer of code at a time.</span></span>
