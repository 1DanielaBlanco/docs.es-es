---
title: "Migración de DNX a CLI de .NET Core"
description: Migre de las herramientas de DNX a las herramientas de la CLI de .NET Core.
keywords: .NET, .NET Core
author: blackdwarf
ms.author: mairaw
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: c0d70120-78c8-4d26-bb3c-801f42fc2366
ms.workload: dotnetcore
ms.openlocfilehash: dba38de28dc15147e5bcc5bf4cede9f4dd5fca62
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/23/2017
---
# <a name="migrating-from-dnx-to-net-core-cli-projectjson"></a><span data-ttu-id="a2fbc-104">Migración de DNX a CLI de .NET Core (project.json)</span><span class="sxs-lookup"><span data-stu-id="a2fbc-104">Migrating from DNX to .NET Core CLI (project.json)</span></span>

## <a name="overview"></a><span data-ttu-id="a2fbc-105">Información general</span><span class="sxs-lookup"><span data-stu-id="a2fbc-105">Overview</span></span>
<span data-ttu-id="a2fbc-106">Con la versión RC1 de .NET Core y ASP.NET Core 1.0, presentamos las herramientas DNX.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-106">The RC1 release of .NET Core and ASP.NET Core 1.0 introduced DNX tooling.</span></span> <span data-ttu-id="a2fbc-107">Con la versión RC2 de .NET Core y ASP.NET Core 1.0, hicimos la transición de DNX a .NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-107">The RC2 release of .NET Core and ASP.NET Core 1.0 moved from DNX to the .NET Core CLI.</span></span>

<span data-ttu-id="a2fbc-108">Resumamos un poco de qué se trata DNX como un breve recordatorio.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-108">As a slight refresher, let's recap what DNX was about.</span></span> <span data-ttu-id="a2fbc-109">DNX era un entorno de ejecución y un conjunto de herramientas para compilar aplicaciones de .NET Core y, más específicamente, de ASP.NET Core 1.0.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-109">DNX was a runtime and a toolset used to build .NET Core and, more specifically, ASP.NET Core 1.0 applications.</span></span> <span data-ttu-id="a2fbc-110">Constaba de 3 componentes principales:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-110">It consisted of 3 main pieces:</span></span>

1. <span data-ttu-id="a2fbc-111">DNVM: un script de instalación para obtener DNX.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-111">DNVM - an install script for obtaining DNX</span></span>
2. <span data-ttu-id="a2fbc-112">DNX (entorno de ejecución Dotnet): el entorno de ejecución que ejecuta el código.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-112">DNX (Dotnet Execution Runtime) - the runtime that executes your code</span></span>
3. <span data-ttu-id="a2fbc-113">DNU (utilidad para desarrolladores de Dotnet): herramientas para administrar dependencias y compilar y publicar las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-113">DNU (Dotnet Developer Utility) - tooling for managing dependencies, building and publishing your applications</span></span>

<span data-ttu-id="a2fbc-114">Con la presentación de la CLI, todos los componentes anteriores ahora forman parte de un conjunto de herramientas único.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-114">With the introduction of the CLI, all of the above are now part of a single toolset.</span></span> <span data-ttu-id="a2fbc-115">Sin embargo, como DNX estaba disponible en el período de tiempo de RC1, es posible que tenga proyectos que se compilaron así que desearía mover a las nuevas herramientas de CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-115">However, since DNX was available in RC1 timeframe, you might have projects that were built using it that you would want to move off to the new CLI tooling.</span></span> 

<span data-ttu-id="a2fbc-116">En esta guía de migración se analizarán los aspectos fundamentales sobre cómo migrar proyectos de DNX a la CLI de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-116">This migration guide will cover the essentials on how to migrate projects off of DNX and onto .NET Core CLI.</span></span> <span data-ttu-id="a2fbc-117">Si recién está comenzando un proyecto en .NET Core desde cero, puede omitir sin problemas este documento.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-117">If you are just starting a project on .NET Core from scratch, you can freely skip this document.</span></span> 

## <a name="main-changes-in-the-tooling"></a><span data-ttu-id="a2fbc-118">Principales cambios en las herramientas</span><span class="sxs-lookup"><span data-stu-id="a2fbc-118">Main changes in the tooling</span></span>
<span data-ttu-id="a2fbc-119">En primer lugar, es necesario describir algunos cambios generales en las herramientas.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-119">There are some general changes in the tooling that should be outlined first.</span></span> 

### <a name="no-more-dnvm"></a><span data-ttu-id="a2fbc-120">No más DNVM</span><span class="sxs-lookup"><span data-stu-id="a2fbc-120">No more DNVM</span></span>
<span data-ttu-id="a2fbc-121">DNVM, abreviatura para el inglés de *Administrador de versiones DotNet* era un script de PowerShell/búsqueda intensiva que se usaba para instalar un DNX en la máquina.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-121">DNVM, short for *DotNet Version Manager* was a bash/PowerShell script used to install a DNX on your machine.</span></span> <span data-ttu-id="a2fbc-122">Ayudó a los usuarios a obtener el DNX que necesitaban a partir de la fuente que especificaban (o la fuente predeterminada), además de marcar cierto DNX como "activo", lo que lo ubicaría en la $PATH de la sesión especificada.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-122">It helped users get the DNX they need from the feed they specified (or default ones) as well as mark a certain DNX "active", which would put it on the $PATH for the given session.</span></span> <span data-ttu-id="a2fbc-123">Esto le permitiría usar las diversas herramientas.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-123">This would allow you to use the various tools.</span></span>

<span data-ttu-id="a2fbc-124">DNVM se interrumpió porque su conjunto de características se volvió redundante debido a los cambios introducidos con las herramientas de la CLI de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-124">DNVM was discontinued because its feature set was made redundant by changes coming in the .NET Core CLI tools.</span></span>

<span data-ttu-id="a2fbc-125">Las herramientas de la CLI vienen empaquetadas de dos maneras principales:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-125">The CLI tools come packaged in two main ways:</span></span>

1. <span data-ttu-id="a2fbc-126">Instaladores nativos en una plataforma determinada.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-126">Native installers for a given platform</span></span>
2. <span data-ttu-id="a2fbc-127">Script de instalación para otras situaciones (como los servidores de CI).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-127">Install script for other situations (like CI servers)</span></span>

<span data-ttu-id="a2fbc-128">Por lo tanto, no se necesitan las características de instalación de DNVM.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-128">Given this, the DNVM install features are not needed.</span></span> <span data-ttu-id="a2fbc-129">¿Qué sucede, entonces, con las características de selección del entorno de ejecución?</span><span class="sxs-lookup"><span data-stu-id="a2fbc-129">But what about the runtime selection features?</span></span> 

<span data-ttu-id="a2fbc-130">Si agrega un paquete de cierta versión a las dependencias, hace referencia a un entorno de ejecución en su `project.json`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-130">You reference a runtime in your `project.json` by adding a package of a certain version to your dependencies.</span></span> <span data-ttu-id="a2fbc-131">Con este cambio, la aplicación podrá usar los nuevos bits de entorno de ejecución.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-131">With this change, your application will be able to use the new runtime bits.</span></span> <span data-ttu-id="a2fbc-132">Incorporar estos bits a la máquina es similar a lo que sucede con la CLI: instala el entorno de ejecución a través de los instaladores nativos que admite o a través del script de instalación.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-132">Getting these bits to your machine is the same as with the CLI: you install the runtime via one of the native installers it supports or via its install script.</span></span> 

### <a name="different-commands"></a><span data-ttu-id="a2fbc-133">Otros comandos</span><span class="sxs-lookup"><span data-stu-id="a2fbc-133">Different commands</span></span>
<span data-ttu-id="a2fbc-134">Si usó DNX, usaba algunos comandos provenientes de uno de sus tres componentes (DNX, DNU o DNVM).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-134">If you were using DNX, you used some commands from one of its three parts (DNX, DNU or DNVM).</span></span> <span data-ttu-id="a2fbc-135">Con la CLI, algunos de estos comandos cambian, algunos no están disponibles y otros son iguales, pero con pequeñas diferencias semánticas.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-135">With the CLI, some of these commands change, some are not available and some are the same but have slightly different semantics.</span></span> 

<span data-ttu-id="a2fbc-136">La tabla siguiente muestra la asignación entre los comandos de DNX/DNU y sus contrapartes de la CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-136">The table below shows the mapping between the DNX/DNU commands and their CLI counterparts.</span></span>


| <span data-ttu-id="a2fbc-137">Comando de DNX</span><span class="sxs-lookup"><span data-stu-id="a2fbc-137">DNX command</span></span>                       | <span data-ttu-id="a2fbc-138">Comando de la CLI</span><span class="sxs-lookup"><span data-stu-id="a2fbc-138">CLI command</span></span>       | <span data-ttu-id="a2fbc-139">Description</span><span class="sxs-lookup"><span data-stu-id="a2fbc-139">Description</span></span>                                                                                                       |
|--------------------------------   |----------------   |-----------------------------------------------------------------------------------------------------------------  |
| <span data-ttu-id="a2fbc-140">dnx run</span><span class="sxs-lookup"><span data-stu-id="a2fbc-140">dnx run</span></span>                           | <span data-ttu-id="a2fbc-141">dotnet run</span><span class="sxs-lookup"><span data-stu-id="a2fbc-141">dotnet run</span></span>        | <span data-ttu-id="a2fbc-142">Ejecute el código desde el origen.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-142">Run code from source.</span></span>                                                                                             |
| <span data-ttu-id="a2fbc-143">dnu build</span><span class="sxs-lookup"><span data-stu-id="a2fbc-143">dnu build</span></span>                         | <span data-ttu-id="a2fbc-144">dotnet build</span><span class="sxs-lookup"><span data-stu-id="a2fbc-144">dotnet build</span></span>      | <span data-ttu-id="a2fbc-145">Compile un archivo binario de IL del código.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-145">Build an IL binary of your code.</span></span>                                                                                  |
| <span data-ttu-id="a2fbc-146">dnu pack</span><span class="sxs-lookup"><span data-stu-id="a2fbc-146">dnu pack</span></span>                          | <span data-ttu-id="a2fbc-147">dotnet pack</span><span class="sxs-lookup"><span data-stu-id="a2fbc-147">dotnet pack</span></span>       | <span data-ttu-id="a2fbc-148">Cree un paquete NuGet del código.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-148">Package up a NuGet package of your code.</span></span>                                                                          |
| <span data-ttu-id="a2fbc-149">dnx \[comando] (por ejemplo, "dnx web")</span><span class="sxs-lookup"><span data-stu-id="a2fbc-149">dnx \[command] (for example, "dnx web")</span></span>   | <span data-ttu-id="a2fbc-150">no disponible\\*</span><span class="sxs-lookup"><span data-stu-id="a2fbc-150">N/A\\*</span></span>             | <span data-ttu-id="a2fbc-151">Si se usa DNX, ejecute un comando según lo definido en project.json.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-151">In DNX world, run a command as defined in the project.json.</span></span>                                                       |
| <span data-ttu-id="a2fbc-152">dnu install</span><span class="sxs-lookup"><span data-stu-id="a2fbc-152">dnu install</span></span>                       | <span data-ttu-id="a2fbc-153">no disponible\\*</span><span class="sxs-lookup"><span data-stu-id="a2fbc-153">N/A\\*</span></span>             | <span data-ttu-id="a2fbc-154">Si se usa DNX, instale un paquete como dependencia.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-154">In the DNX world, install a package as a dependency.</span></span>                                                              |
| <span data-ttu-id="a2fbc-155">dnu restore</span><span class="sxs-lookup"><span data-stu-id="a2fbc-155">dnu restore</span></span>                       | <span data-ttu-id="a2fbc-156">dotnet restore</span><span class="sxs-lookup"><span data-stu-id="a2fbc-156">dotnet restore</span></span>    | <span data-ttu-id="a2fbc-157">Restaure las dependencias especificadas en project.json.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-157">Restore dependencies specified in your project.json.</span></span> <span data-ttu-id="a2fbc-158">([vea la nota](#dotnet-restore-note))</span><span class="sxs-lookup"><span data-stu-id="a2fbc-158">([see note](#dotnet-restore-note))</span></span>                                                               |
| <span data-ttu-id="a2fbc-159">dnu publish</span><span class="sxs-lookup"><span data-stu-id="a2fbc-159">dnu publish</span></span>                       | <span data-ttu-id="a2fbc-160">dotnet publish</span><span class="sxs-lookup"><span data-stu-id="a2fbc-160">dotnet publish</span></span>    | <span data-ttu-id="a2fbc-161">Publique la aplicación para su implementación en una de tres formas (portátil, portátil con nativo e independiente).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-161">Publish your application for deployment in one of the three forms (portable, portable with native and standalone).</span></span>    |
| <span data-ttu-id="a2fbc-162">dnu wrap</span><span class="sxs-lookup"><span data-stu-id="a2fbc-162">dnu wrap</span></span>                          | <span data-ttu-id="a2fbc-163">no disponible\\*</span><span class="sxs-lookup"><span data-stu-id="a2fbc-163">N/A\\*</span></span>             | <span data-ttu-id="a2fbc-164">Si se usa DNX, encapsule un archivo project.json en csproj.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-164">In DNX world, wrap a project.json in csproj.</span></span>                                                                      |
| <span data-ttu-id="a2fbc-165">dnu commands</span><span class="sxs-lookup"><span data-stu-id="a2fbc-165">dnu commands</span></span>                      | <span data-ttu-id="a2fbc-166">no disponible\\*</span><span class="sxs-lookup"><span data-stu-id="a2fbc-166">N/A\\*</span></span>             | <span data-ttu-id="a2fbc-167">Si se usa DNX, administre los comandos instalados globalmente.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-167">In DNX world, manage the globally installed commands.</span></span>                                                             |

<span data-ttu-id="a2fbc-168">(\\*): por diseño, la CLI no admite estas características.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-168">(\\*) - these features are not supported in the CLI by design.</span></span> 

## <a name="dnx-features-that-are-not-supported"></a><span data-ttu-id="a2fbc-169">Características de DNX no admitidas</span><span class="sxs-lookup"><span data-stu-id="a2fbc-169">DNX features that are not supported</span></span>
<span data-ttu-id="a2fbc-170">Tal como muestra la tabla anterior, hay características de DNX que decidimos no admitir en la CLI, al menos por el momento.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-170">As the table above shows, there are features from the DNX world that we decided not to support in the CLI, at least for the time being.</span></span> <span data-ttu-id="a2fbc-171">En esta sección se analizarán las más importantes y se describe el razonamiento detrás de la decisión de no admitirlas, además de las soluciones que puede implementar si las necesita.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-171">This section will go through the most important ones and outline the rationale behind not supporting them as well as workarounds if you do need them.</span></span>

### <a name="global-commands"></a><span data-ttu-id="a2fbc-172">Comandos globales</span><span class="sxs-lookup"><span data-stu-id="a2fbc-172">Global commands</span></span>
<span data-ttu-id="a2fbc-173">DNU incluía un concepto llamado "comandos globales".</span><span class="sxs-lookup"><span data-stu-id="a2fbc-173">DNU came with a concept called "global commands".</span></span> <span data-ttu-id="a2fbc-174">En esencia, se trataba de aplicaciones de consola empaquetadas como paquetes NuGet con un script de shell que podría invocar el DNX especificado para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-174">These were, essentially, console applications packaged up as NuGet packages with a shell script that would invoke the DNX you specified to run the application.</span></span> 

<span data-ttu-id="a2fbc-175">La CLI no admite este concepto.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-175">The CLI does not support this concept.</span></span> <span data-ttu-id="a2fbc-176">Sin embargo, sí admite el concepto de agregar comandos por proyecto que se pueden invocar con la conocida sintaxis `dotnet <command>`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-176">It does, however, support the concept of adding per-project commands that can be invoked using the familiar `dotnet <command>` syntax.</span></span>

### <a name="installing-dependencies"></a><span data-ttu-id="a2fbc-177">Instalación de dependencias</span><span class="sxs-lookup"><span data-stu-id="a2fbc-177">Installing dependencies</span></span>
<span data-ttu-id="a2fbc-178">A partir de la versión v1, las herramientas de la CLI de .NET Core no tienen un comando `install` para instalar dependencias.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-178">As of v1, the .NET Core CLI tools don't have an `install` command for installing dependencies.</span></span> <span data-ttu-id="a2fbc-179">Para instalar un paquete desde NuGet, necesita agregarlo como una dependencia al archivo `project.json` y, luego, ejecutar `dotnet restore` ([vea la nota](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-179">In order to install a package from NuGet, you would need to add it as a dependency to your `project.json` file and then run `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> 

### <a name="running-your-code"></a><span data-ttu-id="a2fbc-180">Ejecución del código</span><span class="sxs-lookup"><span data-stu-id="a2fbc-180">Running your code</span></span>
<span data-ttu-id="a2fbc-181">Existen dos formas principales de ejecutar el código.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-181">There are two main ways to run your code.</span></span> <span data-ttu-id="a2fbc-182">Una es desde el origen, con `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-182">One is from source, with `dotnet run`.</span></span> <span data-ttu-id="a2fbc-183">A diferencia de `dnx run`, no hará ninguna compilación en memoria.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-183">Unlike `dnx run`, this will not do any in-memory compilation.</span></span> <span data-ttu-id="a2fbc-184">En realidad, invocará a `dotnet build` para compilar el código y, luego, ejecutar el archivo binario compilado.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-184">It will actually invoke `dotnet build` to build your code and then run the built binary.</span></span> 

<span data-ttu-id="a2fbc-185">La otra forma es usar el `dotnet` mismo para ejecutar el código.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-185">Another way is using the `dotnet` itself to run your code.</span></span> <span data-ttu-id="a2fbc-186">Para ello, proporcione una ruta de acceso al ensamblado: `dotnet path/to/an/assembly.dll`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-186">This is done by providing a path to your assembly: `dotnet path/to/an/assembly.dll`.</span></span> 

## <a name="migrating-your-dnx-project-to-net-core-cli"></a><span data-ttu-id="a2fbc-187">Migración del proyecto DNX a la CLI de .NET Core</span><span class="sxs-lookup"><span data-stu-id="a2fbc-187">Migrating your DNX project to .NET Core CLI</span></span>
<span data-ttu-id="a2fbc-188">Además de usar los comandos nuevos cuando se trabaja con el código, hay 3 aspectos importantes que se dejaron en la migración desde DNX:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-188">In addition to using new commands when working with your code, there are three major things left in migrating from DNX:</span></span>

1. <span data-ttu-id="a2fbc-189">Si lo tiene, migre el archivo `global.json` para usar la CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-189">Migrate the `global.json` file if you have it to be able to use CLI.</span></span>
2. <span data-ttu-id="a2fbc-190">Migración del archivo del proyecto (`project.json`) mismo a las herramientas de la CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-190">Migrating the project file (`project.json`) itself to the CLI tooling.</span></span>
3. <span data-ttu-id="a2fbc-191">Migración de cualquier API de DNX a sus contrapartes de BCL.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-191">Migrating off of any DNX APIs to their BCL counterparts.</span></span> 

### <a name="changing-the-globaljson-file"></a><span data-ttu-id="a2fbc-192">Cambio del archivo global.json</span><span class="sxs-lookup"><span data-stu-id="a2fbc-192">Changing the global.json file</span></span>
<span data-ttu-id="a2fbc-193">El archivo `global.json` actúa como un archivo de solución tanto para los proyectos de RC1 como para los de RC2 (o posteriores).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-193">The `global.json` file acts like a solution file for both the RC1 and RC2 (or later) projects.</span></span> <span data-ttu-id="a2fbc-194">A fin de que las herramientas de la CLI (como también Visual Studio) diferencien entre RC1 y las versiones posteriores, usan la propiedad `"sdk": { "version" }` para hacer la distinción entre qué proyecto es RC1 o posterior.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-194">In order for the CLI tools (as well as Visual Studio) to differentiate between RC1 and later versions, they use the `"sdk": { "version" }` property to make the distinction which project is RC1 or later.</span></span> <span data-ttu-id="a2fbc-195">Si `global.json` no tiene este nodo, se supone que es la versión más reciente.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-195">If `global.json` doesn't have this node at all, it is assumed to be the latest.</span></span> 

<span data-ttu-id="a2fbc-196">Con el fin de actualizar el archivo `global.json`, quite la propiedad o establézcala en la versión exacta de las herramientas que desea usar; en este caso, **1.0.0-preview2-003121**:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-196">In order to update the `global.json` file, either remove the property or set it to the exact version of the tools that you wish to use, in this case **1.0.0-preview2-003121**:</span></span>

```json
{
    "sdk": {
        "version": "1.0.0-preview2-003121"
    }
}
```

### <a name="migrating-the-project-file"></a><span data-ttu-id="a2fbc-197">Migración del archivo del proyecto</span><span class="sxs-lookup"><span data-stu-id="a2fbc-197">Migrating the project file</span></span>
<span data-ttu-id="a2fbc-198">Tanto la CLI como DNX usan el mismo sistema de proyectos básico basado en el archivo `project.json`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-198">The CLI and DNX both use the same basic project system based on `project.json` file.</span></span> <span data-ttu-id="a2fbc-199">La sintaxis y la semántica del archivo del proyecto son prácticamente iguales, con pequeñas diferencias en función de los escenarios.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-199">The syntax and the semantics of the project file are pretty much the same, with small differences based on the scenarios.</span></span> <span data-ttu-id="a2fbc-200">También hay algunos cambios en el esquema que puede ver en el [archivo del esquema](http://json.schemastore.org/project).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-200">There are also some changes to the schema which you can see in the [schema file](http://json.schemastore.org/project).</span></span>

<span data-ttu-id="a2fbc-201">Si compila una aplicación de consola, debe agregar el siguiente fragmento de código al archivo del proyecto:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-201">If you are building a console application, you need to add the following snippet to your project file:</span></span>

```json
"buildOptions": {
    "emitEntryPoint": true
}
```

<span data-ttu-id="a2fbc-202">Esto indica a `dotnet build` que emita un punto de entrada para la aplicación, lo que permitirá que el código se pueda ejecutar.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-202">This instructs `dotnet build` to emit an entry point for your application, effectively making your code runnable.</span></span> <span data-ttu-id="a2fbc-203">Si compila una biblioteca de clases, simplemente debe omitir la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-203">If you are building a class library, simply omit the above section.</span></span> <span data-ttu-id="a2fbc-204">Por supuesto, una vez que agregue el fragmento de código anterior al archivo `project.json`, deberá agregar un punto de entrada estático.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-204">Of course, once you add the above snippet to your `project.json` file, you need to add a static entry point.</span></span> <span data-ttu-id="a2fbc-205">Con la migración de DNX, los servicios de DI que proporcionaba ya no están disponibles y, por lo tanto, debe tratarse de un punto de entrada .NET básico: `static void Main()`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-205">With the move off DNX, the DI services it provided are no longer available and thus this needs to be a basic .NET entry point: `static void Main()`.</span></span>

<span data-ttu-id="a2fbc-206">Si tiene una sección de "comandos" en su `project.json`, puede quitarla.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-206">If you have a "commands" section in your `project.json`, you can remove it.</span></span> <span data-ttu-id="a2fbc-207">Algunos de los comandos que existían como comandos de DNU, como los comandos de la CLI de Entity Framework, se trasladan para convertirse en extensiones por proyecto en la CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-207">Some of the commands that used to exist as DNU commands, such as Entity Framework CLI commands, are being ported to be per-project extensions to the CLI.</span></span> <span data-ttu-id="a2fbc-208">Si compila sus propios comandos que usa en los proyectos, debe reemplazarlos con extensiones de la CLI.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-208">If you built your own commands that you are using in your projects, you need to replace them with CLI extensions.</span></span> <span data-ttu-id="a2fbc-209">En este caso, el nodo `commands` de `project.json` debe reemplazarse por el nodo `tools` y se deben enumerar las dependencias de herramientas.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-209">In this case, the `commands` node in `project.json` needs to be replaced by the `tools` node and it needs to list the tools dependencies.</span></span> 

<span data-ttu-id="a2fbc-210">Una vez hecho esto, deberá decidir qué tipo de portabilidad desea para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-210">After these things are done, you need to decide which type of portability you wish for you app.</span></span> <span data-ttu-id="a2fbc-211">Con .NET Core, invertimos en proporcionar un espectro de opciones de portabilidad entre las que puede elegir.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-211">With .NET Core, we have invested into providing a spectrum of portability options that you can choose from.</span></span> <span data-ttu-id="a2fbc-212">Por ejemplo, podría tener una aplicación completamente *portátil*, o bien podría querer tener una aplicación *autocontenida*.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-212">For instance, you may want to have a fully *portable* application or you may want to have a *self-contained* application.</span></span> <span data-ttu-id="a2fbc-213">La opción de la aplicación portátil es más similar a cómo funcionan las aplicaciones de .NET Framework: necesita un componente compartido para ejecutarlo en la máquina de destino (.NET Core).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-213">The portable application option is more like .NET Framework applications work: it needs a shared component to execute it on the target machine (.NET Core).</span></span> <span data-ttu-id="a2fbc-214">La aplicación autocontenida no requiere que .NET Core esté instalado en el destino, pero es necesario generar una aplicación para cada SO que desea admitir.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-214">The self-contained application doesn't require .NET Core to be installed on the target, but you have to produce one application for each OS you wish to support.</span></span> <span data-ttu-id="a2fbc-215">Estos tipos de portabilidad, y otros más, se analizan en el documento sobre los [tipos de portabilidad de aplicaciones](../deploying/index.md).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-215">These portability types and more are discussed in the [application portability type](../deploying/index.md) document.</span></span> 

<span data-ttu-id="a2fbc-216">Una vez que decide el tipo de portabilidad que desea, deberá cambiar las plataformas de destino.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-216">Once you make a call on what type of portability you want, you need to change your targeted framework(s).</span></span> <span data-ttu-id="a2fbc-217">Si escribiera aplicaciones para .NET Core, es probable que use `dnxcore50` como la plataforma de destino.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-217">If you were writing applications for .NET Core, you were most likely using `dnxcore50` as  your targeted framework.</span></span> <span data-ttu-id="a2fbc-218">Con la CLI y los cambios que trajo la nueva especificación [.NET Standard](../../standard/net-standard.md), la plataforma debe ser una de las siguientes:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-218">With the CLI and the changes that the new [.NET Standard](../../standard/net-standard.md) brought, the framework needs to be one of the following:</span></span>

1. <span data-ttu-id="a2fbc-219">`netcoreapp1.0`, si escribe aplicaciones en .NET Core (incluidas las aplicaciones de ASP.NET Core).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-219">`netcoreapp1.0` - if you are writing applications on .NET Core (including ASP.NET Core applications)</span></span>
2. <span data-ttu-id="a2fbc-220">`netstandard1.6`, si escribe las bibliotecas de clases para .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-220">`netstandard1.6` - if you are writing class libraries for .NET Core</span></span>

<span data-ttu-id="a2fbc-221">Si usa otros destinos `dnx`, como `dnx451`, también deberá cambiarlos.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-221">If you are using other `dnx` targets, like `dnx451` you will need to change those as well.</span></span> <span data-ttu-id="a2fbc-222">`dnx451`se debe cambiar a `net451`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-222">`dnx451` should be changed to `net451`.</span></span> <span data-ttu-id="a2fbc-223">Consulte el tema [Estándar .NET](../../standard/net-standard.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-223">Please refer to the [.NET Standard](../../standard/net-standard.md) topic for more information.</span></span> 

<span data-ttu-id="a2fbc-224">El archivo `project.json` está casi listo.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-224">Your `project.json` is now mostly ready.</span></span> <span data-ttu-id="a2fbc-225">Debe revisar la lista de dependencias y actualizarlas a sus versiones más recientes, especialmente si usa las dependencias de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-225">You need to go through your dependencies list and update the dependencies to their newer versions, especially if you are using ASP.NET Core dependencies.</span></span> <span data-ttu-id="a2fbc-226">Si usará los paquetes independientes para las API de BCL, puede usar el paquete del entorno de ejecución tal como se explica en el documento sobre los [tipos de portabilidad de aplicaciones](../deploying/index.md).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-226">If you were using separate packages for BCL APIs, you can use the runtime package as explained in the [application portability type](../deploying/index.md) document.</span></span> 

<span data-ttu-id="a2fbc-227">Cuando esté listo, puede intentar la restauración con `dotnet restore` ([vea la nota](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="a2fbc-227">Once you are ready, you can try restoring with `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> <span data-ttu-id="a2fbc-228">En función de la versión de las dependencias, puede encontrar errores si NuGet no puede resolver las dependencias de una de las plataformas de destino anteriormente mencionadas.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-228">Depending on the version of your dependencies, you may encounter errors if NuGet cannot resolve the dependencies for one of the targeted frameworks above.</span></span> <span data-ttu-id="a2fbc-229">Este es un problema "en un momento específico"; a medida que pase el tiempo, cada vez más paquetes incluirán compatibilidad con estos marcos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-229">This is a "point-in-time" problem; as time progresses, more and more packages will include support for these frameworks.</span></span> <span data-ttu-id="a2fbc-230">Por ahora, si se enfrenta con este problema, puede usar la instrucción `imports` dentro del nodo `framework` para especificar a NuGet que puede restaurar los paquetes que tienen como destino el marco de trabajo que se encuentra dentro de la instrucción de "importaciones".</span><span class="sxs-lookup"><span data-stu-id="a2fbc-230">For now, if you run into this, you can use the `imports` statement within the `framework` node to specify to NuGet that it can restore the packages targeting the framework within the "imports" statement.</span></span> <span data-ttu-id="a2fbc-231">Los errores de restauración que recibe en este caso deben proporcionar información suficiente que le permita distinguir los marcos de trabajo que debe importar.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-231">The restoring errors you get in this case should provide enough information to tell you which frameworks you need to import.</span></span> <span data-ttu-id="a2fbc-232">Si está un poco confundido o es nuevo en esto, en palabras generales, bastaría con especificar `dnxcore50` y `portable-net45+win8` en la instrucción `imports`.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-232">If you are slightly lost or new to this, in general, specifying `dnxcore50` and `portable-net45+win8` in the `imports` statement should do the trick.</span></span> <span data-ttu-id="a2fbc-233">El fragmento de código JSON siguiente muestra cómo se verá:</span><span class="sxs-lookup"><span data-stu-id="a2fbc-233">The JSON snippet below shows how this looks like:</span></span>

```json
    "frameworks": {
        "netcoreapp1.0": { 
            "imports": ["dnxcore50", "portable-net45+win8"]
        }
    }
```

<span data-ttu-id="a2fbc-234">La ejecución de `dotnet build` mostrará cualquier posible error de compilación, aunque no debería haber muchos.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-234">Running `dotnet build` will show any eventual build errors, though there shouldn't be too many of them.</span></span> <span data-ttu-id="a2fbc-235">Una vez que el código se compile y ejecute correctamente, puede probarlo con el ejecutor.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-235">After your code is building and running properly, you can test it out with the runner.</span></span> <span data-ttu-id="a2fbc-236">Ejecute `dotnet <path-to-your-assembly>` y vea si se ejecuta correctamente.</span><span class="sxs-lookup"><span data-stu-id="a2fbc-236">Execute `dotnet <path-to-your-assembly>` and see it run.</span></span>

<a name="dotnet-restore-note"></a>
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]