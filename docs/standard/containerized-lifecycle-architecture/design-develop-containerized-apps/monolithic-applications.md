---
title: Aplicaciones monolíticas
description: Ciclo de vida de aplicaciones de Docker en contenedor con la plataforma y las herramientas de Microsoft
ms.prod: .net
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 1a9969930f5d57bdc66207b7c4a9d43ea43b56f7
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/18/2018
---
# <a name="monolithic-applications"></a><span data-ttu-id="f0e97-103">Aplicaciones monolíticas</span><span class="sxs-lookup"><span data-stu-id="f0e97-103">Monolithic applications</span></span>

<span data-ttu-id="f0e97-104">En este escenario, está creando una aplicación web simple y monolítico o el servicio e implementando como un contenedor.</span><span class="sxs-lookup"><span data-stu-id="f0e97-104">In this scenario, you are building a single and monolithic web application or service and deploying it as a container.</span></span> <span data-ttu-id="f0e97-105">Dentro de la aplicación, la estructura no puede ser monolítica; podrían forman parte de varias bibliotecas, componentes o incluso las capas (nivel de aplicación, el nivel de dominio, capa de acceso a datos, etcetera).</span><span class="sxs-lookup"><span data-stu-id="f0e97-105">Within the application, the structure might not be monolithic; it might comprise several libraries, components, or even layers (application layer, domain layer, data access layer, etc.).</span></span> <span data-ttu-id="f0e97-106">Externamente, es un único contenedor, como un proceso único, sola aplicación web o servicio único.</span><span class="sxs-lookup"><span data-stu-id="f0e97-106">Externally, it is a single container, like a single process, single web application, or single service.</span></span>

<span data-ttu-id="f0e97-107">Para administrar este modelo, debe implementar un único contenedor para representar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f0e97-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="f0e97-108">Para ajustar la escala, basta con agregar unas cuantas copias más con un equilibrador de carga en la parte frontal.</span><span class="sxs-lookup"><span data-stu-id="f0e97-108">To scale it, just add a few more copies with a load balancer in front.</span></span> <span data-ttu-id="f0e97-109">La simplicidad proviene de administrar una única implementación de un único contenedor o la máquina virtual (VM).</span><span class="sxs-lookup"><span data-stu-id="f0e97-109">The simplicity comes from managing a single deployment in a single container or virtual machine (VM).</span></span>

<span data-ttu-id="f0e97-110">Después de la entidad de seguridad que realiza una acción sólo un contenedor y lo hace en un proceso, el patrón monolítico está en conflicto.</span><span class="sxs-lookup"><span data-stu-id="f0e97-110">Following the principal that a container does one thing only, and does it in one process, the monolithic pattern is in conflict.</span></span> <span data-ttu-id="f0e97-111">Puede incluir varios componentes/bibliotecas o capas internas dentro de cada contenedor, como se muestra en la figura 4-1.</span><span class="sxs-lookup"><span data-stu-id="f0e97-111">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 4-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="f0e97-112">Figura 4-1: muestra un ejemplo de arquitectura de aplicaciones monolítico</span><span class="sxs-lookup"><span data-stu-id="f0e97-112">Figure 4-1: An example of monolithic application architecture</span></span>

<span data-ttu-id="f0e97-113">El inconveniente de este método incluye si o cuando crece la aplicación, que requiere una ampliación.</span><span class="sxs-lookup"><span data-stu-id="f0e97-113">The downside to this approach comes if or when the application grows, requiring it to scale.</span></span> <span data-ttu-id="f0e97-114">Si se escala toda la aplicación, realmente no es un problema.</span><span class="sxs-lookup"><span data-stu-id="f0e97-114">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="f0e97-115">Sin embargo, en la mayoría de los casos, algunas partes de la aplicación son los puntos de retracción que requieren el ajuste de escala, mientras que otros componentes se utilizan menos.</span><span class="sxs-lookup"><span data-stu-id="f0e97-115">However, in most cases, a few parts of the application are the choke points that require scaling, whereas other components are used less.</span></span>

<span data-ttu-id="f0e97-116">Con el ejemplo de comercio electrónico típico, lo que es probable que necesita es escalar el componente de información de producto.</span><span class="sxs-lookup"><span data-stu-id="f0e97-116">Using the typical e-commerce example, what you likely need is to scale the product information component.</span></span> <span data-ttu-id="f0e97-117">Hay muchos más clientes que buscan productos de los que los compran.</span><span class="sxs-lookup"><span data-stu-id="f0e97-117">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="f0e97-118">Más clientes usan la cesta en lugar de usar la canalización de pago.</span><span class="sxs-lookup"><span data-stu-id="f0e97-118">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="f0e97-119">Menos clientes publican comentarios o consultan su historial de compras.</span><span class="sxs-lookup"><span data-stu-id="f0e97-119">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="f0e97-120">Y es probable que tenga solo un conjunto de empleados, en una única región, que necesita para administrar el contenido y las campañas de marketing.</span><span class="sxs-lookup"><span data-stu-id="f0e97-120">And you likely have only a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="f0e97-121">Escalando el diseño monolítico, todo el código se implementa varias veces.</span><span class="sxs-lookup"><span data-stu-id="f0e97-121">By scaling the monolithic design, all of the code is deployed multiple times.</span></span>

<span data-ttu-id="f0e97-122">Además el "escala-todo" problema, los cambios en un único componente requieren al volver a examinar completa de toda la aplicación, así como una implementación completa de todas las instancias.</span><span class="sxs-lookup"><span data-stu-id="f0e97-122">In addition to the "scale-everything" problem, changes to a single component require complete retesting of the entire application as well as a complete redeployment of all the instances.</span></span>

<span data-ttu-id="f0e97-123">El enfoque monolítico es bastante habitual y muchas organizaciones están desarrollando con este método de arquitectura.</span><span class="sxs-lookup"><span data-stu-id="f0e97-123">The monolithic approach is common, and many organizations are developing with this architectural method.</span></span> <span data-ttu-id="f0e97-124">Muchos bueno disfrutan suficientes resultados, mientras que otros usuarios encuentran límites.</span><span class="sxs-lookup"><span data-stu-id="f0e97-124">Many enjoy good enough results, whereas others encounter limits.</span></span> <span data-ttu-id="f0e97-125">Muchos diseñarse sus aplicaciones en este modelo, ya que la infraestructura y herramientas eran demasiado difíciles de SOA de compilación y no verán la necesidad, hasta que la aplicación ha crecido.</span><span class="sxs-lookup"><span data-stu-id="f0e97-125">Many designed their applications in this model because the tools and infrastructure were too difficult to build SOAs, and they didn't see the need—until the app grew.</span></span>

<span data-ttu-id="f0e97-126">Desde una perspectiva de la infraestructura, cada servidor puede ejecutar muchas aplicaciones dentro del mismo host y tienen una proporción aceptable de eficacia en el uso de recursos, como se muestra en la figura 4-2.</span><span class="sxs-lookup"><span data-stu-id="f0e97-126">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in your resources usage, as shown in Figure 4-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="f0e97-127">Figura 4-2: un host que ejecuta varias aplicaciones o contenedores</span><span class="sxs-lookup"><span data-stu-id="f0e97-127">Figure 4-2: A host running multiple apps/containers</span></span>

<span data-ttu-id="f0e97-128">Puede implementar aplicaciones monolíticas en Azure mediante el uso de máquinas virtuales dedicadas para cada instancia.</span><span class="sxs-lookup"><span data-stu-id="f0e97-128">You can deploy monolithic applications in Azure by using dedicated VMs for each instance.</span></span> <span data-ttu-id="f0e97-129">Usar [conjuntos de escalas de VM de Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), puede escalar fácilmente las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f0e97-129">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can scale the VMs easily.</span></span> <span data-ttu-id="f0e97-130">[Azure App Services](https://azure.microsoft.com/en-us/services/app-service/) puede ejecutar aplicaciones monolíticas y escalar fácilmente instancias sin necesidad de administrar las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="f0e97-130">[Azure App Services](https://azure.microsoft.com/en-us/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="f0e97-131">A partir de 2016, servicios de aplicaciones de Azure puede ejecuta instancias únicas de contenedores de Docker, así, simplificar la implementación.</span><span class="sxs-lookup"><span data-stu-id="f0e97-131">Since 2016, Azure App Services can run single instances of Docker containers, as well, simplifying the deployment.</span></span> <span data-ttu-id="f0e97-132">Y con Docker, puede implementar una sola máquina virtual como un host Docker y ejecutar varias instancias.</span><span class="sxs-lookup"><span data-stu-id="f0e97-132">And, using Docker, you can deploy a single VM as a Docker host and run multiple instances.</span></span> <span data-ttu-id="f0e97-133">Con el equilibrador de Azure, como se muestra en la figura 4-3, puede administrar el ajuste de escala.</span><span class="sxs-lookup"><span data-stu-id="f0e97-133">Using the Azure balancer, as illustrated in the Figure 4-3, you can manage scaling.</span></span>

![](./media/image3.png)

<span data-ttu-id="f0e97-134">Figura 4-3: varios hosts escalamiento una única aplicación aplicaciones/contenedores de Docker</span><span class="sxs-lookup"><span data-stu-id="f0e97-134">Figure 4-3: Multiple hosts scaling-out a single Docker application apps/containers</span></span>

<span data-ttu-id="f0e97-135">Puede administrar la implementación a los distintos hosts a través de técnicas de implementación tradicionales.</span><span class="sxs-lookup"><span data-stu-id="f0e97-135">You can manage the deployment to the various hosts via traditional deployment techniques.</span></span> <span data-ttu-id="f0e97-136">Puede administrar los hosts de Docker mediante el uso de comandos, como `docker run` manualmente, mediante la automatización, como las canalizaciones de entrega continua (CD), que se explican más adelante en este libro electrónico.</span><span class="sxs-lookup"><span data-stu-id="f0e97-136">You can manage Docker hosts by using commands like `docker run` manually, through automation such as Continuous Delivery (CD) pipelines, which we explain later in this e-book.</span></span>

## <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="f0e97-137">Una aplicación monolítica implementada como un contenedor</span><span class="sxs-lookup"><span data-stu-id="f0e97-137">Monolithic application deployed as a container</span></span>

<span data-ttu-id="f0e97-138">Hay ventajas derivadas del uso de contenedores para administrar implementaciones monolíticas.</span><span class="sxs-lookup"><span data-stu-id="f0e97-138">There are benefits to using containers to manage monolithic deployments.</span></span> <span data-ttu-id="f0e97-139">Escalar las instancias de los contenedores es mucho más rápido y fácil que implementar máquinas virtuales adicionales.</span><span class="sxs-lookup"><span data-stu-id="f0e97-139">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="f0e97-140">Aunque los conjuntos de escalas de VM son una característica excelente para escalar las máquinas virtuales, que son necesarios para alojar los contenedores de Docker, tardan tiempo en configurar.</span><span class="sxs-lookup"><span data-stu-id="f0e97-140">Although VM Scale Sets are a great feature to scale VMs, which are required to host your Docker containers, they take time to set up.</span></span> <span data-ttu-id="f0e97-141">Cuando se implementa como instancias de aplicación, la configuración de la aplicación se administra como parte de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="f0e97-141">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="f0e97-142">Implementar las actualizaciones como imágenes de Docker es mucho más rápido y eficaz en la red.</span><span class="sxs-lookup"><span data-stu-id="f0e97-142">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="f0e97-143">Las instancias de Vn pueden configurarse en los mismos hosts que las instancias de Vn-1, lo que elimina los costos adicionales resultantes de máquinas virtuales adicionales.</span><span class="sxs-lookup"><span data-stu-id="f0e97-143">The Vn instances can be set up on the same hosts as your Vn-1 instances, eliminating added costs resulting from additional VMs.</span></span> <span data-ttu-id="f0e97-144">Imágenes de docker se inician normalmente en segundos, lo que acelera la implementación.</span><span class="sxs-lookup"><span data-stu-id="f0e97-144">Docker images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="f0e97-145">Anular una instancia de Docker es tan sencillo como invocar el `docker stop` comando, normalmente se realizan en menos de un segundo.</span><span class="sxs-lookup"><span data-stu-id="f0e97-145">Tearing down a Docker instance is as easy as invoking the `docker stop` command, typically completing in less than a second.</span></span>

<span data-ttu-id="f0e97-146">Dado que los contenedores son intrínsecamente inmutables, por diseño, nunca necesite preocuparse sobre máquinas virtuales dañadas porque un script de actualización que se haya olvidado para tener en cuenta algunas configuración específica o un archivo restante en el disco.</span><span class="sxs-lookup"><span data-stu-id="f0e97-146">Because containers are inherently immutable, by design, you never need to worry about corrupted VMs because an update script forgot to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="f0e97-147">Aunque monolíticas aplicaciones pueden beneficiarse de Docker, tocamos en sólo las sugerencias de las ventajas.</span><span class="sxs-lookup"><span data-stu-id="f0e97-147">Although monolithic apps can benefit from Docker, we're touching on only the tips of the benefits.</span></span> <span data-ttu-id="f0e97-148">Las mayores ventajas de administrar contenedores procede de la implementación con orchestrators de contenedor que administran las distintas instancias y ciclo de vida de cada instancia del contenedor.</span><span class="sxs-lookup"><span data-stu-id="f0e97-148">The larger benefits of managing containers comes from deploying with container orchestrators that manage the various instances and life cycle of each container instance.</span></span> <span data-ttu-id="f0e97-149">Separar la aplicación monolítica en subsistemas que se pueden escalar, desarrollar e implementar de forma individual es el punto de entrada al reino de los microservicios.</span><span class="sxs-lookup"><span data-stu-id="f0e97-149">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-docker-container-app-to-azure-app-service"></a><span data-ttu-id="f0e97-150">Publicar una única aplicación de contenedor de Docker en el servicio de aplicaciones de Azure</span><span class="sxs-lookup"><span data-stu-id="f0e97-150">Publishing a single Docker container app to Azure App Service</span></span>

<span data-ttu-id="f0e97-151">Ya sea porque desea obtener una rápida validación de un contenedor de implementada en Azure o porque la aplicación está simplemente una aplicación de contenedor único, los servicios de aplicaciones de Azure proporciona una excelente manera de proporcionar servicios escalables destinados a single-container.</span><span class="sxs-lookup"><span data-stu-id="f0e97-151">Either because you want to get a quick validation of a container deployed to Azure or because the app is simply a single-container app, Azure App Services provides a great way to provide scalable single-container services.</span></span>

<span data-ttu-id="f0e97-152">Con el servicio de aplicación de Azure es intuitivo y que pueda empezar a y ejecutando rápidamente porque proporciona gran Git integración tomar el código, genérelo en Microsoft Visual Studio y lo implementará directamente en Azure.</span><span class="sxs-lookup"><span data-stu-id="f0e97-152">Using Azure App Service is intuitive and you can get up and running quickly because it provides great Git integration to take your code, build it in Microsoft Visual Studio, and directly deploy it to Azure.</span></span> <span data-ttu-id="f0e97-153">Pero, tradicionalmente (con ningún Docker), si necesita otras funcionalidades, marcos o dependencias que no son compatibles con servicios de aplicaciones, deba esperar hasta que el equipo de Azure actualiza esas dependencias en el servicio de aplicaciones o ha cambiado a otros servicios como Service Fabric, servicios en la nube o máquinas virtuales incluso sin formato, para el que tiene más control y puede instalar un componente necesario o el marco de trabajo para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f0e97-153">But, traditionally (with no Docker), if you needed other capabilities, frameworks, or dependencies that aren't supported in App Services, you needed to wait for it until the Azure team updates those dependencies in App Service or switched to other services like Service Fabric, Cloud Services, or even plain VMs, for which you have further control and can install a required component or framework for your application.</span></span>

<span data-ttu-id="f0e97-154">Ahora, sin embargo, (anunciadas en Microsoft Connect 2016 en noviembre de 2016) y como se muestra en la figura 4‑4, cuando se usa Visual Studio de 2017, compatibilidad con el contenedor en el servicio de aplicación de Azure ofrece la posibilidad de incluir todo lo que desees en el entorno de aplicación.</span><span class="sxs-lookup"><span data-stu-id="f0e97-154">Now, however, (announced at Microsoft Connect 2016 in November 2016) and as shown in Figure 4‑4, when using Visual Studio 2017, container support in Azure App Service gives you the ability to include whatever you want in your app environment.</span></span> <span data-ttu-id="f0e97-155">Si agrega una dependencia a la aplicación, porque se está ejecutando en un contenedor, obtendrá la capacidad de incluir esas dependencias en la imagen de Dockerfile o Docker.</span><span class="sxs-lookup"><span data-stu-id="f0e97-155">If you added a dependency to your app, because you are running it in a container, you get the capability of including those dependencies in your Dockerfile or Docker image.</span></span>

![](./media/image4.png)

<span data-ttu-id="f0e97-156">Figura 4-4: publicación de un contenedor en servicio de aplicaciones de Azure de contenedores o aplicaciones de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f0e97-156">Figure 4-4: Publishing a container to Azure App Service from Visual Studio apps/containers</span></span>

<span data-ttu-id="f0e97-157">Figura 4-4 también muestra que el flujo de publicación inserta una imagen a través de un registro de contenedor, que puede ser el registro del contenedor de Azure (en un registro de cerca a las implementaciones en Azure y protegido por las cuentas y grupos de Azure Active Directory) o cualquier otro registro de Docker al igual que los registros de Docker Hub o de forma local.</span><span class="sxs-lookup"><span data-stu-id="f0e97-157">Figure 4-4 also shows that the publish flow pushes an image through a Container Registry, which can be the Azure Container Registry (a registry near to your deployments in Azure and secured by Azure Active Directory groups and accounts) or any other Docker Registry like Docker Hub or on-premises registries.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="f0e97-158">[Anterior] (común-contenedor-diseño-principles.md) [siguiente] (state-and-data-in-docker-applications.md)</span><span class="sxs-lookup"><span data-stu-id="f0e97-158">[Previous] (common-container-design-principles.md) [Next] (state-and-data-in-docker-applications.md)</span></span>
