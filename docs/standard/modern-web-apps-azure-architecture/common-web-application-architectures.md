---
title: "Arquitecturas de aplicación web comunes"
description: "Diseñar aplicaciones web modernas con ASP.NET Core y Microsoft Azure | arquitecturas de aplicación web comunes"
author: ardalis
ms.author: wiwagn
ms.date: 10/06/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.openlocfilehash: b6236cfab290211f930d6a1987075abeade4fd6d
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/21/2017
---
#<a name="common-web-application-architectures"></a><span data-ttu-id="b6f64-103">Arquitecturas de aplicación Web comunes</span><span class="sxs-lookup"><span data-stu-id="b6f64-103">Common Web Application Architectures</span></span>

> <span data-ttu-id="b6f64-104">"Si cree de buena arquitectura es caro, intente arquitectura incorrecta".</span><span class="sxs-lookup"><span data-stu-id="b6f64-104">"If you think good architecture is expensive, try bad architecture."</span></span>  
> <span data-ttu-id="b6f64-105">_-Brian PI y Joseph Yoder_</span><span class="sxs-lookup"><span data-stu-id="b6f64-105">_- Brian Foote and Joseph Yoder_</span></span>

## <a name="summary"></a><span data-ttu-id="b6f64-106">Resumen</span><span class="sxs-lookup"><span data-stu-id="b6f64-106">Summary</span></span>

<span data-ttu-id="b6f64-107">Las aplicaciones de .NET más tradicionales se implementan como unidades solo corresponde a un archivo ejecutable o una aplicación web única que se ejecuta dentro de un único dominio de aplicación IIS.</span><span class="sxs-lookup"><span data-stu-id="b6f64-107">Most traditional .NET applications are deployed as single units corresponding to an executable or a single web application running within a single IIS appdomain.</span></span> <span data-ttu-id="b6f64-108">Este es el modelo de implementación más sencillo y actúa muy bien muchas aplicaciones más pequeñas públicas e internas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-108">This is the simplest deployment model and serves many internal and smaller public applications very well.</span></span> <span data-ttu-id="b6f64-109">Sin embargo, incluso con esta unidad única de implementación, mayoría de las aplicaciones de negocio no trivial aprovechar cierta separación lógica en varias capas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-109">However, even given this single unit of deployment, most non-trivial business applications benefit from some logical separation into several layers.</span></span>

## <a name="what-is-a-monolithic-application"></a><span data-ttu-id="b6f64-110">¿Qué es una aplicación monolítica?</span><span class="sxs-lookup"><span data-stu-id="b6f64-110">What is a monolithic application?</span></span>

<span data-ttu-id="b6f64-111">Una aplicación monolítica es aquel que son completamente independientes entre sí, en términos de su comportamiento.</span><span class="sxs-lookup"><span data-stu-id="b6f64-111">A monolithic application is one that is entirely self-contained, in terms of its behavior.</span></span> <span data-ttu-id="b6f64-112">Puede interactuar con otros almacenes de datos o servicios en el transcurso de sus operaciones, pero el núcleo de su comportamiento se ejecuta dentro de su propio proceso y toda la aplicación normalmente se implementa como una sola unidad.</span><span class="sxs-lookup"><span data-stu-id="b6f64-112">It may interact with other services or data stores in the course of performing its operations, but the core of its behavior runs within its own process and the entire application is typically deployed as a single unit.</span></span> <span data-ttu-id="b6f64-113">Si este tipo de aplicación debe escalar horizontalmente, normalmente se duplica toda la aplicación en varios servidores o máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-113">If such an application needs to scale horizontally, typically the entire application is duplicated across multiple servers or virtual machines.</span></span>

## <a name="all-in-one-applications"></a><span data-ttu-id="b6f64-114">Aplicaciones de All-in-One</span><span class="sxs-lookup"><span data-stu-id="b6f64-114">All-in-One applications</span></span>

<span data-ttu-id="b6f64-115">El menor número posible de proyectos para una arquitectura de aplicación es uno.</span><span class="sxs-lookup"><span data-stu-id="b6f64-115">The smallest possible number of projects for an application architecture is one.</span></span> <span data-ttu-id="b6f64-116">En esta arquitectura, toda la lógica de la aplicación está contenida en un solo proyecto, compilada en un único ensamblado e implementada como una sola unidad.</span><span class="sxs-lookup"><span data-stu-id="b6f64-116">In this architecture, the entire logic of the application is contained in a single project, compiled to a single assembly, and deployed as a single unit.</span></span>

<span data-ttu-id="b6f64-117">Un nuevo proyecto de ASP.NET Core, creados en Visual Studio o desde la línea de comandos empieza como un simple monolito "all-in-one".</span><span class="sxs-lookup"><span data-stu-id="b6f64-117">A new ASP.NET Core project, whether created in Visual Studio or from the command line, starts out as a simple "all-in-one" monolith.</span></span> <span data-ttu-id="b6f64-118">Contiene todo el comportamiento de la aplicación, incluida la lógica de acceso de presentación, empresarial y datos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-118">It contains all of the behavior of the application, including presentation, business, and data access logic.</span></span> <span data-ttu-id="b6f64-119">Figura 5-1 muestra la estructura de archivos de aplicación de una solo proyecto.</span><span class="sxs-lookup"><span data-stu-id="b6f64-119">Figure 5-1 shows the file structure of a single-project app.</span></span>

<span data-ttu-id="b6f64-120">**Figura 5-1.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-120">**Figure 5-1.**</span></span> <span data-ttu-id="b6f64-121">Un único proyecto de aplicación de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="b6f64-121">A single project ASP.NET Core app</span></span>

![](./media/image5-1.png)

<span data-ttu-id="b6f64-122">En un escenario de proyecto único, la separación de intereses se logra mediante el uso de carpetas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-122">In a single project scenario, separation of concerns is achieved through the use of folders.</span></span> <span data-ttu-id="b6f64-123">La plantilla predeterminada incluye carpetas independientes para las responsabilidades de patrón MVC de modelos, vistas y controladores, así como las carpetas adicionales para los datos y servicios.</span><span class="sxs-lookup"><span data-stu-id="b6f64-123">The default template includes separate folders for MVC pattern responsibilities of Models, Views, and Controllers, as well as additional folders for Data and Services.</span></span> <span data-ttu-id="b6f64-124">En esta disposición, detalles de presentación deben estar limitados tanto como sea posible a la carpeta Views y detalles de implementación de acceso a datos deben limitarse a las clases que se mantiene en la carpeta de datos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-124">In this arrangement, presentation details should be limited as much as possible to the Views folder, and data access implementation details should be limited to classes kept in the Data folder.</span></span> <span data-ttu-id="b6f64-125">Lógica de negocios debe residir en servicios y las clases dentro de la carpeta de modelos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-125">Business logic should reside in services and classes within the Models folder.</span></span>

<span data-ttu-id="b6f64-126">Aunque es simple, la solución monolítica solo proyecto tiene algunas desventajas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-126">Although simple, the single-project monolithic solution has some disadvantages.</span></span> <span data-ttu-id="b6f64-127">A medida que aumenta el tamaño y la complejidad del proyecto, el número de archivos y carpetas continuará creciendo así.</span><span class="sxs-lookup"><span data-stu-id="b6f64-127">As the project's size and complexity grows, the number of files and folders will continue to grow as well.</span></span> <span data-ttu-id="b6f64-128">Problemas de la interfaz de usuario (modelos, vistas, controladores) residen en varias carpetas, que no están agrupadas juntos alfabéticamente.</span><span class="sxs-lookup"><span data-stu-id="b6f64-128">UI concerns (models, views, controllers) reside in multiple folders, which are not grouped together alphabetically.</span></span> <span data-ttu-id="b6f64-129">Este problema solo empeora cuando se agregan las estructuras de nivel de interfaz de usuario adicionales, como los filtros o ModelBinders, en sus propias carpetas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-129">This issue only gets worse when additional UI-level constructs, such as Filters or ModelBinders, are added in their own folders.</span></span> <span data-ttu-id="b6f64-130">Lógica de negocios está repartida entre las carpetas de modelos y servicios, y no hay ninguna indicación clara de que las clases en las carpetas que deben dependen de otros.</span><span class="sxs-lookup"><span data-stu-id="b6f64-130">Business logic is scattered between the Models and Services folders, and there is no clear indication of which classes in which folders should depend on which others.</span></span> <span data-ttu-id="b6f64-131">Esta falta de organización en el nivel de proyecto suele dar lugar a [código spaghetti](http://deviq.com/spaghetti-code/).</span><span class="sxs-lookup"><span data-stu-id="b6f64-131">This lack of organization at the project level frequently leads to [spaghetti code](http://deviq.com/spaghetti-code/).</span></span>

<span data-ttu-id="b6f64-132">Para resolver estos problemas, las aplicaciones evolucionan a menudo en soluciones de varios proyectos, donde se considera cada proyecto que resida en un determinado *capa* de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-132">In order to address these issues, applications often evolve into multi-project solutions, where each project is considered to reside in a particular *layer* of the application.</span></span>

## <a name="what-are-layers"></a><span data-ttu-id="b6f64-133">¿Cuáles son las capas?</span><span class="sxs-lookup"><span data-stu-id="b6f64-133">What are layers?</span></span>

<span data-ttu-id="b6f64-134">Cuando las aplicaciones crezcan en complejidad, una manera de administrar esta complejidad es dividir la aplicación según sus responsabilidades o necesita aclaraciones.</span><span class="sxs-lookup"><span data-stu-id="b6f64-134">As applications grow in complexity, one way to manage that complexity is to break the application up according to its responsibilities or concerns.</span></span> <span data-ttu-id="b6f64-135">Esto sigue la separación de entidad de seguridad de las preocupaciones y puede ayudar a mantener un código base creciente organizado de forma que los desarrolladores pueden encontrar fácilmente donde se implementa una funcionalidad determinada.</span><span class="sxs-lookup"><span data-stu-id="b6f64-135">This follows the separation of concerns principle, and can help keep a growing codebase organized so that developers can easily find where certain functionality is implemented.</span></span> <span data-ttu-id="b6f64-136">Arquitectura por niveles ofrece una serie de ventajas más allá de simplemente organización del código, aunque.</span><span class="sxs-lookup"><span data-stu-id="b6f64-136">Layered architecture offers a number of advantages beyond just code organization, though.</span></span>

<span data-ttu-id="b6f64-137">Organizan código en capas, se puede reutilizar la funcionalidad común de bajo nivel a lo largo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-137">By organizing code into layers, common low-level functionality can be reused throughout the application.</span></span> <span data-ttu-id="b6f64-138">Volver a utilizar este es beneficioso significa que menos código deba escribir y que puede permitir que la aplicación normalizar en una sola implementación, sigue el principio seco.</span><span class="sxs-lookup"><span data-stu-id="b6f64-138">This reuse is beneficial because it means less code needs to be written and because it can allow the application to standardize on a single implementation, following the DRY principle.</span></span>

<span data-ttu-id="b6f64-139">Con una arquitectura en capas, las aplicaciones pueden exigir restricciones en el que las capas pueden comunicarse con otras capas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-139">With a layered architecture, applications can enforce restrictions on which layers can communicate with other layers.</span></span> <span data-ttu-id="b6f64-140">Esto ayuda a lograr encapsulación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-140">This helps to achieve encapsulation.</span></span> <span data-ttu-id="b6f64-141">Cuando se cambia o reemplaza una capa, deberían verse afectadas únicamente aquellas capas que funcionan con él.</span><span class="sxs-lookup"><span data-stu-id="b6f64-141">When a layer is changed or replaced, only those layers that work with it should be impacted.</span></span> <span data-ttu-id="b6f64-142">Mediante la limitación de que dependen de capas en el que se pueden mitigar otras capas, el impacto de los cambios para que un solo cambio no afecta a toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-142">By limiting which layers depend on which other layers, the impact of changes can be mitigated so that a single change doesn't impact the entire application.</span></span>

<span data-ttu-id="b6f64-143">Capas (y encapsulación) sea mucho más fácil reemplazar la funcionalidad dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-143">Layers (and encapsulation) make it much easier to replace functionality within the application.</span></span> <span data-ttu-id="b6f64-144">Por ejemplo, una aplicación inicialmente puede usar su propia base de datos de SQL Server para la persistencia, pero más adelante podría optar por usar una estrategia de persistencia en la nube, o uno detrás de una API web.</span><span class="sxs-lookup"><span data-stu-id="b6f64-144">For example, an application might initially use its own SQL Server database for persistence, but later could choose to use a cloud-based persistence strategy, or one behind a web API.</span></span> <span data-ttu-id="b6f64-145">Si la aplicación ha encapsulado correctamente su implementación de persistencia dentro de una capa lógica, esa capa específica de SQL Server puede sustituirse por una nueva implementación de la misma interfaz pública.</span><span class="sxs-lookup"><span data-stu-id="b6f64-145">If the application has properly encapsulated its persistence implementation within a logical layer, that SQL Server specific layer could be replaced by a new one implementing the same public interface.</span></span>

<span data-ttu-id="b6f64-146">Además de la posibilidad de intercambio de las implementaciones en respuesta a cambios futuros en los requisitos, niveles de la aplicación también facilitan intercambiar las implementaciones con fines de prueba.</span><span class="sxs-lookup"><span data-stu-id="b6f64-146">In addition to the potential of swapping out implementations in response to future changes in requirements, application layers can also make it easier to swap out implementations for testing purposes.</span></span> <span data-ttu-id="b6f64-147">En lugar de tener que escribir las pruebas que funcionan en la capa de datos reales o de la capa de interfaz de usuario de la aplicación, estos niveles pueden reemplazarse en tiempo de prueba con implementaciones falsas que proporcionan conocidas respuestas a las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="b6f64-147">Instead of having to write tests that operate against the real data layer or UI layer of the application, these layers can be replaced at test time with fake implementations that provide known responses to requests.</span></span> <span data-ttu-id="b6f64-148">Esto normalmente hace que las pruebas son mucho más fáciles de escribir y mucho más rápido en comparación con la duración de ejecución comprueba de nuevo infraestructura real de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-148">This typically makes tests much easier to write and much faster to run when compared to running tests again the application's real infrastructure.</span></span>

<span data-ttu-id="b6f64-149">Capas lógicas son una técnica común para mejorar la organización del código en las aplicaciones de software de empresa, y hay varias formas en el que se puede organizar el código en capas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-149">Logical layering is a common technique for improving the organization of code in enterprise software applications, and there are several ways in which code can be organized into layers.</span></span>

> [!NOTE]
> <span data-ttu-id="b6f64-150">*Capas* representan una separación lógica dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-150">*Layers* represent logical separation within the application.</span></span> <span data-ttu-id="b6f64-151">En caso de que la lógica de la aplicación se distribuye físicamente para servidores o procesos independientes, estos destinos de implementación física independiente se conocen como *niveles*.</span><span class="sxs-lookup"><span data-stu-id="b6f64-151">In the event that application logic is physically distributed to separate servers or processes, these separate physical deployment targets are referred to as *tiers*.</span></span> <span data-ttu-id="b6f64-152">Es posible y es bastante habitual, que tiene una aplicación de N capas que se implementa en un solo nivel.</span><span class="sxs-lookup"><span data-stu-id="b6f64-152">It's possible, and quite common, to have an N-Layer application that is deployed to a single tier.</span></span>

## <a name="traditional-n-layer-architecture-applications"></a><span data-ttu-id="b6f64-153">Aplicaciones tradicionales de arquitectura de "Nivel N"</span><span class="sxs-lookup"><span data-stu-id="b6f64-153">Traditional "N-Layer" architecture applications</span></span>

<span data-ttu-id="b6f64-154">La organización más comunes de lógica de la aplicación en niveles que se muestra en la figura 5-2.</span><span class="sxs-lookup"><span data-stu-id="b6f64-154">The most common organization of application logic into layers it shown in Figure 5-2.</span></span>

<span data-ttu-id="b6f64-155">**Figura 5-2.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-155">**Figure 5-2.**</span></span> <span data-ttu-id="b6f64-156">Capas de aplicación típica.</span><span class="sxs-lookup"><span data-stu-id="b6f64-156">Typical application layers.</span></span>

![](./media/image5-2.png)

<span data-ttu-id="b6f64-157">Estas capas con frecuencia se abrevia como interfaz de usuario, BLL (capa de lógica de negocios) y la capa DAL (capa de acceso a datos).</span><span class="sxs-lookup"><span data-stu-id="b6f64-157">These layers are frequently abbreviated as UI, BLL (Business Logic Layer), and DAL (Data Access Layer).</span></span> <span data-ttu-id="b6f64-158">Con esta arquitectura, los usuarios realizan solicitudes a través de la capa de interfaz de usuario, que interactúa con la capa BLL.</span><span class="sxs-lookup"><span data-stu-id="b6f64-158">Using this architecture, users make requests through the UI layer, which interacts only with the BLL.</span></span> <span data-ttu-id="b6f64-159">BLL, a su vez, puede llamar a la capa DAL para las solicitudes de acceso de datos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-159">The BLL, in turn, can call the DAL for data access requests.</span></span> <span data-ttu-id="b6f64-160">La capa de interfaz de usuario no debe realizar las solicitudes a la capa DAL directamente, ni debe interactuar con persistencia directamente a través de otros medios.</span><span class="sxs-lookup"><span data-stu-id="b6f64-160">The UI layer should not make any requests to the DAL directly, nor should it interact with persistence directly through other means.</span></span> <span data-ttu-id="b6f64-161">Del mismo modo, la capa BLL solo debe interactuar con persistencia yendo a través de la capa DAL.</span><span class="sxs-lookup"><span data-stu-id="b6f64-161">Likewise, the BLL should only interact with persistence by going through the DAL.</span></span> <span data-ttu-id="b6f64-162">De este modo, cada nivel tiene su propia responsabilidad conocido.</span><span class="sxs-lookup"><span data-stu-id="b6f64-162">In this way, each layer has its own well-known responsibility.</span></span>

<span data-ttu-id="b6f64-163">Una desventaja de este enfoque de distribución en capas tradicional es que las dependencias de tiempo de compilación se ejecutan desde la parte superior a la parte inferior.</span><span class="sxs-lookup"><span data-stu-id="b6f64-163">One disadvantage of this traditional layering approach is that compile-time dependencies run from the top to the bottom.</span></span> <span data-ttu-id="b6f64-164">Es decir, la capa de interfaz de usuario depende de la capa BLL, que depende de la capa DAL.</span><span class="sxs-lookup"><span data-stu-id="b6f64-164">That is, the UI layer depends on the BLL, which depends on the DAL.</span></span> <span data-ttu-id="b6f64-165">Esto significa que la capa BLL, que normalmente contiene la lógica más importante en la aplicación, es dependiente en detalles de implementación de acceso a datos (y a menudo en la existencia de una base de datos).</span><span class="sxs-lookup"><span data-stu-id="b6f64-165">This means that the BLL, which usually holds the most important logic in the application, is dependent on data access implementation details (and often on the existence of a database).</span></span> <span data-ttu-id="b6f64-166">Probar la lógica de negocios en una arquitectura tan a menudo es difícil, que requieren una base de datos de prueba.</span><span class="sxs-lookup"><span data-stu-id="b6f64-166">Testing business logic in such an architecture is often difficult, requiring a test database.</span></span> <span data-ttu-id="b6f64-167">El principio de la inversión de dependencia puede utilizarse para resolver este problema, como verá en la siguiente sección.</span><span class="sxs-lookup"><span data-stu-id="b6f64-167">The dependency inversion principle can be used to address this issue, as you'll see in the next section.</span></span>

<span data-ttu-id="b6f64-168">Figura 5-3 muestra una solución de ejemplo, dividir la aplicación en tres proyectos responsabilidad (o capa).</span><span class="sxs-lookup"><span data-stu-id="b6f64-168">Figure 5-3 shows an example solution, breaking the application into three projects by responsibility (or layer).</span></span>

<span data-ttu-id="b6f64-169">**Figura 5-3.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-169">**Figure 5-3.**</span></span> <span data-ttu-id="b6f64-170">Una aplicación sencilla monolítica con tres proyectos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-170">A simple monolithic application with three projects.</span></span>

![](./media/image5-3.png)

<span data-ttu-id="b6f64-171">Aunque esta aplicación usa varios proyectos por motivos organizativos, todavía se implementa como una sola unidad y sus clientes interactúan con ella como una aplicación web solo.</span><span class="sxs-lookup"><span data-stu-id="b6f64-171">Although this application uses several projects for organizational purposes, it is still deployed as a single unit and its clients will interact with it as a single web app.</span></span> <span data-ttu-id="b6f64-172">Esto permite que el proceso de implementación muy simple.</span><span class="sxs-lookup"><span data-stu-id="b6f64-172">This allows for very simple deployment process.</span></span> <span data-ttu-id="b6f64-173">Figura 5-4 se muestra cómo podría ser dicha aplicación hospeda mediante Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="b6f64-173">Figure 5-4 shows how such an app might be hosted using Windows Azure.</span></span>

![](./media/image5-4.png)

<span data-ttu-id="b6f64-174">**Figura 5-4.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-174">**Figure 5-4.**</span></span> <span data-ttu-id="b6f64-175">Implementación simple de aplicación Web de Azure</span><span class="sxs-lookup"><span data-stu-id="b6f64-175">Simple deployment of Azure Web App</span></span>

<span data-ttu-id="b6f64-176">Como aplicación crezca, soluciones de implementación más sólida y complejo pueden ser necesarias.</span><span class="sxs-lookup"><span data-stu-id="b6f64-176">As application needs grow, more complex and robust deployment solutions may be required.</span></span> <span data-ttu-id="b6f64-177">Figura 5-5 se muestra un ejemplo de un plan de implementación más complejo que admite capacidades adicionales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-177">Figure 5-5 shows an example of a more complex deployment plan that supports additional capabilities.</span></span>

![](./media/image5-5.png)

<span data-ttu-id="b6f64-178">**Figura 5-5.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-178">**Figure 5-5.**</span></span> <span data-ttu-id="b6f64-179">Implementar una aplicación web a un servicio de aplicación de Azure</span><span class="sxs-lookup"><span data-stu-id="b6f64-179">Deploying a web app to an Azure App Service</span></span>

<span data-ttu-id="b6f64-180">Internamente, organización de este proyecto en varios proyectos en función de responsabilidad mejora la facilidad de mantenimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-180">Internally, this project's organization into multiple projects based on responsibility improves the maintainability of the application.</span></span>

<span data-ttu-id="b6f64-181">Esta unidad se puede escalar vertical u horizontalmente para aprovechar las ventajas de escalabilidad de petición basada en la nube.</span><span class="sxs-lookup"><span data-stu-id="b6f64-181">This unit can be scaled up or out to take advantage of cloud-based on-demand scalability.</span></span> <span data-ttu-id="b6f64-182">El escalado significa agregar más CPU, memoria, espacio en disco u otros recursos en el servidor que hospeda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-182">Scaling up means adding additional CPU, memory, disk space, or other resources to the server(s) hosting your app.</span></span> <span data-ttu-id="b6f64-183">Escalado horizontal significa agregar instancias adicionales de este tipo de servidores, si se trata de servidores físicos o máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-183">Scaling out means adding additional instances of such servers, whether these are physical servers or virtual machines.</span></span> <span data-ttu-id="b6f64-184">Cuando la aplicación se hospeda en varias instancias, se utiliza un equilibrador de carga para asignar solicitudes a instancias de aplicaciones individuales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-184">When your app is hosted across multiple instances, a load balancer is used to assign requests to individual app instances.</span></span>

<span data-ttu-id="b6f64-185">El enfoque más sencillo a la escala de una aplicación web en Azure consiste en configurar manualmente el ajuste de escala en el Plan de servicio de aplicaciones de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-185">The simplest approach to scaling a web application in Azure is to configure scaling manually in the application's App Service Plan.</span></span> <span data-ttu-id="b6f64-186">Figura 5-6 se muestra la pantalla de panel de Azure adecuada para configurar el número de instancias prestan servicio a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-186">Figure 5-6 show the appropriate Azure dashboard screen to configure how many instances are serving an app.</span></span>

![](./media/image5-6.png)

<span data-ttu-id="b6f64-187">**Figura 5-6.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-187">**Figure 5-6.**</span></span> <span data-ttu-id="b6f64-188">Plan de servicio de aplicación escala en Azure.</span><span class="sxs-lookup"><span data-stu-id="b6f64-188">App Service Plan scaling in Azure.</span></span>

## <a name="clean-architecture"></a><span data-ttu-id="b6f64-189">Arquitectura de limpieza</span><span class="sxs-lookup"><span data-stu-id="b6f64-189">Clean architecture</span></span>

<span data-ttu-id="b6f64-190">Las aplicaciones que siguen el principio de la inversión de dependencia, así como los principios de diseño de Domain-Driven (DDD) tienden a llegar a una arquitectura similar.</span><span class="sxs-lookup"><span data-stu-id="b6f64-190">Applications that follow the Dependency Inversion Principle as well as Domain-Driven Design (DDD) principles tend to arrive at a similar architecture.</span></span> <span data-ttu-id="b6f64-191">Esta arquitectura ha pasado por muchos nombres durante los años.</span><span class="sxs-lookup"><span data-stu-id="b6f64-191">This architecture has gone by many names over the years.</span></span> <span data-ttu-id="b6f64-192">Uno de los nombres era Hexagonal arquitectura, seguido de adaptadores y puertos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-192">One of the first names was Hexagonal Architecture, followed by Ports-and-Adapters.</span></span> <span data-ttu-id="b6f64-193">Más recientemente, ha citado como el [cebolla arquitectura](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) o [arquitectura limpia](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span><span class="sxs-lookup"><span data-stu-id="b6f64-193">More recently, it's been cited as the [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) or [Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span></span> <span data-ttu-id="b6f64-194">Es el apellido, arquitectura limpia, que se usa como base para describir la arquitectura de este libro electrónico.</span><span class="sxs-lookup"><span data-stu-id="b6f64-194">It is this last name, Clean Architecture, that is used as the basis for describing the architecture in this e-book.</span></span>

> [!NOTE]
> <span data-ttu-id="b6f64-195">El término que limpia arquitectura puede aplicarse a las aplicaciones que se compilan con DDD principios así como para los que no se compilan con DDD.</span><span class="sxs-lookup"><span data-stu-id="b6f64-195">The term Clean Architecture can be applied to applications that are built using DDD Principles as well as to those that are not built using DDD.</span></span> <span data-ttu-id="b6f64-196">En el caso de la primera, esta combinación puede puede denominarse "Arquitectura DDD limpia".</span><span class="sxs-lookup"><span data-stu-id="b6f64-196">In the case of the former, this combination may be referred to as "Clean DDD Architecture".</span></span>

<span data-ttu-id="b6f64-197">Arquitectura limpia coloca el modelo de lógica y aplicación de negocios en el centro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-197">Clean architecture puts the business logic and application model at the center of the application.</span></span> <span data-ttu-id="b6f64-198">En lugar de tener lógica de negocios dependen de otros problemas de infraestructura o de acceso a datos, se invierte esta dependencia: detalles de infraestructura e implementación dependen el núcleo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-198">Instead of having business logic depend on data access or other infrastructure concerns, this dependency is inverted: infrastructure and implementation details depend on the Application Core.</span></span> <span data-ttu-id="b6f64-199">Esto se logra mediante la definición de abstracciones u otras interfaces, en el núcleo de la aplicación, que, a continuación, se implementan mediante tipos definidos en el nivel de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-199">This is achieved by defining abstractions, or interfaces, in the Application Core, which are then implemented by types defined in the Infrastructure layer.</span></span> <span data-ttu-id="b6f64-200">Una forma habitual de visualizar esta arquitectura es usar una serie de círculos concéntricos, similares a una cebolla.</span><span class="sxs-lookup"><span data-stu-id="b6f64-200">A common way of visualizing this architecture is to use a series of concentric circles, similar to an onion.</span></span> <span data-ttu-id="b6f64-201">Figura 5-X muestra un ejemplo de este tipo de representación en forma de arquitectura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-201">Figure 5-X shows an example of this style of architectural representation.</span></span>

![](./media/image5-7.png)

<span data-ttu-id="b6f64-202">**Figura 5-7.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-202">**Figure 5-7.**</span></span> <span data-ttu-id="b6f64-203">Arquitectura limpia; vista de cebolla</span><span class="sxs-lookup"><span data-stu-id="b6f64-203">Clean Architecture; onion view</span></span>

<span data-ttu-id="b6f64-204">En este diagrama de flujo de dependencias hacia el círculo más interno.</span><span class="sxs-lookup"><span data-stu-id="b6f64-204">In this diagram, dependencies flow toward the innermost circle.</span></span> <span data-ttu-id="b6f64-205">Por lo tanto, puede ver que el núcleo de la aplicación (que toma su nombre de su posición en el núcleo de este diagrama) no tiene dependencias en otros niveles de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-205">Thus, you can see that the Application Core (which takes its name from its position at the core of this diagram) has no dependencies on other application layers.</span></span> <span data-ttu-id="b6f64-206">En el centro de muy son entidades e interfaces de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-206">At the very center are the application's entities and interfaces.</span></span> <span data-ttu-id="b6f64-207">Justo fuera, pero todavía en el núcleo de la aplicación, son servicios de dominio, que normalmente se implementan interfaces definidas en el círculo interior.</span><span class="sxs-lookup"><span data-stu-id="b6f64-207">Just outside, but still in the Application Core, are domain services, which typically implement interfaces defined in the inner circle.</span></span> <span data-ttu-id="b6f64-208">El núcleo de la aplicación fuera de la interfaz de usuario y las capas de infraestructura dependen de en el núcleo de la aplicación, pero no en otros (necesariamente).</span><span class="sxs-lookup"><span data-stu-id="b6f64-208">Outside of the Application Core, both the User Interface and the Infrastructure layers depend on the Application Core, but not on one another (necessarily).</span></span>

<span data-ttu-id="b6f64-209">Figura 5-X muestra un diagrama de capas horizontal más tradicional que refleja mejor la dependencia entre la interfaz de usuario y otras capas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-209">Figure 5-X shows a more traditional horizontal layer diagram that better reflects the dependency between the UI and other layers.</span></span>

![](./media/image5-8.png)

<span data-ttu-id="b6f64-210">**Figura 5-8.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-210">**Figure 5-8.**</span></span> <span data-ttu-id="b6f64-211">Arquitectura limpia; vista de nivel horizontal</span><span class="sxs-lookup"><span data-stu-id="b6f64-211">Clean Architecture; horizontal layer view</span></span>

<span data-ttu-id="b6f64-212">Tenga en cuenta que las flechas sólidas representan las dependencias de tiempo de compilación, mientras que la flecha discontinua representa una dependencia de solo en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="b6f64-212">Note that the solid arrows represent compile-time dependencies, while the dashed arrow represents a runtime-only dependency.</span></span> <span data-ttu-id="b6f64-213">Uso de la arquitectura limpia, la capa de interfaz de usuario funciona con interfaces definidas en el núcleo de la aplicación en tiempo de compilación y lo ideal es que debe no tener ningún conocimiento de los tipos de implementación definidos en el nivel de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-213">Using the clean architecture, the UI layer works with interfaces defined in the Application Core at compile time, and ideally should not have any knowledge of the implementation types defined in the Infrastructure layer.</span></span> <span data-ttu-id="b6f64-214">En tiempo de ejecución, sin embargo, estos tipos de implementación será necesarios para la aplicación para su ejecución, por lo que deberá estar presente y conectado las interfaces principales de la aplicación a través de la inyección de dependencia.</span><span class="sxs-lookup"><span data-stu-id="b6f64-214">At runtime, however, these implementation types will be required for the app to execute, so they will need to be present and wired up to the Application Core interfaces via dependency injection.</span></span>

<span data-ttu-id="b6f64-215">Figura 5-9 se muestra una vista más detallada de la arquitectura de la aplicación ASP.NET Core cuando compila siguiendo estas recomendaciones.</span><span class="sxs-lookup"><span data-stu-id="b6f64-215">Figure 5-9 shows a more detailed view of an ASP.NET Core application's architecture when built following these recommendations.</span></span>

![Arquitectura ASPNET principal](./media/image5-9.png)

<span data-ttu-id="b6f64-217">**Figura 5-9.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-217">**Figure 5-9.**</span></span> <span data-ttu-id="b6f64-218">Diagrama de arquitectura de ASP.NET Core después arquitectura limpia.</span><span class="sxs-lookup"><span data-stu-id="b6f64-218">ASP.NET Core architecture diagram following Clean Architecture.</span></span>

<span data-ttu-id="b6f64-219">Dado que el núcleo de la aplicación no depende de infraestructura, es muy fácil de escribir pruebas unitarias automatizadas para esta capa.</span><span class="sxs-lookup"><span data-stu-id="b6f64-219">Because the Application Core doesn't depend on Infrastructure, it is very easy to write automated unit tests for this layer.</span></span> <span data-ttu-id="b6f64-220">Cifras de entre 5 y 10 y 11 de 5 muestran cómo encajan las pruebas en esta arquitectura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-220">Figures 5-10 and 5-11 show how tests fit into this architecture.</span></span>

![UnitTestCore](./media/image5-10.png)

<span data-ttu-id="b6f64-222">**Figura 5-10.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-222">**Figure 5-10.**</span></span> <span data-ttu-id="b6f64-223">Pruebas unitarias de núcleo de la aplicación de forma aislada.</span><span class="sxs-lookup"><span data-stu-id="b6f64-223">Unit testing Application Core in isolation.</span></span>

![IntegrationTests](./media/image5-11.png)

<span data-ttu-id="b6f64-225">**Figura 5-11.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-225">**Figure 5-11.**</span></span> <span data-ttu-id="b6f64-226">Las implementaciones de infraestructura con dependencias externas de pruebas de integración.</span><span class="sxs-lookup"><span data-stu-id="b6f64-226">Integration testing Infrastructure implementations with external dependencies.</span></span>

<span data-ttu-id="b6f64-227">Puesto que la capa de interfaz de usuario no tiene ninguna dependencia directa en tipos definidos en el proyecto de infraestructura, del mismo modo es muy fácil intercambiar las implementaciones, ya sea para facilitar la prueba o en respuesta a los cambiantes requerimientos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-227">Since the UI layer doesn't have any direct dependency on types defined in the Infrastructure project, it is likewise very easy to swap out implementations, either to facilitate testing or in response to changing application requirements.</span></span> <span data-ttu-id="b6f64-228">Uso integrada de ASP.NET Core y la compatibilidad con inserción de dependencias hace que esta arquitectura de la forma más adecuada para estructurar aplicaciones monolítico no trivial.</span><span class="sxs-lookup"><span data-stu-id="b6f64-228">ASP.NET Core's built-in use of and support for dependency injection makes this architecture the most appropriate way to structure non-trivial monolithic applications.</span></span>

<span data-ttu-id="b6f64-229">Para las aplicaciones monolíticas los proyectos de aplicación principal, la infraestructura y la interfaz de usuario se ejecutan como una sola aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-229">For monolithic applications the Application Core, Infrastructure, and User Interface projects are all run as a single application.</span></span> <span data-ttu-id="b6f64-230">La arquitectura de la aplicación en tiempo de ejecución podría ser algo como la figura 5-12.</span><span class="sxs-lookup"><span data-stu-id="b6f64-230">The runtime application architecture might look something like Figure 5-12.</span></span>

![Arquitectura de núcleo ASPNET 2](./media/image5-12.png)

<span data-ttu-id="b6f64-232">**Figura 5-12.**</span><span class="sxs-lookup"><span data-stu-id="b6f64-232">**Figure 5-12.**</span></span> <span data-ttu-id="b6f64-233">Arquitectura en tiempo de ejecución de la aplicación de ASP.NET Core de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="b6f64-233">A sample ASP.NET Core app's runtime architecture.</span></span>

### <a name="organizing-code-in-clean-architecture"></a><span data-ttu-id="b6f64-234">Organizar el código en la arquitectura limpia</span><span class="sxs-lookup"><span data-stu-id="b6f64-234">Organizing Code in Clean Architecture</span></span>

<span data-ttu-id="b6f64-235">En una solución de arquitectura limpia, cada proyecto tiene responsabilidades claras.</span><span class="sxs-lookup"><span data-stu-id="b6f64-235">In a Clean Architecture solution, each project has clear responsibilities.</span></span> <span data-ttu-id="b6f64-236">Por lo tanto, ciertos tipos pertenecerá en cada proyecto y con frecuencia encontrará las carpetas correspondientes a estos tipos en el proyecto adecuado.</span><span class="sxs-lookup"><span data-stu-id="b6f64-236">As such, certain types will belong in each project and you'll frequently find folders corresponding to these types in the appropriate project.</span></span>

<span data-ttu-id="b6f64-237">El núcleo de la aplicación contiene el modelo de negocio, que incluye las entidades, servicios e interfaces.</span><span class="sxs-lookup"><span data-stu-id="b6f64-237">The Application Core holds the business model, which includes entities, services, and interfaces.</span></span> <span data-ttu-id="b6f64-238">Estas interfaces incluyen abstracciones para las operaciones que se llevará a cabo mediante la infraestructura, como el acceso de datos, acceso al sistema de archivos, llamadas de red, etcetera. A veces será necesario servicios o interfaces definidas en este nivel trabajar con tipos sin entidad que no tienen ninguna dependencia en la interfaz de usuario o de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-238">These interfaces include abstractions for operations that will be performed using Infrastructure, such as data access, file system access, network calls, etc. Sometimes services or interfaces defined at this layer will need to work with non-entity types that have no dependencies on UI or Infrastructure.</span></span> <span data-ttu-id="b6f64-239">Estos se pueden definir como objetos simple de transferencia de datos (dto).</span><span class="sxs-lookup"><span data-stu-id="b6f64-239">These can be defined as simple Data Transfer Objects (DTOs).</span></span>

> ### <a name="application-core-types"></a><span data-ttu-id="b6f64-240">Tipos de aplicaciones principales</span><span class="sxs-lookup"><span data-stu-id="b6f64-240">Application Core Types</span></span>
> -   <span data-ttu-id="b6f64-241">Entidades (se conservan las clases de modelo de negocio)</span><span class="sxs-lookup"><span data-stu-id="b6f64-241">Entities (business model classes that are persisted)</span></span>
> -   <span data-ttu-id="b6f64-242">Interfaces</span><span class="sxs-lookup"><span data-stu-id="b6f64-242">Interfaces</span></span>
> -   <span data-ttu-id="b6f64-243">Servicios</span><span class="sxs-lookup"><span data-stu-id="b6f64-243">Services</span></span>
> -   <span data-ttu-id="b6f64-244">Dto</span><span class="sxs-lookup"><span data-stu-id="b6f64-244">DTOs</span></span>

<span data-ttu-id="b6f64-245">El proyecto de infraestructura incluirá, normalmente, las implementaciones de acceso de datos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-245">The Infrastructure project will typically include data access implementations.</span></span> <span data-ttu-id="b6f64-246">En una aplicación web de ASP.NET Core típica, esto incluye DbContext Entity Framework, las migraciones de EF principales que se han definido y las clases de implementación de acceso a datos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-246">In a typical ASP.NET Core web application, this will include the Entity Framework DbContext, any EF Core Migrations that have been defined, and data access implementation classes.</span></span> <span data-ttu-id="b6f64-247">Es la manera más común para abstraer el código de implementación de acceso a datos mediante el uso de la [modelo de diseño de repositorio](http://deviq.com/repository-pattern/).</span><span class="sxs-lookup"><span data-stu-id="b6f64-247">The most common way to abstract data access implementation code is through the use of the [Repository design pattern](http://deviq.com/repository-pattern/).</span></span>

<span data-ttu-id="b6f64-248">Además de las implementaciones de acceso de datos, el proyecto de infraestructura debe contener las implementaciones de servicios que deben interactuar con problemas de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-248">In addition to data access implementations, the Infrastructure project should contain implementations of services that must interact with infrastructure concerns.</span></span> <span data-ttu-id="b6f64-249">Estos servicios deben implementar interfaces definidas en el núcleo de la aplicación y, por lo que la infraestructura debe tener una referencia al proyecto de aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="b6f64-249">These services should implement interfaces defined in the Application Core, and so Infrastructure should have a reference to the Application Core project.</span></span>

> ### <a name="infrastructure-types"></a><span data-ttu-id="b6f64-250">Tipos de infraestructura</span><span class="sxs-lookup"><span data-stu-id="b6f64-250">Infrastructure Types</span></span>
> -   <span data-ttu-id="b6f64-251">Tipos principales EF (DbContext, migraciones)</span><span class="sxs-lookup"><span data-stu-id="b6f64-251">EF Core types (DbContext, Migrations)</span></span>
> -   <span data-ttu-id="b6f64-252">Tipos de implementación de acceso de datos (repositorios)</span><span class="sxs-lookup"><span data-stu-id="b6f64-252">Data access implementation types (Repositories)</span></span>
> -   <span data-ttu-id="b6f64-253">Servicios de infraestructura específicos (FileLogger, SmtpNotifier, etcetera.)</span><span class="sxs-lookup"><span data-stu-id="b6f64-253">Infrastructure-specific services (FileLogger, SmtpNotifier, etc.)</span></span>

<span data-ttu-id="b6f64-254">La capa de interfaz de usuario en una aplicación MVC de ASP.NET Core será el punto de entrada para la aplicación y será un proyecto de MVC de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="b6f64-254">The user interface layer in an ASP.NET Core MVC application will be the entry point for the application, and will be an ASP.NET Core MVC project.</span></span> <span data-ttu-id="b6f64-255">Este proyecto debe hacer referencia al proyecto de aplicación principal y sus tipos deben interactuar con la infraestructura estrictamente a través de interfaces definidas en el núcleo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-255">This project should reference the Application Core project, and its types should interact with infrastructure strictly through interfaces defined in Application Core.</span></span> <span data-ttu-id="b6f64-256">Ninguna creación directa de instancias de (o estáticas llamadas a) en la capa de interfaz de usuario se le deberían permitir tipos de capa de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-256">No direct instantiation of (or static calls to) Infrastructure layer types should be permitted in the UI layer.</span></span>

> ### <a name="ui-layer-types"></a><span data-ttu-id="b6f64-257">Tipos de la capa de interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="b6f64-257">UI Layer Types</span></span>
> -   <span data-ttu-id="b6f64-258">Controladores</span><span class="sxs-lookup"><span data-stu-id="b6f64-258">Controllers</span></span>
> -   <span data-ttu-id="b6f64-259">Filtros</span><span class="sxs-lookup"><span data-stu-id="b6f64-259">Filters</span></span>
> -   <span data-ttu-id="b6f64-260">Vistas</span><span class="sxs-lookup"><span data-stu-id="b6f64-260">Views</span></span>
> -   <span data-ttu-id="b6f64-261">ViewModels</span><span class="sxs-lookup"><span data-stu-id="b6f64-261">ViewModels</span></span>
> -   <span data-ttu-id="b6f64-262">Inicio</span><span class="sxs-lookup"><span data-stu-id="b6f64-262">Startup</span></span>

<span data-ttu-id="b6f64-263">La clase de inicio es responsable de configurar la aplicación y para la conexión de los tipos de implementación a las interfaces, lo que permite la inserción de dependencias para que funcione correctamente en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="b6f64-263">The Startup class is responsible for configuring the application, and for wiring up implementation types to interfaces, allowing dependency injection to work properly at run time.</span></span>

> [!NOTE]
> <span data-ttu-id="b6f64-264">Para conectarlo inyección de dependencia en ConfigureServices en el archivo Startup.cs del proyecto de interfaz de usuario, el proyecto que necesite hacer referencia al proyecto de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-264">In order to wire up dependency injection in ConfigureServices in the Startup.cs file of the UI project, the project may need to reference the Infrastructure project.</span></span> <span data-ttu-id="b6f64-265">Elimina esta dependencia, más fácilmente mediante el uso de un contenedor de DI personalizado.</span><span class="sxs-lookup"><span data-stu-id="b6f64-265">This dependency can be eliminated, most easily by using a custom DI container.</span></span> <span data-ttu-id="b6f64-266">Para los fines de este ejemplo, el enfoque más sencillo es permitir que el proyecto de interfaz de usuario para que hagan referencia al proyecto de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="b6f64-266">For the purposes of this sample, the simplest approach is to allow the UI project to reference the Infrastructure project.</span></span>

## <a name="monolithic-applications-and-containers"></a><span data-ttu-id="b6f64-267">Contenedores y aplicaciones monolíticas</span><span class="sxs-lookup"><span data-stu-id="b6f64-267">Monolithic Applications and Containers</span></span> 

<span data-ttu-id="b6f64-268">También puede generar un único y monolítico de implementación basado en aplicación o servicio Web e implementarlo como un contenedor.</span><span class="sxs-lookup"><span data-stu-id="b6f64-268">You can build a single and monolithic-deployment based Web Application or Service and deploy it as a container.</span></span> <span data-ttu-id="b6f64-269">Dentro de la aplicación, no podría ser monolítico pero organizada en varias bibliotecas, componentes o capas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-269">Within the application, it might not be monolithic but organized into several libraries, components or layers.</span></span> <span data-ttu-id="b6f64-270">Externamente es un único contenedor como un proceso único, sola aplicación web o servicio único.</span><span class="sxs-lookup"><span data-stu-id="b6f64-270">Externally it is a single container like a single process, single web application or single service.</span></span>

<span data-ttu-id="b6f64-271">Para administrar este modelo, implementa un único contenedor para representar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-271">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="b6f64-272">Para escalar, basta con agregar copias adicionales con un equilibrador de carga en la parte frontal.</span><span class="sxs-lookup"><span data-stu-id="b6f64-272">To scale, just add additional copies with a load balancer in front.</span></span> <span data-ttu-id="b6f64-273">La simplicidad proviene de administrar una única implementación en un único contenedor o la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="b6f64-273">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image5-13.png)

<span data-ttu-id="b6f64-274">Puede incluir varios componentes/bibliotecas o capas internas dentro de cada contenedor, como se muestra en la figura 5-X.</span><span class="sxs-lookup"><span data-stu-id="b6f64-274">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 5-X.</span></span> <span data-ttu-id="b6f64-275">Sin embargo, después de la entidad de seguridad del contenedor de *"un contenedor realiza una acción y lo hace en un proceso*", el patrón monolítico puede surgir un conflicto.</span><span class="sxs-lookup"><span data-stu-id="b6f64-275">But, following the container principal of *"a container does one thing, and does it in one process*", the monolithic pattern might be a conflict.</span></span>

<span data-ttu-id="b6f64-276">El inconveniente de este enfoque se incluye si/cuando crece la aplicación, que requiere una ampliación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-276">The downside of this approach comes if/when the application grows, requiring it to scale.</span></span> <span data-ttu-id="b6f64-277">Si toda la aplicación distribuida, no es realmente un problema.</span><span class="sxs-lookup"><span data-stu-id="b6f64-277">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="b6f64-278">Sin embargo, en la mayoría de los casos, algunas partes de la aplicación son los puntos de retracción necesidad de ajuste de escala, mientras que otros componentes son utilizar menos.</span><span class="sxs-lookup"><span data-stu-id="b6f64-278">However, in most cases, a few parts of the application are the choke points requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="b6f64-279">En el ejemplo típico de comercio electrónico; ¿Qué es probable que necesite escalar es el componente de información de producto.</span><span class="sxs-lookup"><span data-stu-id="b6f64-279">Using the typical eCommerce example; what you likely need to scale is the product information component.</span></span> <span data-ttu-id="b6f64-280">Muchos clientes más examinar productos de adquirirlas.</span><span class="sxs-lookup"><span data-stu-id="b6f64-280">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="b6f64-281">Más clientes utilice su cesta de usar la canalización de pago.</span><span class="sxs-lookup"><span data-stu-id="b6f64-281">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="b6f64-282">Los clientes menos agreguen comentarios o ver su historial de compras.</span><span class="sxs-lookup"><span data-stu-id="b6f64-282">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="b6f64-283">Y es probable que sólo tenga una serie de empleados en una única región, que necesita para administrar el contenido y las campañas de marketing.</span><span class="sxs-lookup"><span data-stu-id="b6f64-283">And you likely only have a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="b6f64-284">Escalando el diseño monolítico, todo el código se implementa varias veces.</span><span class="sxs-lookup"><span data-stu-id="b6f64-284">By scaling the monolithic design, all the code is deployed multiple times.</span></span>

<span data-ttu-id="b6f64-285">Además de la escala todo problemas, los cambios en un único componente requieren al volver a examinar completa de toda la aplicación y una implementación completa de todas las instancias.</span><span class="sxs-lookup"><span data-stu-id="b6f64-285">In addition to the scale everything problem, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="b6f64-286">El enfoque monolítico es bastante habitual y muchas organizaciones están desarrollando con este enfoque de diseño.</span><span class="sxs-lookup"><span data-stu-id="b6f64-286">The monolithic approach is common, and many organizations are developing with this architectural approach.</span></span> <span data-ttu-id="b6f64-287">Muchos están experimentando bueno suficientes resultados, mientras que otros usuarios están alcanzando límites.</span><span class="sxs-lookup"><span data-stu-id="b6f64-287">Many are having good enough results, while others are hitting limits.</span></span> <span data-ttu-id="b6f64-288">Muchos diseñados sus aplicaciones en este modelo, ya que la infraestructura y herramientas eran demasiado difíciles crear arquitecturas orientadas a servicios (SOA) y no verán la necesidad - hasta que la aplicación ha crecido.</span><span class="sxs-lookup"><span data-stu-id="b6f64-288">Many designed their applications in this model, because the tools and infrastructure were too difficult to build service oriented architectures (SOA), and they didn't see the need - until the app grew.</span></span> <span data-ttu-id="b6f64-289">Si encuentra que están cumpliendo los límites del enfoque monolítico, interrumpa la aplicación para que pueda aprovechar mejor contenedores y microservicios puede ser el siguiente paso lógico.</span><span class="sxs-lookup"><span data-stu-id="b6f64-289">If you find you're hitting the limits of the monolithic approach, breaking the app up to enable it to better leverage containers and microservices may be the next logical step.</span></span>

![](./media/image5-14.png)

<span data-ttu-id="b6f64-290">Implementar aplicaciones monolíticas en Microsoft Azure puede lograrse mediante máquinas virtuales dedicadas para cada instancia.</span><span class="sxs-lookup"><span data-stu-id="b6f64-290">Deploying monolithic applications in Microsoft Azure can be achieved using dedicated VMs for each instance.</span></span> <span data-ttu-id="b6f64-291">Usar [conjuntos de escalas de VM de Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), puede escalar fácilmente las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-291">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="b6f64-292">[Servicios de aplicaciones de Azure](https://azure.microsoft.com/services/app-service/) puede ejecutar aplicaciones monolíticas y escalar fácilmente instancias sin tener que administrar las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-292">[Azure App Services](https://azure.microsoft.com/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="b6f64-293">Servicios de aplicaciones de Azure puede ejecutar instancias únicas de contenedores de Docker, simplificar la implementación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-293">Azure App Services can run single instances of Docker containers as well, simplifying the deployment.</span></span> <span data-ttu-id="b6f64-294">Puede implementar una sola máquina virtual como un host Docker con Docker y puede ejecutar varias instancias.</span><span class="sxs-lookup"><span data-stu-id="b6f64-294">Using Docker, you can deploy a single VM as a Docker host, and run multiple instances.</span></span> <span data-ttu-id="b6f64-295">Con el equilibrador de Azure, tal como se muestra en la figura 5-14, puede administrar el ajuste de escala.</span><span class="sxs-lookup"><span data-stu-id="b6f64-295">Using the Azure balancer, as shown in the Figure 5-14, you can manage scaling.</span></span>

<span data-ttu-id="b6f64-296">La implementación a los distintos hosts puede administrarse con técnicas de implementación tradicionales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-296">The deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="b6f64-297">Los hosts de Docker se pueden administrar con comandos como **docker ejecutar** realizar manualmente o mediante automatización, como canalizaciones de entrega continua (CD).</span><span class="sxs-lookup"><span data-stu-id="b6f64-297">The Docker hosts can be managed with commands like **docker run** performed manually, or through automation such as Continuous Delivery (CD) pipelines.</span></span>

### <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="b6f64-298">Aplicación monolítico implementada como un contenedor</span><span class="sxs-lookup"><span data-stu-id="b6f64-298">Monolithic application deployed as a container</span></span>

<span data-ttu-id="b6f64-299">Existen ventajas del uso de contenedores para administrar las implementaciones de aplicaciones monolítico.</span><span class="sxs-lookup"><span data-stu-id="b6f64-299">There are benefits of using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="b6f64-300">Las instancias de contenedores de ajuste de escala es mucho más rápido y fácil de implementar máquinas virtuales adicionales.</span><span class="sxs-lookup"><span data-stu-id="b6f64-300">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="b6f64-301">Incluso cuando se usa conjuntos de escalas de VM para escalar las máquinas virtuales, tardan tiempo en la instancia.</span><span class="sxs-lookup"><span data-stu-id="b6f64-301">Even when using VM Scale Sets to scale VMs, they take time to instance.</span></span> <span data-ttu-id="b6f64-302">Cuando se implementa como instancias de aplicación, la configuración de la aplicación se administra como parte de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="b6f64-302">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="b6f64-303">Implementación de actualizaciones como imágenes de Docker es mucho más rápido y eficaz de la red.</span><span class="sxs-lookup"><span data-stu-id="b6f64-303">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="b6f64-304">Imágenes de docker se inician normalmente en segundos, lo que acelera la implementación.</span><span class="sxs-lookup"><span data-stu-id="b6f64-304">Docker Images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="b6f64-305">Anular una instancia de Docker es tan fácil como emitir un **stop docker** comando, normalmente se realizan en menos de un segundo.</span><span class="sxs-lookup"><span data-stu-id="b6f64-305">Tearing down a Docker instance is as easy as issuing a **docker stop** command, typically completing in less than a second.</span></span>

<span data-ttu-id="b6f64-306">Como contenedores son intrínsecamente inmutables por diseño, nunca debe preocuparse de las máquinas virtuales están dañadas, mientras que las secuencias de comandos de actualización podrían olvidar para tener en cuenta algunas configuración concreta o la izquierda del archivo en disco.</span><span class="sxs-lookup"><span data-stu-id="b6f64-306">As containers are inherently immutable by design, you never need to worry about corrupted VMs, whereas update scripts might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="b6f64-307">Aunque monolíticas aplicaciones pueden beneficiarse de Docker, interrumpa la aplicación monolítica en subsistemas que se puede escalar, desarrollado e implementado de forma individual puede ser el punto de entrada en el dominio Kerberos de microservicios.</span><span class="sxs-lookup"><span data-stu-id="b6f64-307">While monolithic apps can benefit from Docker, breaking up the monolithic application into sub systems which can be scaled, developed and deployed individually may be your entry point into the realm of microservices.</span></span>

> ### <a name="references--common-web-architectures"></a><span data-ttu-id="b6f64-308">Referencias: arquitecturas de Web comunes</span><span class="sxs-lookup"><span data-stu-id="b6f64-308">References – Common Web Architectures</span></span>
> - <span data-ttu-id="b6f64-309">**La arquitectura de limpieza**</span><span class="sxs-lookup"><span data-stu-id="b6f64-309">**The Clean Architecture**</span></span>  
> <span data-ttu-id="b6f64-310"><https://8thlight.com/blog/Uncle-Bob/2012/08/13/the-Clean-Architecture.HTML></span><span class="sxs-lookup"><span data-stu-id="b6f64-310"><https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html></span></span>
> - <span data-ttu-id="b6f64-311">**La arquitectura de cebolla**</span><span class="sxs-lookup"><span data-stu-id="b6f64-311">**The Onion Architecture**</span></span>  
> <span data-ttu-id="b6f64-312"><http://jeffreypalermo.com/blog/the-Onion-Architecture-Part-1/></span><span class="sxs-lookup"><span data-stu-id="b6f64-312"><http://jeffreypalermo.com/blog/the-onion-architecture-part-1/></span></span>
> - <span data-ttu-id="b6f64-313">**El modelo de repositorio**</span><span class="sxs-lookup"><span data-stu-id="b6f64-313">**The Repository Pattern**</span></span>  
> <span data-ttu-id="b6f64-314"><http://deviq.com/Repository-Pattern/></span><span class="sxs-lookup"><span data-stu-id="b6f64-314"><http://deviq.com/repository-pattern/></span></span>
> - <span data-ttu-id="b6f64-315">**Limpiar solución de arquitectura de ejemplo**</span><span class="sxs-lookup"><span data-stu-id="b6f64-315">**Clean Architecture Solution Sample**</span></span>  
> <span data-ttu-id="b6f64-316"><https://github.com/ardalis/cleanarchitecture></span><span class="sxs-lookup"><span data-stu-id="b6f64-316"><https://github.com/ardalis/cleanarchitecture></span></span>
> - <span data-ttu-id="b6f64-317">**Diseñar libros electrónicos Microservicios** <http://aka.ms/MicroservicesEbook></span><span class="sxs-lookup"><span data-stu-id="b6f64-317">**Architecting Microservices e-book** <http://aka.ms/MicroservicesEbook></span></span>

>[!div class="step-by-step"]
<span data-ttu-id="b6f64-318">[Anterior] (arquitectura principles.md) [siguiente] (común-client-lado-web-technologies.md)</span><span class="sxs-lookup"><span data-stu-id="b6f64-318">[Previous] (architectural-principles.md) [Next] (common-client-side-web-technologies.md)</span></span>
