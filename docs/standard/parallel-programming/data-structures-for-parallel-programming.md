---
title: "Estructuras de datos para la programación paralela"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
caps.latest.revision: "15"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: f35c5382455021f0a001604367e59204ce4ad93c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/21/2017
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="f0006-102">Estructuras de datos para la programación paralela</span><span class="sxs-lookup"><span data-stu-id="f0006-102">Data Structures for Parallel Programming</span></span>
<span data-ttu-id="f0006-103">.NET Framework versión 4 incorpora a varios tipos nuevos que resultan útiles en programación en paralelo, incluido un conjunto de clases de colección simultáneas, primitivas de sincronización ligeros y tipos para la inicialización diferida.</span><span class="sxs-lookup"><span data-stu-id="f0006-103">The .NET Framework version 4 introduces several new types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="f0006-104">Puede usar estos tipos con cualquier código de aplicación multiproceso, incluidos los Task Parallel Library y PLINQ.</span><span class="sxs-lookup"><span data-stu-id="f0006-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="f0006-105">Clases de colección simultáneas</span><span class="sxs-lookup"><span data-stu-id="f0006-105">Concurrent Collection Classes</span></span>  
 <span data-ttu-id="f0006-106">Las clases de colección en el <xref:System.Collections.Concurrent?displayProperty=nameWithType> espacio de nombres proporcionan subprocesos agregar y quitar las operaciones que evitan los bloqueos siempre que sea posible y usar bloqueo específico donde son necesarios los bloqueos.</span><span class="sxs-lookup"><span data-stu-id="f0006-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="f0006-107">A diferencia de las colecciones que se introdujeron en las versiones 1.0 y 2.0 de .NET Framework, una clase de colección simultáneas no requieren que adopta ningún bloqueo al tener acceso a elementos de código de usuario.</span><span class="sxs-lookup"><span data-stu-id="f0006-107">Unlike collections that were introduced in the .NET Framework versions 1.0 and 2.0, a concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="f0006-108">Las clases de colección simultáneas pueden mejorar significativamente el rendimiento a través de tipos como <xref:System.Collections.ArrayList?displayProperty=nameWithType> y <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (con bloqueo implementado por el usuario) en escenarios donde varios subprocesos agregarán y quitar elementos de una colección.</span><span class="sxs-lookup"><span data-stu-id="f0006-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="f0006-109">En la tabla siguiente se enumera las nuevas clases de colección simultáneas:</span><span class="sxs-lookup"><span data-stu-id="f0006-109">The following table lists the new concurrent collection classes:</span></span>  
  
|<span data-ttu-id="f0006-110">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0006-110">Type</span></span>|<span data-ttu-id="f0006-111">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0006-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="f0006-112">Proporciona capacidades de bloqueo y establecimiento de límites en colecciones seguras para subprocesos que implementan <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f0006-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0006-113">Subprocesos de productor se bloquean si no hay ranuras disponibles o si la colección está lleno.</span><span class="sxs-lookup"><span data-stu-id="f0006-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="f0006-114">Subprocesos de consumidor se bloquean si la colección está vacía.</span><span class="sxs-lookup"><span data-stu-id="f0006-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="f0006-115">Este tipo también admite el acceso sin bloqueo por productores y consumidores.</span><span class="sxs-lookup"><span data-stu-id="f0006-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="f0006-116"><xref:System.Collections.Concurrent.BlockingCollection%601>puede utilizarse como una clase base o memoria para proporcionar el bloqueo y establecimiento de límites para cualquier clase de colección que admita auxiliar <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="f0006-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="f0006-117">Una implementación de contenedor seguro para subprocesos que proporciona escalable operaciones add y get.</span><span class="sxs-lookup"><span data-stu-id="f0006-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="f0006-118">Un tipo de diccionario simultáneo y escalable.</span><span class="sxs-lookup"><span data-stu-id="f0006-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="f0006-119">Una cola FIFO simultánea y escalable.</span><span class="sxs-lookup"><span data-stu-id="f0006-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="f0006-120">Una pila LIFO simultánea y escalable.</span><span class="sxs-lookup"><span data-stu-id="f0006-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="f0006-121">Para obtener más información, consulte [Colecciones seguras para subprocesos](../../../docs/standard/collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-121">For more information, see [Thread-Safe Collections](../../../docs/standard/collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="f0006-122">Primitivas de sincronización</span><span class="sxs-lookup"><span data-stu-id="f0006-122">Synchronization Primitives</span></span>  
 <span data-ttu-id="f0006-123">Las primitivas de sincronización nueva en la <xref:System.Threading?displayProperty=nameWithType> espacio de nombres permiten un rendimiento más rápido y simultaneidad específica al evitar costosos mecanismos de bloqueo en el código multithreading heredado.</span><span class="sxs-lookup"><span data-stu-id="f0006-123">The new synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span> <span data-ttu-id="f0006-124">Algunos de los nuevos tipos, como <xref:System.Threading.Barrier?displayProperty=nameWithType> y <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> no tienen ningún homólogo no genérico en versiones anteriores de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f0006-124">Some of the new types, such as <xref:System.Threading.Barrier?displayProperty=nameWithType> and <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> have no counterparts in earlier releases of the .NET Framework.</span></span>  
  
 <span data-ttu-id="f0006-125">En la tabla siguiente se enumera los nuevos tipos de sincronización:</span><span class="sxs-lookup"><span data-stu-id="f0006-125">The following table lists the new synchronization types:</span></span>  
  
|<span data-ttu-id="f0006-126">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0006-126">Type</span></span>|<span data-ttu-id="f0006-127">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0006-127">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="f0006-128">Permite que varios subprocesos para que funcione en un algoritmo en paralelo proporcionando un punto en el que cada tarea puede señalar su llegada y, a continuación, se bloquea hasta que algunas o todas las tareas hayan llegado.</span><span class="sxs-lookup"><span data-stu-id="f0006-128">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="f0006-129">Para más información, consulte [Barrier](../../../docs/standard/threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-129">For more information, see [Barrier](../../../docs/standard/threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="f0006-130">Simplifica los escenarios de bifurcación y unión proporcionando un mecanismo sencillo de rendezvous.</span><span class="sxs-lookup"><span data-stu-id="f0006-130">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="f0006-131">Para obtener más información, consulte [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-131">For more information, see [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="f0006-132">Primitiva de sincronización similar a <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f0006-132">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f0006-133"><xref:System.Threading.ManualResetEventSlim>es ligero, pero solo puede utilizarse para la comunicación dentro de un proceso.</span><span class="sxs-lookup"><span data-stu-id="f0006-133"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span> <span data-ttu-id="f0006-134">Para obtener más información, consulte [ManualResetEvent y ManualResetEventSlim](../../../docs/standard/threading/manualresetevent-and-manualreseteventslim.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-134">For more information, see [ManualResetEvent and ManualResetEventSlim](../../../docs/standard/threading/manualresetevent-and-manualreseteventslim.md).</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="f0006-135">Primitiva de sincronización que limita el número de subprocesos que puede tener acceso simultáneamente a un recurso o un grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="f0006-135">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="f0006-136">Para obtener más información, consulte [Semaphore y SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-136">For more information, see [Semaphore and SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="f0006-137">Una primitiva de bloqueo de exclusión mutua que hace que el subproceso que está intentando adquirir el bloqueo espera en un bucle, o *número*, durante un período de tiempo antes de producir su cuanto.</span><span class="sxs-lookup"><span data-stu-id="f0006-137">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin*, for a period of time before yielding its quantum.</span></span> <span data-ttu-id="f0006-138">En escenarios donde se espera que la espera para adquirir el bloqueo son cortos, <xref:System.Threading.SpinLock> ofrece un rendimiento mayor que otras formas de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="f0006-138">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="f0006-139">Para obtener más información, consulte [SpinLock](../../../docs/standard/threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-139">For more information, see [SpinLock](../../../docs/standard/threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="f0006-140">Un tipo pequeño y ligero que girará durante un tiempo especificado y, finalmente, coloca el subproceso en un estado de espera si se supera el número de número.</span><span class="sxs-lookup"><span data-stu-id="f0006-140">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="f0006-141">Para obtener más información, consulte [SpinWait](../../../docs/standard/threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-141">For more information, see [SpinWait](../../../docs/standard/threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="f0006-142">Para obtener más información, consulte:</span><span class="sxs-lookup"><span data-stu-id="f0006-142">For more information, see:</span></span>  
  
-   [<span data-ttu-id="f0006-143">Utilizar SpinLock para la sincronización de bajo nivel</span><span class="sxs-lookup"><span data-stu-id="f0006-143">How to: Use SpinLock for Low-Level Synchronization</span></span>](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
-   <span data-ttu-id="f0006-144">[Cómo: sincronizar operaciones simultáneas con una clase Barrier](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-144">[How to: Synchronize Concurrent Operations with a Barrier](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="f0006-145">Clases de inicialización diferida</span><span class="sxs-lookup"><span data-stu-id="f0006-145">Lazy Initialization Classes</span></span>  
 <span data-ttu-id="f0006-146">Con la inicialización diferida, no se asigna un objeto de la memoria hasta que se necesite.</span><span class="sxs-lookup"><span data-stu-id="f0006-146">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="f0006-147">La inicialización diferida puede mejorar el rendimiento al distribuir las asignaciones de objetos uniformemente a través de la duración de un programa.</span><span class="sxs-lookup"><span data-stu-id="f0006-147">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="f0006-148">Puede habilitar la inicialización diferida para cualquier tipo personalizado ajustando el tipo <xref:System.Lazy%601>.</span><span class="sxs-lookup"><span data-stu-id="f0006-148">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="f0006-149">En la tabla siguiente se enumera los tipos de inicialización diferida:</span><span class="sxs-lookup"><span data-stu-id="f0006-149">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="f0006-150">Tipo</span><span class="sxs-lookup"><span data-stu-id="f0006-150">Type</span></span>|<span data-ttu-id="f0006-151">Descripción</span><span class="sxs-lookup"><span data-stu-id="f0006-151">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="f0006-152">Proporciona ligera y segura para subprocesos y la inicialización diferida.</span><span class="sxs-lookup"><span data-stu-id="f0006-152">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="f0006-153">Proporciona un valor de inicialización diferida en una base por subproceso, con cada subproceso invoca de forma diferida la función de inicialización.</span><span class="sxs-lookup"><span data-stu-id="f0006-153">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="f0006-154">Proporciona métodos estáticos que evitan la necesidad de asignar una instancia dedicada de inicialización diferida.</span><span class="sxs-lookup"><span data-stu-id="f0006-154">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="f0006-155">En su lugar, usan referencias para asegurarse de que se hayan inicializado destinos tal y como se accede a estos.</span><span class="sxs-lookup"><span data-stu-id="f0006-155">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="f0006-156">Para obtener más información, vea [Inicialización diferida](../../../docs/framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-156">For more information, see [Lazy Initialization](../../../docs/framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="f0006-157">Agregar excepciones</span><span class="sxs-lookup"><span data-stu-id="f0006-157">Aggregate Exceptions</span></span>  
 <span data-ttu-id="f0006-158">El <xref:System.AggregateException?displayProperty=nameWithType> tipo permiten capturar varias excepciones que se producen simultáneamente en subprocesos independientes y devuelven al subproceso de unión como una sola excepción.</span><span class="sxs-lookup"><span data-stu-id="f0006-158">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="f0006-159">El <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> y <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> tipos y PLINQ utilizan <xref:System.AggregateException> ampliamente para este propósito.</span><span class="sxs-lookup"><span data-stu-id="f0006-159">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="f0006-160">Para obtener más información, consulte [NIB: Cómo: controlar excepciones iniciadas por tareas](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d) y [Cómo: controlar excepciones en una consulta PLINQ](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="f0006-160">For more information, see [NIB: How to: Handle Exceptions Thrown by Tasks](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d) and [How to: Handle Exceptions in a PLINQ Query](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f0006-161">Vea también</span><span class="sxs-lookup"><span data-stu-id="f0006-161">See Also</span></span>  
 <xref:System.Collections.Concurrent?displayProperty=nameWithType>  
 <xref:System.Threading?displayProperty=nameWithType>  
 [<span data-ttu-id="f0006-162">Programación en paralelo</span><span class="sxs-lookup"><span data-stu-id="f0006-162">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
