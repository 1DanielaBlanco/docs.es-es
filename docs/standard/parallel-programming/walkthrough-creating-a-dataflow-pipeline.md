---
title: "Tutorial: Crear una canalización de flujos de datos"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- dataflow pipelines, creating with TPL
- Task Parallel Library, dataflows
- TPL dataflow library, creating dataflow pipeline
ms.assetid: 69308f82-aa22-4ac5-833d-e748533b58e8
caps.latest.revision: "11"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: d63fb872382bfc0a3ba3b8637c7357ab65c58fbf
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/18/2017
---
# <a name="walkthrough-creating-a-dataflow-pipeline"></a><span data-ttu-id="34dae-102">Tutorial: Crear una canalización de flujos de datos</span><span class="sxs-lookup"><span data-stu-id="34dae-102">Walkthrough: Creating a Dataflow Pipeline</span></span>
<span data-ttu-id="34dae-103">Aunque puede usar el <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, y <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> métodos para recibir mensajes de bloques de origen, también puede conectar los bloques de mensajes para establecer un *canalización de flujo de datos*.</span><span class="sxs-lookup"><span data-stu-id="34dae-103">Although you can use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> methods to receive messages from source blocks, you can also connect message blocks to form a *dataflow pipeline*.</span></span> <span data-ttu-id="34dae-104">Una canalización de flujo de datos es una serie de componentes, o *bloques de flujo de datos*, cada uno de los cuales realiza una tarea concreta que contribuye a lograr un objetivo mayor.</span><span class="sxs-lookup"><span data-stu-id="34dae-104">A dataflow pipeline is a series of components, or *dataflow blocks*, each of which performs a specific task that contributes to a larger goal.</span></span> <span data-ttu-id="34dae-105">Cada bloque de flujo de datos de una canalización de flujo de datos realiza un determinado trabajo cuando recibe un mensaje de otro bloque de flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="34dae-105">Every dataflow block in a dataflow pipeline performs work when it receives a message from another dataflow block.</span></span> <span data-ttu-id="34dae-106">Se podría establecer una analogía de esto con una cadena de montaje en la fabricación de automóviles.</span><span class="sxs-lookup"><span data-stu-id="34dae-106">An analogy to this is an assembly line for automobile manufacturing.</span></span> <span data-ttu-id="34dae-107">Mientras cada vehículo pasa a través de la línea de montaje, una estación monta el bastidor, la siguiente instala el motor y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="34dae-107">As each vehicle passes through the assembly line, one station assembles the frame, the next one installs the engine, and so on.</span></span> <span data-ttu-id="34dae-108">Dado que una cadena de montaje permite montar varios vehículos al mismo tiempo, proporciona un mejor rendimiento que montar de uno en uno los vehículos completos.</span><span class="sxs-lookup"><span data-stu-id="34dae-108">Because an assembly line enables multiple vehicles to be assembled at the same time, it provides better throughput than assembling complete vehicles one at a time.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="34dae-109">La biblioteca de flujos de datos TPL (espacio de nombres <xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType>) no se distribuye con [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span><span class="sxs-lookup"><span data-stu-id="34dae-109">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="34dae-110">Para instalar el <xref:System.Threading.Tasks.Dataflow> espacio de nombres, abra el proyecto en [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], elija **administrar paquetes de NuGet** en el menú proyecto y busque en línea el `Microsoft.Tpl.Dataflow` paquete.</span><span class="sxs-lookup"><span data-stu-id="34dae-110">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="34dae-111">Este documento muestra una canalización de flujo de datos que descarga el libro *la Ilíada de Homero* desde un sitio Web y explora el texto para que coincida con las palabras individuales con palabras que inversa caracteres de la primera palabra.</span><span class="sxs-lookup"><span data-stu-id="34dae-111">This document demonstrates a dataflow pipeline that downloads the book *The Iliad of Homer* from a website and searches the text to match individual words with words that reverse the first word's characters.</span></span> <span data-ttu-id="34dae-112">La formación de la canalización de flujo de datos en este documento se compone de los siguientes pasos:</span><span class="sxs-lookup"><span data-stu-id="34dae-112">The formation of the dataflow pipeline in this document consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="34dae-113">Crear los bloques de flujo de datos que participan en la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-113">Create the dataflow blocks that participate in the pipeline.</span></span>  
  
2.  <span data-ttu-id="34dae-114">Conectar cada bloque de flujo de datos con el siguiente bloque de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-114">Connect each dataflow block to the next block in the pipeline.</span></span> <span data-ttu-id="34dae-115">Cada bloque recibe como entrada la salida del bloque anterior de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-115">Each block receives as input the output of the previous block in the pipeline.</span></span>  
  
3.  <span data-ttu-id="34dae-116">Para cada bloque de flujo de datos, crear una tarea de continuación que establezca el siguiente bloque en estado completado después de que finalice el bloque anterior.</span><span class="sxs-lookup"><span data-stu-id="34dae-116">For each dataflow block, create a continuation task that sets the next block to the completed state after the previous block finishes.</span></span>  
  
4.  <span data-ttu-id="34dae-117">Publicar datos en el encabezado de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-117">Post data to the head of the pipeline.</span></span>  
  
5.  <span data-ttu-id="34dae-118">Marcar el encabezado de la canalización como completado.</span><span class="sxs-lookup"><span data-stu-id="34dae-118">Mark the head of the pipeline as completed.</span></span>  
  
6.  <span data-ttu-id="34dae-119">Esperar a que la canalización complete todo el trabajo.</span><span class="sxs-lookup"><span data-stu-id="34dae-119">Wait for the pipeline to complete all work.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="34dae-120">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="34dae-120">Prerequisites</span></span>  
 <span data-ttu-id="34dae-121">Lea [Flujo de datos](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) antes de empezar este tutorial.</span><span class="sxs-lookup"><span data-stu-id="34dae-121">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  
  
## <a name="creating-a-console-application"></a><span data-ttu-id="34dae-122">Crear una aplicación de consola</span><span class="sxs-lookup"><span data-stu-id="34dae-122">Creating a Console Application</span></span>  
 <span data-ttu-id="34dae-123">En [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], cree un proyecto de aplicación de consola de [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] o [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)].</span><span class="sxs-lookup"><span data-stu-id="34dae-123">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] Console Application project.</span></span> <span data-ttu-id="34dae-124">Agregue una referencia a System.Threading.Tasks.Dataflow.dll.</span><span class="sxs-lookup"><span data-stu-id="34dae-124">Add a reference to System.Threading.Tasks.Dataflow.dll.</span></span>  
  
 <span data-ttu-id="34dae-125">Como alternativa, cree un archivo y asígnele el nombre `ReverseWords.cs` (`ReverseWords.vb` para [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), y, a continuación, ejecute el siguiente comando en una ventana del símbolo del sistema de Visual Studio para compilar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="34dae-125">Alternatively, create a file and name it `ReverseWords.cs` (`ReverseWords.vb` for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), and then run the following command in a Visual Studio Command Prompt window to compile the project.</span></span>  
  
 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]  
  
 <span data-ttu-id="34dae-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span><span class="sxs-lookup"><span data-stu-id="34dae-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span></span>  
  
 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]  
  
 <span data-ttu-id="34dae-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span><span class="sxs-lookup"><span data-stu-id="34dae-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span></span>  
  
 <span data-ttu-id="34dae-128">Agregue el código siguiente a su proyecto para crear la aplicación básica.</span><span class="sxs-lookup"><span data-stu-id="34dae-128">Add the following code to your project to create the basic application.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#2)]
 [!code-vb[TPLDataflow_Palindromes#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#2)]  
  
## <a name="creating-the-dataflow-blocks"></a><span data-ttu-id="34dae-129">Creación de los bloques de flujo de datos</span><span class="sxs-lookup"><span data-stu-id="34dae-129">Creating the Dataflow Blocks</span></span>  
 <span data-ttu-id="34dae-130">Agregue el código siguiente al método `Main` para crear los bloques de flujo de datos que participan en la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-130">Add the following code to the `Main` method to create the dataflow blocks that participate in the pipeline.</span></span> <span data-ttu-id="34dae-131">En la tabla siguiente se resume el rol de cada miembro de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-131">The table that follows summarizes the role of each member of the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#3)]
 [!code-vb[TPLDataflow_Palindromes#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#3)]  
  
|<span data-ttu-id="34dae-132">Miembro</span><span class="sxs-lookup"><span data-stu-id="34dae-132">Member</span></span>|<span data-ttu-id="34dae-133">Tipo</span><span class="sxs-lookup"><span data-stu-id="34dae-133">Type</span></span>|<span data-ttu-id="34dae-134">Descripción</span><span class="sxs-lookup"><span data-stu-id="34dae-134">Description</span></span>|  
|------------|----------|-----------------|  
|`downloadString`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="34dae-135">Descarga el texto del libro desde la Web.</span><span class="sxs-lookup"><span data-stu-id="34dae-135">Downloads the book text from the Web.</span></span>|  
|`createWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="34dae-136">Separa el texto del libro en una matriz de palabras.</span><span class="sxs-lookup"><span data-stu-id="34dae-136">Separates the book text into an array of words.</span></span>|  
|`filterWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="34dae-137">Quita palabras cortas desde la matriz de palabras, ordena alfabéticamente las palabras resultantes y quita los duplicados.</span><span class="sxs-lookup"><span data-stu-id="34dae-137">Removes short words from the word array, orders the resulting words alphabetically, and remove duplicates.</span></span>|  
|`findReversedWords`|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<span data-ttu-id="34dae-138">Busca todas las palabras de la colección de matriz de palabras filtradas cuya palabra inversa también se encuentra en la matriz de palabras.</span><span class="sxs-lookup"><span data-stu-id="34dae-138">Finds all words in the filtered word array collection whose reverse also occurs in the word array.</span></span>|  
|`printReversedWords`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="34dae-139">Muestra las palabras y sus correspondientes palabras inversas en la consola.</span><span class="sxs-lookup"><span data-stu-id="34dae-139">Displays words and the corresponding reverse words to the console.</span></span>|  
  
 <span data-ttu-id="34dae-140">Aunque se podrían combinar varios pasos de la canalización de flujo de datos de este ejemplo en un solo paso, en el ejemplo se muestra el concepto de componer varias tareas de flujo de datos independientes para realizar una tarea mayor.</span><span class="sxs-lookup"><span data-stu-id="34dae-140">Although you could combine multiple steps in the dataflow pipeline in this example into one step, the example illustrates the concept of composing multiple independent dataflow tasks to perform a larger task.</span></span> <span data-ttu-id="34dae-141">En el ejemplo se usa <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> para permitir que cada miembro de la canalización pueda realizar una operación en sus datos de entrada y enviar los resultados al siguiente paso de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-141">The example uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> to enable each member of the pipeline to perform an operation on its input data and send the results to the next step in the pipeline.</span></span> <span data-ttu-id="34dae-142">El miembro `findReversedWords` de la canalización es un objeto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> porque genera varias salidas independientes para cada entrada.</span><span class="sxs-lookup"><span data-stu-id="34dae-142">The `findReversedWords` member of the pipeline is a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object because it produces multiple independent outputs for each input.</span></span> <span data-ttu-id="34dae-143">El final de la canalización, `printReversedWords`, es un objeto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> porque realiza una acción en su entrada y no genera una salida.</span><span class="sxs-lookup"><span data-stu-id="34dae-143">The tail of the pipeline, `printReversedWords`, is a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object because it performs an action on its input, and does not produce a result.</span></span>  
  
## <a name="forming-the-pipeline"></a><span data-ttu-id="34dae-144">Formación de la canalización</span><span class="sxs-lookup"><span data-stu-id="34dae-144">Forming the Pipeline</span></span>  
 <span data-ttu-id="34dae-145">Agregue el código siguiente para conectar cada bloque con el bloque siguiente en la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-145">Add the following code to connect each block to the next block in the pipeline.</span></span>  
  
 <span data-ttu-id="34dae-146">Cuando se llama al método <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> para conectar un bloque de flujo de datos de origen a un bloque de flujo de datos de destino, el bloque de origen propaga los datos al bloque de destino a medida que los datos se encuentran disponibles.</span><span class="sxs-lookup"><span data-stu-id="34dae-146">When you call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method to connect a source dataflow block to a target dataflow block, the source dataflow block propagates data to the target block as data becomes available.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#4)]
 [!code-vb[TPLDataflow_Palindromes#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#4)]  
  
## <a name="creating-the-completion-tasks"></a><span data-ttu-id="34dae-147">Creación de las tareas de finalización</span><span class="sxs-lookup"><span data-stu-id="34dae-147">Creating the Completion Tasks</span></span>  
 <span data-ttu-id="34dae-148">Agregue el siguiente código para permitir que cada bloque de flujo de datos realice una acción final después de procesar todos los datos.</span><span class="sxs-lookup"><span data-stu-id="34dae-148">Add the following code to enable each dataflow block to perform a final action after it processes all data.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#5)]
 [!code-vb[TPLDataflow_Palindromes#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#5)]  
  
 <span data-ttu-id="34dae-149">Para propagar la finalización por la canalización, cada tarea de finalización establece el siguiente bloque de flujo de datos en el estado completado.</span><span class="sxs-lookup"><span data-stu-id="34dae-149">To propagate completion through the pipeline, each completion task sets the next dataflow block to the completed state.</span></span> <span data-ttu-id="34dae-150">Por ejemplo, cuando el encabezado de la canalización se establece en el estado completado procesa todos los mensajes restantes almacenados en búfer y, a continuación, ejecuta su tarea de finalización, que establece al segundo miembro de la canalización en el estado completado.</span><span class="sxs-lookup"><span data-stu-id="34dae-150">For example, when the head of the pipeline is set to the completed state, it processes any remaining buffered messages and then runs its completion task, which sets the second member of the pipeline to the completed state.</span></span> <span data-ttu-id="34dae-151">A su vez, el segundo miembro de la canalización procesa todos los mensajes restantes almacenados en búfer y, a continuación, ejecuta su tarea de finalización, que establece al tercer miembro de la canalización en el estado completado.</span><span class="sxs-lookup"><span data-stu-id="34dae-151">The second member of the pipeline in turn processes any remaining buffered messages and then runs its completion task, which sets the third member of the pipeline to the completed state.</span></span> <span data-ttu-id="34dae-152">Este proceso continúa hasta que finalizan todos los miembros de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-152">This process continues until all members of the pipeline finish.</span></span> <span data-ttu-id="34dae-153">En este ejemplo se usa la palabra clave `delegate` (`Function` en [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) para definir las tareas de continuación.</span><span class="sxs-lookup"><span data-stu-id="34dae-153">This example uses the `delegate` keyword (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) to define the continuation tasks.</span></span>  
  
## <a name="posting-data-to-the-pipeline"></a><span data-ttu-id="34dae-154">Envío de datos a la canalización</span><span class="sxs-lookup"><span data-stu-id="34dae-154">Posting Data to the Pipeline</span></span>  
 <span data-ttu-id="34dae-155">Agregue el código siguiente para registrar la dirección URL de la libreta de *la Ilíada de Homero* en el encabezado de la canalización de flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="34dae-155">Add the following code to post the URL of the book *The Iliad of Homer* to the head of the dataflow pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#6)]
 [!code-vb[TPLDataflow_Palindromes#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#6)]  
  
 <span data-ttu-id="34dae-156">En este ejemplo se usa <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> para enviar datos de forma sincrónica al encabezado de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-156">This example uses <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> to synchronously send data to the head of the pipeline.</span></span> <span data-ttu-id="34dae-157">Use el método <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> cuando deba enviar datos de forma asincrónica a un nodo de flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="34dae-157">Use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> method when you must asynchronously send data to a dataflow node.</span></span>  
  
## <a name="completing-pipeline-activity"></a><span data-ttu-id="34dae-158">Finalización de la actividad de canalización</span><span class="sxs-lookup"><span data-stu-id="34dae-158">Completing Pipeline Activity</span></span>  
 <span data-ttu-id="34dae-159">Agregue el código siguiente para marcar el encabezado de la canalización como completado.</span><span class="sxs-lookup"><span data-stu-id="34dae-159">Add the following code to mark the head of the pipeline as completed.</span></span> <span data-ttu-id="34dae-160">El encabezado de la canalización ejecuta su tarea de continuación después de procesar todos los mensajes almacenados en búfer.</span><span class="sxs-lookup"><span data-stu-id="34dae-160">The head of the pipeline runs its continuation task after it processes all buffered messages.</span></span> <span data-ttu-id="34dae-161">Esta tarea de continuación propaga el estado completado a través de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-161">This continuation task propagates the completed state through the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#7)]
 [!code-vb[TPLDataflow_Palindromes#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#7)]  
  
 <span data-ttu-id="34dae-162">En este ejemplo se envía una dirección URL a través de la canalización de flujo de datos para que se procese.</span><span class="sxs-lookup"><span data-stu-id="34dae-162">This example sends one URL through the dataflow pipeline to be processed.</span></span> <span data-ttu-id="34dae-163">Si envía más de una entrada a través de una canalización, llame al método <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> después de enviar toda la entrada.</span><span class="sxs-lookup"><span data-stu-id="34dae-163">If you send more than one input through a pipeline, call the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> method after you submit all the input.</span></span> <span data-ttu-id="34dae-164">Puede omitir este paso si la aplicación no tiene ningún punto bien definido en el que los datos ya no están disponibles o la aplicación no tiene que esperar a que finalice la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-164">You can omit this step if your application has no well-defined point at which data is no longer available or the application does not have to wait for the pipeline to finish.</span></span>  
  
## <a name="waiting-for-the-pipeline-to-finish"></a><span data-ttu-id="34dae-165">Espera para la finalización de la canalización</span><span class="sxs-lookup"><span data-stu-id="34dae-165">Waiting for the Pipeline to Finish</span></span>  
 <span data-ttu-id="34dae-166">Agregue el código siguiente para esperar a que finalice la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-166">Add the following code to wait for the pipeline to finish.</span></span> <span data-ttu-id="34dae-167">Dado que en este ejemplo se usan tareas de continuación para propagar la finalización a través de la canalización, la operación global termina cuando finaliza la cola de la canalización.</span><span class="sxs-lookup"><span data-stu-id="34dae-167">Because this example uses continuation tasks to propagate completion through the pipeline, the overall operation is finished when the tail of the pipeline finishes.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#8)]
 [!code-vb[TPLDataflow_Palindromes#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#8)]  
  
 <span data-ttu-id="34dae-168">Puede esperar la finalización del flujo de datos desde cualquier subproceso o desde varios subprocesos al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="34dae-168">You can wait for dataflow completion from any thread or from multiple threads at the same time.</span></span>  
  
## <a name="the-complete-example"></a><span data-ttu-id="34dae-169">Ejemplo completo</span><span class="sxs-lookup"><span data-stu-id="34dae-169">The Complete Example</span></span>  
 <span data-ttu-id="34dae-170">En el ejemplo siguiente se muestra el código completo de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="34dae-170">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#1)]
 [!code-vb[TPLDataflow_Palindromes#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#1)]  
  
## <a name="next-steps"></a><span data-ttu-id="34dae-171">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="34dae-171">Next Steps</span></span>  
 <span data-ttu-id="34dae-172">En este ejemplo se envía una dirección URL para procesarla a través de la canalización de flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="34dae-172">This example sends one URL to process through the dataflow pipeline.</span></span> <span data-ttu-id="34dae-173">Si envía más de un valor de entrada a través de una canalización, puede introducir un formulario de paralelismo en la aplicación que se parezca a cómo se moverían las piezas en una fábrica de automóviles.</span><span class="sxs-lookup"><span data-stu-id="34dae-173">If you send more than one input value through a pipeline, you can introduce a form of parallelism into your application that resembles how parts might move through an automobile factory.</span></span> <span data-ttu-id="34dae-174">Cuando el primer miembro de la canalización envía su resultado al segundo miembro, puede procesar otro elemento en paralelo mientras el segundo miembro procesa el primer resultado.</span><span class="sxs-lookup"><span data-stu-id="34dae-174">When the first member of the pipeline sends its result to the second member, it can process another item in parallel as the second member processes the first result.</span></span>  
  
 <span data-ttu-id="34dae-175">El paralelismo que se logra mediante el uso de canalizaciones de flujo de datos se conoce como *paralelismo de grano grueso* porque normalmente consta de menos tareas más grandes.</span><span class="sxs-lookup"><span data-stu-id="34dae-175">The parallelism that is achieved by using dataflow pipelines is known as *coarse-grained parallelism* because it typically consists of fewer, larger tasks.</span></span> <span data-ttu-id="34dae-176">También puede utilizar una más *un paralelismo pormenorizado* de tareas más pequeñas y breves en una canalización de flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="34dae-176">You can also use a more *fine-grained parallelism* of smaller, short-running tasks in a dataflow pipeline.</span></span> <span data-ttu-id="34dae-177">En este ejemplo, el miembro `findReversedWords` de la canalización usa el método <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> para procesar en paralelo varios elementos de la lista de trabajo.</span><span class="sxs-lookup"><span data-stu-id="34dae-177">In this example, the `findReversedWords` member of the pipeline uses the <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> method to process multiple items in the work list in parallel.</span></span> <span data-ttu-id="34dae-178">El uso de paralelismo de grano fino en una canalización de grano grueso puede mejorar el rendimiento global.</span><span class="sxs-lookup"><span data-stu-id="34dae-178">The use of fine-grained parallelism in a coarse-grained pipeline can improve overall throughput.</span></span>  
  
 <span data-ttu-id="34dae-179">También puede conectar un bloque de flujo de datos de origen a varios bloques de destino para crear un *red de flujo de datos*.</span><span class="sxs-lookup"><span data-stu-id="34dae-179">You can also connect a source dataflow block to multiple target blocks to create a *dataflow network*.</span></span> <span data-ttu-id="34dae-180">La versión sobrecargada del método <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> toma un objeto <xref:System.Predicate%601> que define si el bloque de destino acepta cada mensaje según su valor.</span><span class="sxs-lookup"><span data-stu-id="34dae-180">The overloaded version of the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method takes a <xref:System.Predicate%601> object that defines whether the target block accepts each message based on its value.</span></span> <span data-ttu-id="34dae-181">La mayoría de los tipos de bloques de flujo de datos que actúan como orígenes ofrecen mensajes a todos los bloques de destino conectados, siguiendo el orden en que se conectaron, hasta que uno de los bloques acepta ese mensaje.</span><span class="sxs-lookup"><span data-stu-id="34dae-181">Most dataflow block types that act as sources offer messages to all connected target blocks, in the order in which they were connected, until one of the blocks accepts that message.</span></span> <span data-ttu-id="34dae-182">Mediante este mecanismo de filtrado, puede crear sistemas de bloques de flujo de datos conectados que dirigen determinados datos a través de una ruta de acceso y otros datos a través de otra ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="34dae-182">By using this filtering mechanism, you can create systems of connected dataflow blocks that direct certain data through one path and other data through another path.</span></span> <span data-ttu-id="34dae-183">Para obtener un ejemplo que usa el filtrado para crear una red de flujo de datos, vea [Tutorial: usar el flujo de datos en una aplicación de Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="34dae-183">For an example that uses filtering to create a dataflow network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="34dae-184">Vea también</span><span class="sxs-lookup"><span data-stu-id="34dae-184">See Also</span></span>  
 [<span data-ttu-id="34dae-185">Flujo de datos</span><span class="sxs-lookup"><span data-stu-id="34dae-185">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
