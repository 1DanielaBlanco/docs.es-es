---
title: "Cómo: Convertir en números datos numéricos proporcionados por el usuario en controles web"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- numeric format strings [.NET Framework]
- formatting [.NET Framework], numbers
- number formatting [.NET Framework]
- parsing strings [.NET Framework], numeric strings
- converting numeric user input to number
- numbers [.NET Framework], converting numeric user input to number
ms.assetid: f27ddfb8-7479-4b79-8879-02a3bd8402d4
caps.latest.revision: "8"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 92e28e3b303a7523b9da69b7eb283e0261fc681c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-convert-numeric-user-input-in-web-controls-to-numbers"></a><span data-ttu-id="02ce8-102">Cómo: Convertir en números datos numéricos proporcionados por el usuario en controles web</span><span class="sxs-lookup"><span data-stu-id="02ce8-102">How to: Convert Numeric User Input in Web Controls to Numbers</span></span>
<span data-ttu-id="02ce8-103">Dado que una página Web puede mostrarse en cualquier lugar del mundo, los usuarios pueden proporcionar datos numéricos en un <xref:System.Web.UI.WebControls.TextBox> control en un número casi ilimitado de formatos.</span><span class="sxs-lookup"><span data-stu-id="02ce8-103">Because a Web page can be displayed anywhere in the world, users can input numeric data into a <xref:System.Web.UI.WebControls.TextBox> control in an almost unlimited number of formats.</span></span> <span data-ttu-id="02ce8-104">Como resultado, es muy importante determinar la configuración regional y la referencia cultural del usuario de la página Web.</span><span class="sxs-lookup"><span data-stu-id="02ce8-104">As a result, it is very important to determine the locale and culture of the Web page's user.</span></span> <span data-ttu-id="02ce8-105">Cuando se analiza proporcionados por el usuario, a continuación, puede aplicar las convenciones de formato definidas por la configuración regional y la referencia cultural del usuario.</span><span class="sxs-lookup"><span data-stu-id="02ce8-105">When you parse user input, you can then apply the formatting conventions defined by the user's locale and culture.</span></span>  
  
### <a name="to-convert-numeric-input-from-a-web-textbox-control-to-a-number"></a><span data-ttu-id="02ce8-106">Para convertir la entrada numérica de un control de cuadro de texto Web en un número</span><span class="sxs-lookup"><span data-stu-id="02ce8-106">To convert numeric input from a Web TextBox control to a number</span></span>  
  
1.  <span data-ttu-id="02ce8-107">Determinar si la matriz de cadena devueltos por la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propiedad se rellena.</span><span class="sxs-lookup"><span data-stu-id="02ce8-107">Determine whether the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated.</span></span> <span data-ttu-id="02ce8-108">Si no es así, vaya al paso 6.</span><span class="sxs-lookup"><span data-stu-id="02ce8-108">If it is not, continue to step 6.</span></span>  
  
2.  <span data-ttu-id="02ce8-109">Si la matriz de cadenas devuelta por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad se rellena, recupere el primer elemento.</span><span class="sxs-lookup"><span data-stu-id="02ce8-109">If the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is populated, retrieve its first element.</span></span> <span data-ttu-id="02ce8-110">El primer elemento indica el usuario predeterminado o idioma preferido y región.</span><span class="sxs-lookup"><span data-stu-id="02ce8-110">The first element indicates the user's default or preferred language and region.</span></span>  
  
3.  <span data-ttu-id="02ce8-111">Crear una instancia de un <xref:System.Globalization.CultureInfo> objeto que representa al usuario preferido referencia cultural mediante una llamada a la <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span><span class="sxs-lookup"><span data-stu-id="02ce8-111">Instantiate a <xref:System.Globalization.CultureInfo> object that represents the user's preferred culture by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> constructor.</span></span>  
  
4.  <span data-ttu-id="02ce8-112">Llamar a la `TryParse` o `Parse` de tipo numérico que se va a convertir el usuario de entrada del método a.</span><span class="sxs-lookup"><span data-stu-id="02ce8-112">Call either the `TryParse` or the `Parse` method of the numeric type that you want to convert the user's input to.</span></span> <span data-ttu-id="02ce8-113">Use una sobrecarga de la `TryParse` o `Parse` método con un `provider` parámetro y pasar cualquiera de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="02ce8-113">Use an overload of the `TryParse` or the `Parse` method with a `provider` parameter, and pass it either of the following:</span></span>  
  
    -   <span data-ttu-id="02ce8-114">La <xref:System.Globalization.CultureInfo> objeto creado en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="02ce8-114">The <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
    -   <span data-ttu-id="02ce8-115">El <xref:System.Globalization.NumberFormatInfo> objeto devuelto por la <xref:System.Globalization.CultureInfo.NumberFormat%2A> propiedad de la <xref:System.Globalization.CultureInfo> objeto creado en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="02ce8-115">The <xref:System.Globalization.NumberFormatInfo> object that is returned by the <xref:System.Globalization.CultureInfo.NumberFormat%2A> property of the <xref:System.Globalization.CultureInfo> object created in step 3.</span></span>  
  
5.  <span data-ttu-id="02ce8-116">Si se produce un error en la conversión, repita los pasos del 2 al 4 para cada elemento restante en la matriz de cadenas devueltos por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad.</span><span class="sxs-lookup"><span data-stu-id="02ce8-116">If the conversion fails, repeat steps 2 through 4 for each remaining element in the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property.</span></span>  
  
6.  <span data-ttu-id="02ce8-117">Si todavía se produce un error en la conversión o si la matriz de cadenas devuelta por la <xref:System.Web.HttpRequest.UserLanguages%2A> propiedad está vacía, analizar la cadena usando la referencia cultural, lo que es devuelto por la <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> propiedad.</span><span class="sxs-lookup"><span data-stu-id="02ce8-117">If the conversion still fails or if the string array returned by the <xref:System.Web.HttpRequest.UserLanguages%2A> property is empty, parse the string by using the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>  
  
## <a name="example"></a><span data-ttu-id="02ce8-118">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="02ce8-118">Example</span></span>  
 <span data-ttu-id="02ce8-119">El ejemplo siguiente es la página completa de código subyacente de un formulario Web Forms que pide al usuario que escriba un valor numérico en un <xref:System.Web.UI.WebControls.TextBox> controlar y lo convierte en un número.</span><span class="sxs-lookup"><span data-stu-id="02ce8-119">The following example is the complete code-behind page for a Web form that asks the user to enter a numeric value in a <xref:System.Web.UI.WebControls.TextBox> control and converts it to a number.</span></span> <span data-ttu-id="02ce8-120">A continuación, ese número es duplicado y se muestran utilizando las mismas reglas de formato como la entrada original.</span><span class="sxs-lookup"><span data-stu-id="02ce8-120">That number is then doubled and displayed by using the same formatting rules as the original input.</span></span>  
  
 [!code-csharp[Formatting.HowTo.ParseNumericInput#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.ParseNumericInput/cs/NumericUserInput1.aspx.cs#1)]
 [!code-vb[Formatting.HowTo.ParseNumericInput#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.ParseNumericInput/vb/NumericUserInput1.aspx.vb#1)]  
  
 <span data-ttu-id="02ce8-121">El <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> propiedad se rellena a partir de los nombres de referencia cultural que se encuentran en `Accept-Language` encabezados incluidos en una solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="02ce8-121">The <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> property is populated from the culture names that are contained in `Accept-Language` headers included in an HTTP request.</span></span> <span data-ttu-id="02ce8-122">Sin embargo, no todos los exploradores incluyen `Accept-Language` encabezados en sus solicitudes y los usuarios también pueden suprimir los encabezados por completo.</span><span class="sxs-lookup"><span data-stu-id="02ce8-122">However, not all browsers include `Accept-Language` headers in their requests, and users can also suppress the headers completely.</span></span> <span data-ttu-id="02ce8-123">Esto hace que sea importante tener una referencia cultural de reserva al analizar proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="02ce8-123">This makes it important to have a fallback culture when parsing user input.</span></span> <span data-ttu-id="02ce8-124">Normalmente, la referencia cultural de reserva es la referencia cultural invariable devuelta por <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="02ce8-124">Typically, the fallback culture is the invariant culture returned by <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="02ce8-125">Los usuarios también pueden proporcionar Internet Explorer con nombres de referencia cultural escribiéndolos en un cuadro de texto, que crea la posibilidad de que los nombres de referencia cultural pueden no ser válidos.</span><span class="sxs-lookup"><span data-stu-id="02ce8-125">Users can also provide Internet Explorer with culture names that they input in a text box, which creates the possibility that the culture names may not be valid.</span></span> <span data-ttu-id="02ce8-126">Esto hace que sea importante para usar el control de excepciones al crear instancias de un <xref:System.Globalization.CultureInfo> objeto.</span><span class="sxs-lookup"><span data-stu-id="02ce8-126">This makes it important to use exception handling when instantiating a <xref:System.Globalization.CultureInfo> object.</span></span>  
  
 <span data-ttu-id="02ce8-127">Cuando se recuperan de una solicitud HTTP enviada por Internet Explorer, la <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> matriz se rellena en orden de preferencia de usuario.</span><span class="sxs-lookup"><span data-stu-id="02ce8-127">When retrieved from an HTTP request submitted by Internet Explorer, the <xref:System.Web.HttpRequest.UserLanguages%2A?displayProperty=nameWithType> array is populated in order of user preference.</span></span> <span data-ttu-id="02ce8-128">El primer elemento de la matriz contiene el nombre de referencia cultural/región principal del usuario.</span><span class="sxs-lookup"><span data-stu-id="02ce8-128">The first element in the array contains the name of the user's primary culture/region.</span></span> <span data-ttu-id="02ce8-129">Si la matriz contiene los elementos adicionales, Internet Explorer le asigna arbitrariamente un especificador de calidad, que está delimitado del nombre de referencia cultural de un punto y coma.</span><span class="sxs-lookup"><span data-stu-id="02ce8-129">If the array contains any additional items, Internet Explorer arbitrarily assigns them a quality specifier, which is delimited from the culture name by a semicolon.</span></span> <span data-ttu-id="02ce8-130">Por ejemplo, una entrada para la referencia cultural fr-FR podría tener el formato `fr-FR;q=0.7`.</span><span class="sxs-lookup"><span data-stu-id="02ce8-130">For example, an entry for the fr-FR culture might take the form `fr-FR;q=0.7`.</span></span>  
  
 <span data-ttu-id="02ce8-131">El ejemplo se llama el <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor con su `useUserOverride` parámetro establecido en `false` para crear un nuevo <xref:System.Globalization.CultureInfo> objeto.</span><span class="sxs-lookup"><span data-stu-id="02ce8-131">The example calls the <xref:System.Globalization.CultureInfo.%23ctor%2A> constructor with its `useUserOverride` parameter set to `false` to create a new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="02ce8-132">Esto garantiza que, si el nombre de referencia cultural es el nombre de la referencia cultural predeterminada en el servidor, el nuevo <xref:System.Globalization.CultureInfo> objeto creado por el constructor de clase contiene la configuración predeterminada de una referencia cultural y no refleja las configuraciones invalidadas con el servidor  **Regional y de idioma** aplicación.</span><span class="sxs-lookup"><span data-stu-id="02ce8-132">This ensures that, if the culture name is the default culture name on the server, the new <xref:System.Globalization.CultureInfo> object created by the class constructor contains a culture's default settings and does not reflect any settings overridden by using the server's **Regional and Language Options** application.</span></span> <span data-ttu-id="02ce8-133">Los valores de una configuración invalidada en el servidor son poco probable que exista en el sistema del usuario o para que se refleje en la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="02ce8-133">The values from any overridden settings on the server are unlikely to exist on the user's system or to be reflected in the user's input.</span></span>  
  
 <span data-ttu-id="02ce8-134">El código puede llamar a la `Parse` o `TryParse` método de tipo numérico que la entrada del usuario se convertirá en.</span><span class="sxs-lookup"><span data-stu-id="02ce8-134">Your code can call either the `Parse` or the `TryParse` method of the numeric type that the user's input will be converted to.</span></span> <span data-ttu-id="02ce8-135">Las llamadas repetidas a un método de análisis pueden resultar necesarias para una única operación de análisis.</span><span class="sxs-lookup"><span data-stu-id="02ce8-135">Repeated calls to a parse method may be required for a single parsing operation.</span></span> <span data-ttu-id="02ce8-136">Como resultado, el `TryParse` métodos es mejor, porque devuelve `false` si se produce un error en una operación de análisis.</span><span class="sxs-lookup"><span data-stu-id="02ce8-136">As a result, the `TryParse` method is better, because it returns `false` if a parse operation fails.</span></span> <span data-ttu-id="02ce8-137">En cambio, controlar las excepciones repetidas que pueden producir el `Parse` método puede ser una propuesta muy costosa en una aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="02ce8-137">In contrast, handling the repeated exceptions that may be thrown by the `Parse` method can be a very expensive proposition in a Web application.</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="02ce8-138">Compilar el código</span><span class="sxs-lookup"><span data-stu-id="02ce8-138">Compiling the Code</span></span>  
 <span data-ttu-id="02ce8-139">Para compilar el código, cópielo en un [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] página de código subyacente, por lo que reemplaza todo el código existente.</span><span class="sxs-lookup"><span data-stu-id="02ce8-139">To compile the code, copy it into an [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] code-behind page so that it replaces all the existing code.</span></span> <span data-ttu-id="02ce8-140">La [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] página Web debe contener los siguientes controles:</span><span class="sxs-lookup"><span data-stu-id="02ce8-140">The [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] Web page should contain the following controls:</span></span>  
  
-   <span data-ttu-id="02ce8-141">Un <xref:System.Web.UI.WebControls.Label> control, que no se hace referencia en el código.</span><span class="sxs-lookup"><span data-stu-id="02ce8-141">A <xref:System.Web.UI.WebControls.Label> control, which is not referenced in code.</span></span> <span data-ttu-id="02ce8-142">Establecer su <xref:System.Web.UI.WebControls.TextBox.Text%2A> propiedad en "Escriba un número:".</span><span class="sxs-lookup"><span data-stu-id="02ce8-142">Set its <xref:System.Web.UI.WebControls.TextBox.Text%2A> property to "Enter a Number:".</span></span>  
  
-   <span data-ttu-id="02ce8-143">Un control <xref:System.Web.UI.WebControls.TextBox> llamado `NumericString`.</span><span class="sxs-lookup"><span data-stu-id="02ce8-143">A <xref:System.Web.UI.WebControls.TextBox> control named `NumericString`.</span></span>  
  
-   <span data-ttu-id="02ce8-144">Un control <xref:System.Web.UI.WebControls.Button> llamado `OKButton`.</span><span class="sxs-lookup"><span data-stu-id="02ce8-144">A <xref:System.Web.UI.WebControls.Button> control named `OKButton`.</span></span> <span data-ttu-id="02ce8-145">Establecer su <xref:System.Web.UI.WebControls.Button.Text%2A> propiedad en "Aceptar".</span><span class="sxs-lookup"><span data-stu-id="02ce8-145">Set its <xref:System.Web.UI.WebControls.Button.Text%2A> property to "OK".</span></span>  
  
 <span data-ttu-id="02ce8-146">Cambiar el nombre de la clase de `NumericUserInput` en el nombre de la clase definida por el `Inherits` atributo de la [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] la página `Page` directiva.</span><span class="sxs-lookup"><span data-stu-id="02ce8-146">Change the name of the class from `NumericUserInput` to the name of the class that is defined by the `Inherits` attribute of the [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] page's `Page` directive.</span></span> <span data-ttu-id="02ce8-147">Cambiar el nombre de la `NumericInput` objetos hacen referencia al nombre definido por el `id` atributo de la [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] la página `form` etiqueta.</span><span class="sxs-lookup"><span data-stu-id="02ce8-147">Change the name of the `NumericInput` object reference to the name defined by the `id` attribute of the [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] page's `form` tag.</span></span>  
  
## <a name="net-framework-security"></a><span data-ttu-id="02ce8-148">Seguridad de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="02ce8-148">.NET Framework Security</span></span>  
 <span data-ttu-id="02ce8-149">Para evitar que un usuario inserte el script en el flujo HTML, los proporcionados por el usuario nunca deben devolverse directamente en la respuesta del servidor.</span><span class="sxs-lookup"><span data-stu-id="02ce8-149">To prevent a user from injecting script into the HTML stream, user input should never be directly echoed back in the server response.</span></span> <span data-ttu-id="02ce8-150">En su lugar, debe codificarse utilizando el <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> método.</span><span class="sxs-lookup"><span data-stu-id="02ce8-150">Instead, it should be encoded by using the <xref:System.Web.HttpServerUtility.HtmlEncode%2A?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="02ce8-151">Vea también</span><span class="sxs-lookup"><span data-stu-id="02ce8-151">See Also</span></span>  
 [<span data-ttu-id="02ce8-152">Efectuar operaciones de formato</span><span class="sxs-lookup"><span data-stu-id="02ce8-152">Performing Formatting Operations</span></span>](../../../docs/standard/base-types/performing-formatting-operations.md)  
 [<span data-ttu-id="02ce8-153">Análisis de cadenas numéricas</span><span class="sxs-lookup"><span data-stu-id="02ce8-153">Parsing Numeric Strings</span></span>](../../../docs/standard/base-types/parsing-numeric.md)
