---
title: Servicios WCF y ASP.NET
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: b980496a-f0b0-4319-8e55-a0f0fa32da70
caps.latest.revision: "24"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: efa21ed4781cf635c5b49ebda9b13711a032e981
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/02/2017
---
# <a name="wcf-services-and-aspnet"></a><span data-ttu-id="93c4a-102">Servicios WCF y ASP.NET</span><span class="sxs-lookup"><span data-stu-id="93c4a-102">WCF Services and ASP.NET</span></span>
<span data-ttu-id="93c4a-103">En este tema se tratan los servicios de hospedaje de [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] en paralelo con ASP.NET y el hospedaje de ellos en el modo de compatibilidad de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-103">This topic discusses hosting [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services side-by-side with ASP.NET and hosting them in ASP.NET compatibility mode.</span></span>  
  
## <a name="hosting-wcf-side-by-side-with-aspnet"></a><span data-ttu-id="93c4a-104">Hospedaje de WCF en paralelo con ASP.NET</span><span class="sxs-lookup"><span data-stu-id="93c4a-104">Hosting WCF Side-by-Side with ASP.NET</span></span>  
 <span data-ttu-id="93c4a-105">Los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hospedados en Internet Information Services (IIS) se pueden encontrar con páginas .ASPX y servicios Web ASMX dentro de un dominio de aplicación común e individual.</span><span class="sxs-lookup"><span data-stu-id="93c4a-105">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in Internet Information Services (IIS) can be located with .ASPX pages and ASMX Web services inside of a single, common Application Domain.</span></span> <span data-ttu-id="93c4a-106">ASP.NET proporciona servicios de infraestructura común como administración de AppDomain y compilación dinámica en tiempo de ejecución de HTTP de ASP.NET e [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-106">ASP.NET provides common infrastructure services such as AppDomain management and dynamic compilation for both [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and the ASP.NET HTTP runtime.</span></span> <span data-ttu-id="93c4a-107">La configuración predeterminada para [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] es en paralelo con ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-107">The default configuration for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is side-by-side with ASP.NET.</span></span>  
  
 <span data-ttu-id="93c4a-108">![Servicios WCF y ASP. NET: estado compartido](../../../../docs/framework/wcf/feature-details/media/hostingwcfwithaspnet.gif "HostingWCFwithASPNET")</span><span class="sxs-lookup"><span data-stu-id="93c4a-108">![WCF Services and ASP .NET: sharing state](../../../../docs/framework/wcf/feature-details/media/hostingwcfwithaspnet.gif "HostingWCFwithASPNET")</span></span>  
  
 <span data-ttu-id="93c4a-109">El tiempo de ejecución de HTTP de ASP.NET controla las solicitudes de ASP.NET, pero no participa en el procesamiento de solicitudes destinadas a servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], aunque estos servicios se hospeden en el mismo AppDomain que el contenido de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-109">The ASP.NET HTTP runtime handles ASP.NET requests but does not participate in the processing of requests destined for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services, even though these services are hosted in the same AppDomain as is the ASP.NET content.</span></span> <span data-ttu-id="93c4a-110">En su lugar, el modelo de servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] intercepta los mensajes direccionados a los servicios [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] y los enruta a través de la pila de transporte/canal de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-110">Instead, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Service Model intercepts messages addressed to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services and routes them through the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] transport/channel stack.</span></span>  
  
 <span data-ttu-id="93c4a-111">Los resultados del modelo en paralelo son de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="93c4a-111">The results of the side-by-side model are as follows:</span></span>  
  
-   <span data-ttu-id="93c4a-112">Los servicios de ASP.NET e [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] pueden compartir el estado del AppDomain.</span><span class="sxs-lookup"><span data-stu-id="93c4a-112">ASP.NET and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services can share AppDomain state.</span></span> <span data-ttu-id="93c4a-113">Dado que los dos marcos pueden coexistir en el mismo AppDomain, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] también pueden compartir el estado del AppDomain con ASP.NET (incluidas las variables estáticas, los eventos, etc.).</span><span class="sxs-lookup"><span data-stu-id="93c4a-113">Because the two frameworks can coexist in the same AppDomain, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can also share AppDomain state with ASP.NET (including static variables, events, and so on).</span></span>  
  
-   <span data-ttu-id="93c4a-114">Los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] se comportan de forma coherente, independientemente del entorno de hospedaje y del transporte.</span><span class="sxs-lookup"><span data-stu-id="93c4a-114">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services behave consistently, independent of hosting environment and transport.</span></span> <span data-ttu-id="93c4a-115">El tiempo de ejecución de HTTP de ASP.NET se acopla de manera intencionada al entorno de hospedaje de IIS/ASP.NET y a la comunicación HTTP.</span><span class="sxs-lookup"><span data-stu-id="93c4a-115">The ASP.NET HTTP runtime is intentionally coupled to the IIS/ASP.NET hosting environment and HTTP communication.</span></span> <span data-ttu-id="93c4a-116">De manera inversa, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] está diseñado para comportarse de forma consistente en diferentes entornos de hospedaje ([!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] se comporta de forma consistente dentro y fuera de IIS) y transportes (un servicio hospedado en IIS 7.0 y posterior tiene un comportamiento coherente en todos los extremos que expone, incluso aunque algunos de esos extremos usen protocolos distintos de HTTP).</span><span class="sxs-lookup"><span data-stu-id="93c4a-116">Conversely, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is designed to behave consistently across hosting environments ([!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] behaves consistently both inside and outside of IIS) and across transport (a service hosted in IIS 7.0 and later has consistent behavior across all endpoints it exposes, even if some of those endpoints use protocols other than HTTP).</span></span>  
  
-   <span data-ttu-id="93c4a-117">Dentro de un AppDomain, las características implementadas por el tiempo de ejecución de HTTP se aplican al contenido de ASP.NET pero no a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-117">Within an AppDomain, features implemented by the HTTP runtime apply to ASP.NET content but not to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="93c4a-118">Muchas características específicas de HTTP de la plataforma de aplicaciones de ASP.NET no se aplican a los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hospedados dentro de un AppDomain que incluya contenido de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-118">Many HTTP-specific features of the ASP.NET application platform do not apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Services hosted inside of an AppDomain that contains ASP.NET content.</span></span> <span data-ttu-id="93c4a-119">Ejemplos de estas características incluyen lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="93c4a-119">Examples of these features include the following:</span></span>  
  
    -   <span data-ttu-id="93c4a-120">HttpContext: el valor de propiedad <xref:System.Web.HttpContext.Current%2A> siempre es `null` cuando se obtiene acceso a ella desde un servicio de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-120">HttpContext: <xref:System.Web.HttpContext.Current%2A> is always `null` when accessed from within a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.</span></span> <span data-ttu-id="93c4a-121">Use <!--zz <xref:System.ServiceModel.OperationContext.Current.RequestContext>--> `RequestContext` en su lugar.</span><span class="sxs-lookup"><span data-stu-id="93c4a-121">Use <!--zz <xref:System.ServiceModel.OperationContext.Current.RequestContext>--> `RequestContext` instead.</span></span>  
  
    -   <span data-ttu-id="93c4a-122">Autorización basada en archivos: el modelo de seguridad de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] no permite la lista de control de acceso (ACL) aplicada al archivo .svc del servicio a la hora de decidir si se autoriza una solicitud de servicio.</span><span class="sxs-lookup"><span data-stu-id="93c4a-122">File-based authorization: The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security model does not allow for the access control list (ACL) applied to the .svc file of the service when deciding if a service request is authorized.</span></span>  
  
    -   <span data-ttu-id="93c4a-123">Autorización de dirección URL basada en configuración: de forma similar, el [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] modelo de seguridad no se adhiere a las reglas de autorización basada en URL especificadas en System.Web \<autorización > elemento de configuración.</span><span class="sxs-lookup"><span data-stu-id="93c4a-123">Configuration-based URL Authorization: Similarly, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security model does not adhere to any URL-based authorization rules specified in System.Web’s \<authorization> configuration element.</span></span> <span data-ttu-id="93c4a-124">Estos valores se pasan por alto para solicitudes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] si un servicio reside en un espacio de direcciones URL protegido por reglas de autorización de URL de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-124">These settings are ignored for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requests if a service resides in a URL space secured by ASP.NET’s URL authorization rules.</span></span>  
  
    -   <span data-ttu-id="93c4a-125">Extensibilidad de HttpModule: la infraestructura de hospedaje de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] intercepta las solicitudes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] cuando se genera el evento <xref:System.Web.HttpApplication.PostAuthenticateRequest> y no devuelve el procesamiento a la canalización HTTP de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-125">HttpModule extensibility: The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure intercepts [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requests when the <xref:System.Web.HttpApplication.PostAuthenticateRequest> event is raised and does not return processing to the ASP.NET HTTP pipeline.</span></span> <span data-ttu-id="93c4a-126">Los módulos que están codificados para interceptar las solicitudes en fases posteriores de la canalización no interceptan las solicitudes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-126">Modules that are coded to intercept requests at later stages of the pipeline do not intercept [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requests.</span></span>  
  
    -   <span data-ttu-id="93c4a-127">Suplantación de ASP.NET: de forma predeterminada, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] solicita siempre se ejecuta como el proceso IIS identidad, aun cuando ASP.NET se configura para permitir la suplantación mediante System.Web \<identity impersonate = "true" / > opción de configuración.</span><span class="sxs-lookup"><span data-stu-id="93c4a-127">ASP.NET impersonation: By default, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requests always runs as the IIS process identity, even if ASP.NET is set to enable impersonation using System.Web’s \<identity impersonate="true" /> configuration option.</span></span>  
  
 <span data-ttu-id="93c4a-128">Estas restricciones solo se aplican a los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hospedados en la aplicación de IIS.</span><span class="sxs-lookup"><span data-stu-id="93c4a-128">These restrictions apply only to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS application.</span></span> <span data-ttu-id="93c4a-129">La presencia de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]no afecta al comportamiento del contenido de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-129">The behavior of ASP.NET content is not affected by the presence of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
 <span data-ttu-id="93c4a-130">Las aplicaciones de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que requieren la funcionalidad que proporciona tradicionalmente la canalización HTTP deberían considerar la posibilidad de usar equivalentes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], que no dependen del host ni del transporte:</span><span class="sxs-lookup"><span data-stu-id="93c4a-130">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications that require functionality traditionally provided by the HTTP pipeline should consider using the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] equivalents, which are host and transport independent:</span></span>  
  
-   <span data-ttu-id="93c4a-131"><xref:System.ServiceModel.OperationContext> en lugar de <xref:System.Web.HttpContext>.</span><span class="sxs-lookup"><span data-stu-id="93c4a-131"><xref:System.ServiceModel.OperationContext> instead of <xref:System.Web.HttpContext>.</span></span>  
  
-   <span data-ttu-id="93c4a-132"><xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> en lugar de la autorización de archivo/URL de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-132"><xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> instead of ASP.NET’s File/URL Authorization.</span></span>  
  
-   <span data-ttu-id="93c4a-133"><xref:System.ServiceModel.Dispatcher.IDispatchMessageInspector> o los canales dispuestos en capas personalizados en lugar de los módulos HTTP.</span><span class="sxs-lookup"><span data-stu-id="93c4a-133"><xref:System.ServiceModel.Dispatcher.IDispatchMessageInspector> or custom layered channels instead of HTTP modules.</span></span>  
  
-   <span data-ttu-id="93c4a-134">Suplantación para cada operación utilizando [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] en lugar de la suplantación de System.Web.</span><span class="sxs-lookup"><span data-stu-id="93c4a-134">Impersonation for each operation using [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] instead of System.Web impersonation.</span></span>  
  
 <span data-ttu-id="93c4a-135">De manera alternativa, puede considerar ejecutar sus servicios en el modo de compatibilidad ASP.NET de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-135">Alternatively, you can consider running your services in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]’s ASP.NET compatibility mode.</span></span>  
  
## <a name="hosting-wcf-services-in-aspnet-compatibility-mode"></a><span data-ttu-id="93c4a-136">Hospedaje de servicios de WCF en el modo de compatibilidad de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="93c4a-136">Hosting WCF Services in ASP.NET Compatibility Mode</span></span>  
 <span data-ttu-id="93c4a-137">Aunque el modelo de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] está diseñado para comportarse de forma coherente en los diferentes entornos de hospedaje y transportes, a menudo hay escenarios en los que una aplicación no requiere este grado de flexibilidad.</span><span class="sxs-lookup"><span data-stu-id="93c4a-137">Although the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] model is designed to behave consistently across hosting environments and transports, there are often scenarios where an application does not require this degree of flexibility.</span></span> <span data-ttu-id="93c4a-138">El modo de compatibilidad de ASP.NET de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] es conveniente para escenarios que no requieren la capacidad de hospedar fuera de IIS ni de comunicarse sobre protocolos que no sean HTTP, pero que usan todas las características de la plataforma de aplicaciones web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-138">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]’s ASP.NET compatibility mode is suitable for scenarios that do not require the ability to host outside of IIS or to communicate over protocols other than HTTP, but that use all of features of the ASP.NET Web application platform.</span></span>  
  
 <span data-ttu-id="93c4a-139">A diferencia de la configuración en paralelo predeterminada, donde la infraestructura de hospedaje de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] intercepta los mensajes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] y los enruta fuera de la canalización HTTP, los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que se ejecutan en modo de compatibilidad de ASP.NET participan totalmente en el ciclo de vida de la solicitud HTTP de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-139">Unlike the default side-by-side configuration, where the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure intercepts [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] messages and routes them out of the HTTP pipeline, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services running in ASP.NET Compatibility Mode participate fully in the ASP.NET HTTP request lifecycle.</span></span> <span data-ttu-id="93c4a-140">En el modo de compatibilidad, los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] utilizan la canalización HTTP a través de una implementación <xref:System.Web.IHttpHandler>, de manera similar a la forma en que se tratan las solicitudes de páginas ASPX y servicios Web ASMX.</span><span class="sxs-lookup"><span data-stu-id="93c4a-140">In compatibility mode, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services use the HTTP pipeline through an <xref:System.Web.IHttpHandler> implementation, similar to the way requests for ASPX pages and ASMX Web services are handled.</span></span> <span data-ttu-id="93c4a-141">Como resultado, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] se comporta de manera idéntica a ASMX con respecto a las siguientes características de ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="93c4a-141">As a result, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] behaves identically to ASMX with respect to the following ASP.NET features:</span></span>  
  
-   <span data-ttu-id="93c4a-142"><xref:System.Web.HttpContext>: los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que se ejecutan en modo de compatibilidad de ASP.NET pueden tener acceso a <xref:System.Web.HttpContext.Current%2A> y a su estado asociado.</span><span class="sxs-lookup"><span data-stu-id="93c4a-142"><xref:System.Web.HttpContext>: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services running in ASP.NET Compatibility Mode can access <xref:System.Web.HttpContext.Current%2A> and its associated state.</span></span>  
  
-   <span data-ttu-id="93c4a-143">Autorización basada en archivo: los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que se ejecutan en modo de compatibilidad de ASP.NET pueden ser seguros si se asocian las listas de control de acceso (ACL) del sistema de archivos al archivo .svc del servicio.</span><span class="sxs-lookup"><span data-stu-id="93c4a-143">File-based authorization: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services running in ASP.NET compatibility mode can be secure by attaching file system access control lists (ACLs) to the service’s .svc file.</span></span>  
  
-   <span data-ttu-id="93c4a-144">Autorización de URL configurable: las reglas de autorización de URL de ASP.NET se aplican para las solicitudes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] cuando el servicio de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] se está ejecutando en modo de compatibilidad de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-144">Configurable URL authorization: ASP.NET’s URL authorization rules are enforced for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requests when the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service is running in ASP.NET Compatibility Mode.</span></span>  
  
-   <span data-ttu-id="93c4a-145">Extensibilidad de<xref:System.Web.HttpModuleCollection>: dado que los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que se ejecutan en modo de compatibilidad de ASP.NET participan totalmente en el ciclo de vida de la solicitud HTTP de ASP.NET, cualquier módulo HTTP configurado en la canalización HTTP puede funcionar en solicitudes de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] antes de y después de la invocación del servicio.</span><span class="sxs-lookup"><span data-stu-id="93c4a-145"><xref:System.Web.HttpModuleCollection> extensibility: Because [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services running in ASP.NET Compatibility Mode participate fully in the ASP.NET HTTP request lifecycle, any HTTP module configured in the HTTP pipeline is able to operate on [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requests both before and after service invocation.</span></span>  
  
-   <span data-ttu-id="93c4a-146">Suplantación de ASP.NET: los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] se ejecutan utilizando la identidad actual del subproceso ASP.NET suplantado, que puede diferir de la identidad de proceso de IIS si se ha habilitado la suplantación de ASP.NET de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="93c4a-146">ASP.NET Impersonation: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services run using the current identity of the ASP.NET impersonated thread, which may be different than the IIS process identity if ASP.NET impersonation has been enabled for the application.</span></span> <span data-ttu-id="93c4a-147">Si se habilitan la suplantación de ASP.NET y la de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] para una operación de servicio determinada, la implementación del servicio se ejecuta finalmente utilizando la identidad obtenida de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93c4a-147">If ASP.NET impersonation and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] impersonation are both enabled for a particular service operation, the service implementation ultimately runs using the identity obtained from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
 <span data-ttu-id="93c4a-148">El modo de compatibilidad de ASP.NET de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] se habilita en el nivel de la aplicación a través de la siguiente configuración (ubicada en el archivo Web.config de la aplicación):</span><span class="sxs-lookup"><span data-stu-id="93c4a-148">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]’s ASP.NET compatibility mode is enabled at the application level through the following configuration (located in the application’s Web.config file):</span></span>  
  
```xml  
<system.serviceModel>  
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />  
</system.serviceModel>  
```  
  
 <span data-ttu-id="93c4a-149">El valor predeterminado es "`true`" Si no se especifica.</span><span class="sxs-lookup"><span data-stu-id="93c4a-149">This value defaults to "`true`" if not specified.</span></span> <span data-ttu-id="93c4a-150">Establecer este valor en "`false`" indica que todos los [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] servicios que se ejecutan en la aplicación no se ejecutarán en modo de compatibilidad de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-150">Setting this value to "`false`" indicates that all [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services running in the application will not run in ASP.NET Compatibility Mode.</span></span>  
  
 <span data-ttu-id="93c4a-151">Dado que el modo de compatibilidad de ASP.NET implica una semántica de procesamiento de solicitudes diferente de la predeterminada de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], las implementaciones de servicios individuales tienen la capacidad de controlar si se ejecutan dentro de una aplicación para la que se ha habilitado el modo de compatibilidad de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-151">Because ASP.NET Compatibility Mode implies request processing semantics that are fundamentally different from the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] default, individual service implementations have the ability to control whether they run inside of an application for which ASP.NET Compatibility Mode has been enabled.</span></span> <span data-ttu-id="93c4a-152">Los servicios pueden utilizar el <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> para indicar si admiten el modo de compatibilidad de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="93c4a-152">Services can use the <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> to indicate whether they support ASP.NET Compatibility Mode.</span></span> <span data-ttu-id="93c4a-153">El valor predeterminado para este atributo es <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>.</span><span class="sxs-lookup"><span data-stu-id="93c4a-153">The default value for this attribute is <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>.</span></span>  
  
 `[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]`  
  
 `public class CalculatorService : ICalculatorSession`  
  
 `{//Implement calculator service methods.}`  
  
 <span data-ttu-id="93c4a-154">La siguiente tabla muestra cómo el valor del modo de compatibilidad de toda la aplicación interactúa con el nivel expresado de compatibilidad del servicio individual:</span><span class="sxs-lookup"><span data-stu-id="93c4a-154">The following table illustrates how the application-wide compatibility mode setting interacts with the individual service’s stated level of support:</span></span>  
  
|<span data-ttu-id="93c4a-155">Valor de modo de compatibilidad de la aplicación</span><span class="sxs-lookup"><span data-stu-id="93c4a-155">Application-wide Compatibility Mode setting</span></span>|<span data-ttu-id="93c4a-156">[AspNetCompatibilityRequirementsMode]</span><span class="sxs-lookup"><span data-stu-id="93c4a-156">[AspNetCompatibilityRequirementsMode]</span></span><br /><br /> <span data-ttu-id="93c4a-157">Parámetro</span><span class="sxs-lookup"><span data-stu-id="93c4a-157">Setting</span></span>|<span data-ttu-id="93c4a-158">Resultado observado</span><span class="sxs-lookup"><span data-stu-id="93c4a-158">Observed Result</span></span>|  
|--------------------------------------------------|---------------------------------------------------------|---------------------|  
|<span data-ttu-id="93c4a-159">aspNetCompatibilityEnabled = "`true`"</span><span class="sxs-lookup"><span data-stu-id="93c4a-159">aspNetCompatibilityEnabled = "`true`"</span></span>|<xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>|<span data-ttu-id="93c4a-160">El servicio se activa correctamente.</span><span class="sxs-lookup"><span data-stu-id="93c4a-160">Service activates successfully.</span></span>|  
|<span data-ttu-id="93c4a-161">aspNetCompatibilityEnabled = "`true`"</span><span class="sxs-lookup"><span data-stu-id="93c4a-161">aspNetCompatibilityEnabled = "`true`"</span></span>|<xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>|<span data-ttu-id="93c4a-162">El servicio se activa correctamente.</span><span class="sxs-lookup"><span data-stu-id="93c4a-162">Service activates successfully.</span></span>|  
|<span data-ttu-id="93c4a-163">aspNetCompatibilityEnabled = "`true`"</span><span class="sxs-lookup"><span data-stu-id="93c4a-163">aspNetCompatibilityEnabled = "`true`"</span></span>|<xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.NotAllowed>|<span data-ttu-id="93c4a-164">Se produce un error de activación cuando el servicio recibe un mensaje.</span><span class="sxs-lookup"><span data-stu-id="93c4a-164">An activation error occurs when the service receives a message.</span></span>|  
|<span data-ttu-id="93c4a-165">aspNetCompatibilityEnabled = "`false`"</span><span class="sxs-lookup"><span data-stu-id="93c4a-165">aspNetCompatibilityEnabled = "`false`"</span></span>|<xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>|<span data-ttu-id="93c4a-166">Se produce un error de activación cuando el servicio recibe un mensaje.</span><span class="sxs-lookup"><span data-stu-id="93c4a-166">An activation error occurs when the service receives a message.</span></span>|  
|<span data-ttu-id="93c4a-167">aspNetCompatibilityEnabled = "`false`"</span><span class="sxs-lookup"><span data-stu-id="93c4a-167">aspNetCompatibilityEnabled = "`false`"</span></span>|<xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>|<span data-ttu-id="93c4a-168">El servicio se activa correctamente.</span><span class="sxs-lookup"><span data-stu-id="93c4a-168">Service activates successfully.</span></span>|  
|<span data-ttu-id="93c4a-169">aspNetCompatibilityEnabled = "`false`"</span><span class="sxs-lookup"><span data-stu-id="93c4a-169">aspNetCompatibilityEnabled = "`false`"</span></span>|<xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.NotAllowed>|<span data-ttu-id="93c4a-170">El servicio se activa correctamente.</span><span class="sxs-lookup"><span data-stu-id="93c4a-170">Service activates successfully.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="93c4a-171">IIS 7.0 y WAS permite a los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] comunicarse a través de protocolos que no sean HTTP.</span><span class="sxs-lookup"><span data-stu-id="93c4a-171">IIS 7.0 and WAS allows [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to communicate over protocols other than HTTP.</span></span> <span data-ttu-id="93c4a-172">Sin embargo, no se permite a los servicios de [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] que se ejecutan en aplicaciones que han habilitado el modo de compatibilidad de ASP.NET exponer extremos que no sean HTTP.</span><span class="sxs-lookup"><span data-stu-id="93c4a-172">However, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services running in applications that have enabled ASP.NET compatibility mode are not permitted to expose non-HTTP endpoints.</span></span> <span data-ttu-id="93c4a-173">Este tipo de configuración genera una excepción de activación cuando el servicio recibe su primer mensaje.</span><span class="sxs-lookup"><span data-stu-id="93c4a-173">Such a configuration generates an activation exception when the service receives its first message.</span></span>  
  
 <span data-ttu-id="93c4a-174">Para obtener más información acerca de cómo habilitar el modo de compatibilidad ASP.NET para [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] servicios, vea <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode> y [compatibilidad de ASP.NET](../../../../docs/framework/wcf/samples/aspnet-compatibility.md) ejemplo.</span><span class="sxs-lookup"><span data-stu-id="93c4a-174">For more information about enabling ASP.NET compatibility mode for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services, see <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode> and the [ASP.NET Compatibility](../../../../docs/framework/wcf/samples/aspnet-compatibility.md) sample.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="93c4a-175">Vea también</span><span class="sxs-lookup"><span data-stu-id="93c4a-175">See Also</span></span>  
 <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute>  
 [<span data-ttu-id="93c4a-176">Características de hospedaje de Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="93c4a-176">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
