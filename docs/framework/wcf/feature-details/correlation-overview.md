---
title: "Informaci&#243;n general de correlaci&#243;n | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
caps.latest.revision: 12
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 12
---
# Informaci&#243;n general de correlaci&#243;n
Correlación es el mecanismo para relacionar mensajes de servicio de flujo de trabajo entre sí o con el estado de instancia de aplicación, como una respuesta con una solicitud inicial o un identificador de orden determinado con el estado persistente de un flujo de trabajo de procesamiento del orden.  En este tema, se proporciona información general sobre la correlación.  Los otros temas de esta sección proporcionan información adicional para cada tipo de correlación.  
  
## Tipos de correlación  
 La correlación puede estar basada en protocolos o basada en contenidos.  Las correlaciones basadas en protocolos usan datos proporcionados por la infraestructura de entrega de mensajes para proporcionar la asignación entre los mensajes.  Los mensajes que se correlacionan utilizando una correlación basada en protocolos se relacionan entre sí mediante un objeto en la memoria, como <xref:System.ServiceModel.Channels.RequestContext>, o a través de un token proporcionado por el protocolo de transporte.  Las correlaciones basadas en contenidos relacionan los mensajes entre sí mediante datos especificados por la aplicación.  Los mensajes que se correlacionan utilizando la correlación basada en contenidos se relacionan a entre sí mediante ciertos datos definidos por la aplicación en el mensaje, como un número de cliente.  
  
 Las actividades que participan en la correlación usan una clase <xref:System.ServiceModel.Activities.CorrelationHandle> para unir las actividades de mensajería.  Por ejemplo, una clase <xref:System.ServiceModel.Activities.Send> que se utiliza para llamar a un servicio, y una clase <xref:System.ServiceModel.Activities.Receive> subsiguiente que se utiliza para recibir una devolución de llamada del servicio, comparten la misma clase <xref:System.ServiceModel.Activities.CorrelationHandle>.  Se utiliza este patrón básico si la correlación se basa en contenidos o en protocolos.  El identificador de correlación se puede establecer explícitamente en cada actividad o las actividades se pueden contener en una actividad <xref:System.ServiceModel.Activities.CorrelationScope>.  Las actividades contenidas en <xref:System.ServiceModel.Activities.CorrelationScope> tienen sus identificadores de correlación administrados por <xref:System.ServiceModel.Activities.CorrelationScope> y no necesitan que <xref:System.ServiceModel.Activities.CorrelationHandle> se establezca explícitamente.  Un ámbito <xref:System.ServiceModel.Activities.CorrelationScope> proporciona una administración <xref:System.ServiceModel.Activities.CorrelationHandle> para una correlación de solicitud\-respuesta y un tipo de correlación adicional.  Los servicios de flujo de trabajo hospedados utilizando <xref:System.ServiceModel.Activities.WorkflowServiceHost> tienen la misma administración de correlación predeterminada como actividad <xref:System.ServiceModel.Activities.CorrelationScope>.  Esta administración de correlación predeterminada suele indicar que, en muchos escenarios, las actividades de mensajería en <xref:System.ServiceModel.Activities.CorrelationScope> o un servicio de flujo de trabajo no requieren el establecimiento de <xref:System.ServiceModel.Activities.CorrelationHandle>, a menos que varias actividades de mensajería se produzcan en paralelo o se superpongan, como dos actividades <xref:System.ServiceModel.Activities.Receive> en paralelo o dos actividades <xref:System.ServiceModel.Activities.Send> seguidas por dos actividades <xref:System.ServiceModel.Activities.Receive>.  Puede obtener más información sobre la correlación predeterminada en los temas de esta sección que cubren cada tipo específico de correlación.  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] las actividades de mensajería, vea [Actividades de mensajería](../../../../docs/framework/wcf/feature-details/messaging-activities.md) y [Cómo: Crear un servicio de flujo de trabajo con actividades de mensajería](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).  
  
## Correlación basada en protocolos  
 La correlación basada en protocolos usa los mecanismos de transporte para relacionar mensajes entre sí y la instancia adecuada.  Algunas correlaciones protocolares proporcionadas por el sistema incluyen una correlación de solicitud\-respuesta y una correlación basada en contextos.  Una correlación de solicitud\-respuesta se utiliza para correlacionar un par único de actividades de mensajería para formar una operación bidireccional, como una clase <xref:System.ServiceModel.Activities.Send> emparejada con un miembro <xref:System.ServiceModel.Activities.ReceiveReply> o una clase <xref:System.ServiceModel.Activities.Receive> emparejada con una clase <xref:System.ServiceModel.Activities.SendReply>.  El Diseñador de flujo de trabajo de [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] también proporciona un conjunto de plantillas de actividad para implementar este patrón rápidamente.  La correlación basada en contextos está basada en el mecanismo de intercambio de contexto descrito en la [especificación del protocolo de intercambio de contexto de .NET Framework](http://go.microsoft.com/fwlink/?LinkID=166059).  Para utilizar la correlación basada en contextos, debe usarse un enlace basado en contextos como <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> o <xref:System.ServiceModel.NetTcpContextBinding> en el extremo.  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)] la correlación de protocolo, vea [Intercambio de contexto](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Dúplex duradero](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md) y [Solicitud\-respuesta](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] cómo usar las plantillas de actividad del diseñador de flujo de trabajo de [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], vea [Actividades de mensajería](../../../../docs/framework/wcf/feature-details/messaging-activities.md).  Para obtener el código completo, vea los ejemplos [Dúplex duradero &#91;Ejemplos de WF&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) y [NetContextExchangeCorrelation](http://msdn.microsoft.com/es-es/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf).  
  
## Correlación basada en contenidos  
 La correlación basada en contenidos usa cierta información en el mensaje para asociarlo a una instancia determinada.  Al contrario que la correlación basada en protocolos, la correlación basada en contenidos requiere que el autor de la aplicación establezca explícitamente dónde se pueden encontrar estos datos en cada mensaje relacionado.  Las actividades que usan correlación basada en contenidos especifican estos datos de mensaje utilizando <xref:System.ServiceModel.MessageQuerySet>.  La correlación basada en contenidos es útil al comunicarse con servicios que no usan uno de los enlaces de contexto, como <xref:System.ServiceModel.BasicHttpContextBinding>.  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] la correlación basada en contenidos, vea [Basado en contenidos](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).  Para obtener el código completo, vea los ejemplos [Correlación basada en contenidos](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) y [Calculadora correlacionada](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md).  
  
## Vea también  
 [Correlación basada en contenidos](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md)   
 [Calculadora correlacionada](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md)   
 [Dúplex duradero &#91;Ejemplos de WF&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md)   
 [NetContextExchangeCorrelation](http://msdn.microsoft.com/es-es/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf)