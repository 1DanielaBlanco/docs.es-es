---
title: Sugerencias y trucos para animaciones
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- troubleshooting [WPF], animation
- animations [WPF], FillBehavior property
- troubleshooting animation [WPF]
- animating objects [WPF], troubleshooting
- animation tips and tricks [WPF]
- tips and tricks [WPF], animation
- performance troubleshooting [WPF], animation
- animations [WPF], use of system resources
ms.assetid: e467796b-d5d4-45a6-a108-8c5d7ff69a0f
caps.latest.revision: "12"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 4fceebbd3da7a0643e744d80a55cb1c953eba3bb
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/22/2017
---
# <a name="animation-tips-and-tricks"></a><span data-ttu-id="b152e-102">Sugerencias y trucos para animaciones</span><span class="sxs-lookup"><span data-stu-id="b152e-102">Animation Tips and Tricks</span></span>
<span data-ttu-id="b152e-103">Cuando se trabaja con animaciones en [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], hay una serie de sugerencias y trucos que pueden realizar las animaciones tienen un mejor rendimiento y evitar muchas frustraciones.</span><span class="sxs-lookup"><span data-stu-id="b152e-103">When working with animations in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], there are a number of tips and tricks that can make your animations perform better and save you frustration.</span></span>  
  
<a name="generalissuessection"></a>   
## <a name="general-issues"></a><span data-ttu-id="b152e-104">Problemas generales</span><span class="sxs-lookup"><span data-stu-id="b152e-104">General Issues</span></span>  
  
### <a name="animating-the-position-of-a-scroll-bar-or-slider-freezes-it"></a><span data-ttu-id="b152e-105">Al animar la posición de una barra de desplazamiento o de un control deslizante, se inmoviliza</span><span class="sxs-lookup"><span data-stu-id="b152e-105">Animating the Position of a Scroll Bar or Slider Freezes It</span></span>  
 <span data-ttu-id="b152e-106">Si anima la posición de una barra de desplazamiento o el control deslizante utilizando una animación que tiene un <xref:System.Windows.Media.Animation.FillBehavior> de <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> (el valor predeterminado), el usuario ya no podrá mover la barra de desplazamiento o el control deslizante.</span><span class="sxs-lookup"><span data-stu-id="b152e-106">If you animate the position of a scroll bar or slider using an animation that has a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> (the default value), the user will no longer be able to move the scroll bar or slider.</span></span> <span data-ttu-id="b152e-107">Esto se debe a que, aunque la animación finaliza, continúa invalidando el valor base de la propiedad de destino.</span><span class="sxs-lookup"><span data-stu-id="b152e-107">That's because, even though the animation ended, it's still overriding the target property's base value.</span></span> <span data-ttu-id="b152e-108">Para detener la animación de reemplazar el valor actual de la propiedad, quítelo o asignarle un <xref:System.Windows.Media.Animation.FillBehavior> de <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span><span class="sxs-lookup"><span data-stu-id="b152e-108">To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span> <span data-ttu-id="b152e-109">Para obtener más información y un ejemplo, vea [establece una propiedad después de la animación con un guión gráfico](../../../../docs/framework/wpf/graphics-multimedia/how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span><span class="sxs-lookup"><span data-stu-id="b152e-109">For more information and an example, see [Set a Property After Animating It with a Storyboard](../../../../docs/framework/wpf/graphics-multimedia/how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span></span>  
  
### <a name="animating-the-output-of-an-animation-has-no-effect"></a><span data-ttu-id="b152e-110">Animar la salida de una animación no surte ningún efecto</span><span class="sxs-lookup"><span data-stu-id="b152e-110">Animating the Output of an Animation Has No Effect</span></span>  
 <span data-ttu-id="b152e-111">No se puede animar ningún objeto que sea la salida de otra animación.</span><span class="sxs-lookup"><span data-stu-id="b152e-111">You can't animate an object that is the output of another animation.</span></span> <span data-ttu-id="b152e-112">Por ejemplo, si utiliza un <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> para animar la <xref:System.Windows.Shapes.Shape.Fill%2A> de un <xref:System.Windows.Shapes.Rectangle> desde una <xref:System.Windows.Media.RadialGradientBrush> a una <xref:System.Windows.Media.SolidColorBrush>, no se puede animar cualquier propiedad de la <xref:System.Windows.Media.RadialGradientBrush> o <xref:System.Windows.Media.SolidColorBrush>.</span><span class="sxs-lookup"><span data-stu-id="b152e-112">For example, if you use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> to animate the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle> from a <xref:System.Windows.Media.RadialGradientBrush> to a <xref:System.Windows.Media.SolidColorBrush>, you can't animate any properties of the <xref:System.Windows.Media.RadialGradientBrush> or <xref:System.Windows.Media.SolidColorBrush>.</span></span>  
  
### <a name="cant-change-the-value-of-a-property-after-animating-it"></a><span data-ttu-id="b152e-113">No se puede cambiar el valor de una propiedad después de animarla</span><span class="sxs-lookup"><span data-stu-id="b152e-113">Can't Change the Value of a Property after Animating it</span></span>  
 <span data-ttu-id="b152e-114">En algunos casos, puede parecer que no es posible cambiar el valor de una propiedad después de animarla, incluso después de que la animación haya finalizado.</span><span class="sxs-lookup"><span data-stu-id="b152e-114">In some cases, it might appear that you can't change the value of a property after it's been animated, even after the animation has ended.</span></span> <span data-ttu-id="b152e-115">Esto se debe a que, aunque la animación finaliza, continúa invalidando el valor base de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="b152e-115">That's because, even though the animation ended, it's still overriding the property's base value.</span></span> <span data-ttu-id="b152e-116">Para detener la animación de reemplazar el valor actual de la propiedad, quítelo o asignarle un <xref:System.Windows.Media.Animation.FillBehavior> de <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span><span class="sxs-lookup"><span data-stu-id="b152e-116">To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span> <span data-ttu-id="b152e-117">Para obtener más información y un ejemplo, vea [establece una propiedad después de la animación con un guión gráfico](../../../../docs/framework/wpf/graphics-multimedia/how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span><span class="sxs-lookup"><span data-stu-id="b152e-117">For more information and an example, see [Set a Property After Animating It with a Storyboard](../../../../docs/framework/wpf/graphics-multimedia/how-to-set-a-property-after-animating-it-with-a-storyboard.md).</span></span>  
  
### <a name="changing-a-timeline-has-no-effect"></a><span data-ttu-id="b152e-118">Cambiar una escala de tiempo no surte ningún efecto</span><span class="sxs-lookup"><span data-stu-id="b152e-118">Changing a Timeline Has No Effect</span></span>  
 <span data-ttu-id="b152e-119">Aunque la mayoría <xref:System.Windows.Media.Animation.Timeline> propiedades se pueden animar y pueden estar enlazado a datos, cambiar los valores de propiedad de un activo <xref:System.Windows.Media.Animation.Timeline> parece no tener ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="b152e-119">Although most <xref:System.Windows.Media.Animation.Timeline> properties are animatable and can be data bound, changing the property values of an active <xref:System.Windows.Media.Animation.Timeline> seems to have no effect.</span></span> <span data-ttu-id="b152e-120">La razón es que, cuando un <xref:System.Windows.Media.Animation.Timeline> es iniciado, el sistema de control de tiempo realiza una copia de la <xref:System.Windows.Media.Animation.Timeline> y lo utiliza para crear un <xref:System.Windows.Media.Animation.Clock> objeto.</span><span class="sxs-lookup"><span data-stu-id="b152e-120">That's because, when a <xref:System.Windows.Media.Animation.Timeline> is begun, the timing system makes a copy of the <xref:System.Windows.Media.Animation.Timeline> and uses it to create a <xref:System.Windows.Media.Animation.Clock> object.</span></span> <span data-ttu-id="b152e-121">Modificar el original no surte ningún efecto en la copia del sistema.</span><span class="sxs-lookup"><span data-stu-id="b152e-121">Modifying the original has no effect on the system's copy.</span></span>  
  
 <span data-ttu-id="b152e-122">Para una <xref:System.Windows.Media.Animation.Timeline> para reflejar los cambios, debe volver a generar y utilizar para reemplazar el reloj previamente creado su reloj.</span><span class="sxs-lookup"><span data-stu-id="b152e-122">For a <xref:System.Windows.Media.Animation.Timeline> to reflect changes, its clock must be regenerated and used to replace the previously created clock.</span></span> <span data-ttu-id="b152e-123">Los relojes no se regeneran automáticamente.</span><span class="sxs-lookup"><span data-stu-id="b152e-123">Clocks are not regenerated for you automatically.</span></span> <span data-ttu-id="b152e-124">A continuación se muestran distintas maneras de aplicar cambios a las escalas de tiempo:</span><span class="sxs-lookup"><span data-stu-id="b152e-124">The following are several ways to apply timeline changes:</span></span>  
  
-   <span data-ttu-id="b152e-125">Si la escala de tiempo es o pertenece a un <xref:System.Windows.Media.Animation.Storyboard>, puede hacer que reflejar los cambios puede volver a aplicar su guión gráfico utilizando una <xref:System.Windows.Media.Animation.BeginStoryboard> o <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> método.</span><span class="sxs-lookup"><span data-stu-id="b152e-125">If the timeline is or belongs to a <xref:System.Windows.Media.Animation.Storyboard>, you can make it reflect changes by reapplying its storyboard using a <xref:System.Windows.Media.Animation.BeginStoryboard> or the <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> method.</span></span> <span data-ttu-id="b152e-126">El efecto secundario de esta acción es que también se reinicia la animación.</span><span class="sxs-lookup"><span data-stu-id="b152e-126">This has the side effect of also restarting the animation.</span></span> <span data-ttu-id="b152e-127">En el código, puede utilizar el <xref:System.Windows.Media.Animation.Storyboard.Seek%2A> volver del método para avanzar el guión gráfico en su posición anterior.</span><span class="sxs-lookup"><span data-stu-id="b152e-127">In code, you can use the <xref:System.Windows.Media.Animation.Storyboard.Seek%2A> method to advance the storyboard back to its previous position.</span></span>  
  
-   <span data-ttu-id="b152e-128">Si aplica una animación directamente a una propiedad mediante el <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> método, llame a la <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> nuevo al método y pásele la animación que se ha modificado.</span><span class="sxs-lookup"><span data-stu-id="b152e-128">If you applied an animation directly to a property using the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method, call the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method again and pass it the animation that has been modified.</span></span>  
  
-   <span data-ttu-id="b152e-129">Si está trabajando directamente en el nivel de relojes, cree y aplique un nuevo conjunto de relojes y utilícelos para reemplazar el conjunto anterior de relojes generados.</span><span class="sxs-lookup"><span data-stu-id="b152e-129">If you are working directly at the clock level, create and apply a new set of clocks and use them to replace the previous set of generated clocks.</span></span>  
  
 <span data-ttu-id="b152e-130">Para obtener más información acerca de las escalas de tiempo y relojes, consulte [animación y temporización información general del sistema](../../../../docs/framework/wpf/graphics-multimedia/animation-and-timing-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b152e-130">For more information about timelines and clocks, see [Animation and Timing System Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-and-timing-system-overview.md).</span></span>  
  
### <a name="fillbehaviorstop-doesnt-work-as-expected"></a><span data-ttu-id="b152e-131">FillBehavior.Stop no funciona como se espera</span><span class="sxs-lookup"><span data-stu-id="b152e-131">FillBehavior.Stop Doesn't Work as Expected</span></span>  
 <span data-ttu-id="b152e-132">Hay ocasiones al establecer el <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> propiedad <xref:System.Windows.Media.Animation.FillBehavior.Stop> parece no tener ningún efecto, como cuando una animación "entrega" a otra porque tiene un <xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A> configuración de <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace>.</span><span class="sxs-lookup"><span data-stu-id="b152e-132">There are times when setting the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property to <xref:System.Windows.Media.Animation.FillBehavior.Stop> seems to have no effect, such as when one animation "hands off" to another because it has a <xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A> setting of <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace>.</span></span>  
  
 <span data-ttu-id="b152e-133">En el ejemplo siguiente se crea un <xref:System.Windows.Controls.Canvas>, <xref:System.Windows.Shapes.Rectangle> y <xref:System.Windows.Media.TranslateTransform>.</span><span class="sxs-lookup"><span data-stu-id="b152e-133">The following example creates a <xref:System.Windows.Controls.Canvas>, a <xref:System.Windows.Shapes.Rectangle> and a <xref:System.Windows.Media.TranslateTransform>.</span></span> <span data-ttu-id="b152e-134">El <xref:System.Windows.Media.TranslateTransform> se animará para mover el <xref:System.Windows.Shapes.Rectangle> alrededor de la <xref:System.Windows.Controls.Canvas>.</span><span class="sxs-lookup"><span data-stu-id="b152e-134">The <xref:System.Windows.Media.TranslateTransform> will be animated to move the <xref:System.Windows.Shapes.Rectangle> around the <xref:System.Windows.Controls.Canvas>.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipAnimatedObject](../../../../samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipanimatedobject)]  
  
 <span data-ttu-id="b152e-135">Los ejemplos de esta sección utilizan los objetos anteriores para demostrar varios casos donde la <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> propiedad no se comporta como cabría esperar que.</span><span class="sxs-lookup"><span data-stu-id="b152e-135">The examples in this section use the preceding objects to demonstrate several cases where the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property doesn't behave as you might expect it to.</span></span>  
  
#### <a name="fillbehaviorstop-and-handoffbehavior-with-multiple-animations"></a><span data-ttu-id="b152e-136">FillBehavior="Stop" y HandoffBehavior con varias animaciones</span><span class="sxs-lookup"><span data-stu-id="b152e-136">FillBehavior="Stop" and HandoffBehavior with Multiple Animations</span></span>  
 <span data-ttu-id="b152e-137">A veces, parece como si una animación omitiese su <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> propiedad cuando se reemplaza por una segunda animación.</span><span class="sxs-lookup"><span data-stu-id="b152e-137">Sometimes it seems as though an animation ignores its <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property when it is replaced by a second animation.</span></span> <span data-ttu-id="b152e-138">Considere el ejemplo siguiente, que se crea dos <xref:System.Windows.Media.Animation.Storyboard> objetos y los utiliza para animar el mismo <xref:System.Windows.Media.TranslateTransform> se muestra en el ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="b152e-138">Take the following example, which creates two <xref:System.Windows.Media.Animation.Storyboard> objects and uses them to animate the same <xref:System.Windows.Media.TranslateTransform> shown in the preceding example.</span></span>  
  
 <span data-ttu-id="b152e-139">La primera <xref:System.Windows.Media.Animation.Storyboard>, `B1`, anima la <xref:System.Windows.Media.TranslateTransform.X%2A> propiedad de la <xref:System.Windows.Media.TranslateTransform> de 0 a 350, que mueve el rectángulo 350 píxeles a la derecha.</span><span class="sxs-lookup"><span data-stu-id="b152e-139">The first <xref:System.Windows.Media.Animation.Storyboard>, `B1`, animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350, which moves the rectangle 350 pixels to the right.</span></span> <span data-ttu-id="b152e-140">Cuando llega al final de su duración de la animación y detiene la reproducción, la <xref:System.Windows.Media.TranslateTransform.X%2A> propiedad revierte a su valor original, 0.</span><span class="sxs-lookup"><span data-stu-id="b152e-140">When the animation reaches the end of its duration and stops playing, the <xref:System.Windows.Media.TranslateTransform.X%2A> property reverts to its original value, 0.</span></span> <span data-ttu-id="b152e-141">Como resultado, el rectángulo se mueve 350 píxeles a la derecha y luego salta para situarse en su posición original.</span><span class="sxs-lookup"><span data-stu-id="b152e-141">As a result, the rectangle moves to the right 350 pixels and then jumps back to its original position.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardB1Button](../../../../samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardb1button)]  
  
 <span data-ttu-id="b152e-142">El segundo <xref:System.Windows.Media.Animation.Storyboard>, `B2`, también anima la <xref:System.Windows.Media.TranslateTransform.X%2A> propiedad del mismo <xref:System.Windows.Media.TranslateTransform>.</span><span class="sxs-lookup"><span data-stu-id="b152e-142">The second <xref:System.Windows.Media.Animation.Storyboard>, `B2`, also animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the same <xref:System.Windows.Media.TranslateTransform>.</span></span> <span data-ttu-id="b152e-143">Dado que solo el <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> propiedad de la animación en este <xref:System.Windows.Media.Animation.Storyboard> está establecido, la animación usa el valor actual de la propiedad que anima como su valor inicial.</span><span class="sxs-lookup"><span data-stu-id="b152e-143">Because only the <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> property of the animation in this <xref:System.Windows.Media.Animation.Storyboard> is set, the animation uses the current value of the property it animates as its starting value.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardB2Button](../../../../samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardb2button)]  
  
 <span data-ttu-id="b152e-144">Si hace clic en el segundo botón mientras la primera <xref:System.Windows.Media.Animation.Storyboard> está reproduciendo, cabría esperar el siguiente comportamiento:</span><span class="sxs-lookup"><span data-stu-id="b152e-144">If you click the second button while the first <xref:System.Windows.Media.Animation.Storyboard> is playing, you might expect the following behavior:</span></span>  
  
1.  <span data-ttu-id="b152e-145">El primer guión gráfico finaliza y envía el rectángulo a su posición original, porque la animación tiene una <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> de <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span><span class="sxs-lookup"><span data-stu-id="b152e-145">The first storyboard ends and sends the rectangle back to its original position, because the animation has a <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span>  
  
2.  <span data-ttu-id="b152e-146">El segundo guion gráfico se lleva a efecto y anima el objeto a partir de la posición actual, que ahora es 0, hasta 500.</span><span class="sxs-lookup"><span data-stu-id="b152e-146">The second storyboard takes effect and animates from the current position, which is now 0, to 500.</span></span>  
  
 <span data-ttu-id="b152e-147">**Pero esto no es lo que sucede.**</span><span class="sxs-lookup"><span data-stu-id="b152e-147">**But that's not what happens.**</span></span> <span data-ttu-id="b152e-148">En lugar de ello, el rectángulo no salta a su posición original, sino que continúa moviéndose a la derecha.</span><span class="sxs-lookup"><span data-stu-id="b152e-148">Instead, the rectangle does not jump back; it continues moving to the right.</span></span> <span data-ttu-id="b152e-149">Esto se debe a que la segunda animación utiliza el valor actual de la primera animación como su valor inicial y anima desde ese valor hasta 500.</span><span class="sxs-lookup"><span data-stu-id="b152e-149">That's because the second animation uses the current value of the first animation as its starting value and animates from that value to 500.</span></span> <span data-ttu-id="b152e-150">Cuando la segunda animación reemplaza la primera porque la <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace> <xref:System.Windows.Media.Animation.HandoffBehavior> se utiliza, el <xref:System.Windows.Media.Animation.FillBehavior> de la primera animación no tiene importancia.</span><span class="sxs-lookup"><span data-stu-id="b152e-150">When the second animation replaces the first because the <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace><xref:System.Windows.Media.Animation.HandoffBehavior> is used, the <xref:System.Windows.Media.Animation.FillBehavior> of the first animation does not matter.</span></span>  
  
#### <a name="fillbehavior-and-the-completed-event"></a><span data-ttu-id="b152e-151">FillBehavior y el evento Completed</span><span class="sxs-lookup"><span data-stu-id="b152e-151">FillBehavior and the Completed Event</span></span>  
 <span data-ttu-id="b152e-152">En los ejemplos siguientes se muestran otro escenario en el que el <xref:System.Windows.Media.Animation.FillBehavior.Stop> <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> parece no tener ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="b152e-152">The next examples demonstrate another scenario in which the <xref:System.Windows.Media.Animation.FillBehavior.Stop><xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> seems to have no effect.</span></span> <span data-ttu-id="b152e-153">Una vez más, en el ejemplo se utiliza un guión gráfico para animar la <xref:System.Windows.Media.TranslateTransform.X%2A> propiedad de la <xref:System.Windows.Media.TranslateTransform> de 0 a 350.</span><span class="sxs-lookup"><span data-stu-id="b152e-153">Again, the example uses a Storyboard to animate the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350.</span></span> <span data-ttu-id="b152e-154">Sin embargo, esta vez en el ejemplo se registra para el <xref:System.Windows.Media.Animation.Timeline.Completed> eventos.</span><span class="sxs-lookup"><span data-stu-id="b152e-154">However, this time the example registers for the <xref:System.Windows.Media.Animation.Timeline.Completed> event.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardCButton](../../../../samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardcbutton)]  
  
 <span data-ttu-id="b152e-155">El <xref:System.Windows.Media.Animation.Timeline.Completed> controlador de eventos inicia otro <xref:System.Windows.Media.Animation.Storyboard> que anima la misma propiedad de su valor actual en 500.</span><span class="sxs-lookup"><span data-stu-id="b152e-155">The <xref:System.Windows.Media.Animation.Timeline.Completed> event handler starts another <xref:System.Windows.Media.Animation.Storyboard> that animates the same property from its current value to 500.</span></span>  
  
 [!code-csharp[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardC1CompletedHandler](../../../../samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml.cs#fillbehaviortipstoryboardc1completedhandler)]
 [!code-vb[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardC1CompletedHandler](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/VisualBasic/FillBehaviorTip.xaml.vb#fillbehaviortipstoryboardc1completedhandler)]  
  
 <span data-ttu-id="b152e-156">Éste es el marcado que define el segundo <xref:System.Windows.Media.Animation.Storyboard> como un recurso.</span><span class="sxs-lookup"><span data-stu-id="b152e-156">The following is the markup that defines the second <xref:System.Windows.Media.Animation.Storyboard> as a resource.</span></span>  
  
 [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipResources](../../../../samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipresources)]  
  
 <span data-ttu-id="b152e-157">Al ejecutar el <xref:System.Windows.Media.Animation.Storyboard>, que cabría esperar el <xref:System.Windows.Media.TranslateTransform.X%2A> propiedad de la <xref:System.Windows.Media.TranslateTransform> para animar de 0 a 350, a continuación, volver a 0 después de completar (porque tiene un <xref:System.Windows.Media.Animation.FillBehavior> de <xref:System.Windows.Media.Animation.FillBehavior.Stop>) y, a continuación, animar entre 0 y 500.</span><span class="sxs-lookup"><span data-stu-id="b152e-157">When you run the <xref:System.Windows.Media.Animation.Storyboard>, you might expect the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> to animate from 0 to 350, then revert to 0 after it completes (because it has a <xref:System.Windows.Media.Animation.FillBehavior> setting of <xref:System.Windows.Media.Animation.FillBehavior.Stop>), and then animate from 0 to 500.</span></span> <span data-ttu-id="b152e-158">En su lugar, el <xref:System.Windows.Media.TranslateTransform> anima desde 0 a 350 y, a continuación, en 500.</span><span class="sxs-lookup"><span data-stu-id="b152e-158">Instead, the <xref:System.Windows.Media.TranslateTransform> animates from 0 to 350 and then to 500.</span></span>  
  
 <span data-ttu-id="b152e-159">Eso es debido al orden en el que [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] desencadena eventos y porque los valores de propiedad se almacenan en caché y no se vuelven a calcular a menos que se invalide la propiedad.</span><span class="sxs-lookup"><span data-stu-id="b152e-159">That's because of the order in which [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] raises events and because property values are cached and are not recalculated unless the property is invalidated.</span></span> <span data-ttu-id="b152e-160">El <xref:System.Windows.Media.Animation.Timeline.Completed> evento se procesa en primer lugar porque se activó por la escala de tiempo raíz (el primer <xref:System.Windows.Media.Animation.Storyboard>).</span><span class="sxs-lookup"><span data-stu-id="b152e-160">The <xref:System.Windows.Media.Animation.Timeline.Completed> event is processed first because it was triggered by the root timeline (the first <xref:System.Windows.Media.Animation.Storyboard>).</span></span> <span data-ttu-id="b152e-161">En este momento, el <xref:System.Windows.Media.TranslateTransform.X%2A> propiedad todavía devuelve su valor animado porque todavía no han invalidado todavía.</span><span class="sxs-lookup"><span data-stu-id="b152e-161">At this time, the <xref:System.Windows.Media.TranslateTransform.X%2A> property still returns its animated value because it hasn't been invalidated yet.</span></span> <span data-ttu-id="b152e-162">El segundo <xref:System.Windows.Media.Animation.Storyboard> utiliza el valor almacenado en caché como su valor inicial y comienza la animación.</span><span class="sxs-lookup"><span data-stu-id="b152e-162">The second <xref:System.Windows.Media.Animation.Storyboard> uses the cached value as its starting value and begins animating.</span></span>  
  
<a name="performancesection"></a>   
## <a name="performance"></a><span data-ttu-id="b152e-163">Rendimiento</span><span class="sxs-lookup"><span data-stu-id="b152e-163">Performance</span></span>  
  
### <a name="animations-continue-to-run-after-navigating-away-from-a-page"></a><span data-ttu-id="b152e-164">Las animaciones siguen ejecutándose después de salir de una página</span><span class="sxs-lookup"><span data-stu-id="b152e-164">Animations Continue to Run After Navigating Away from a Page</span></span>  
 <span data-ttu-id="b152e-165">Cuando se desplaza fuera de un <xref:System.Windows.Controls.Page> que contiene animaciones en ejecución, las animaciones continuarán reproducir hasta el <xref:System.Windows.Controls.Page> recolección.</span><span class="sxs-lookup"><span data-stu-id="b152e-165">When you navigate away from a <xref:System.Windows.Controls.Page> that contains running animations, those animations will continue to play until the <xref:System.Windows.Controls.Page> is garbage collected.</span></span> <span data-ttu-id="b152e-166">Según el sistema de navegación que se utilice, la página de la que ha salido al navegar podría permanecer en memoria por tiempo indefinido, durante el cual seguiría consumiendo recursos con sus animaciones.</span><span class="sxs-lookup"><span data-stu-id="b152e-166">Depending on the navigation system you're using, a page that you navigate away from might stay in memory for an indefinite amount of time, all the while consuming resources with its animations.</span></span> <span data-ttu-id="b152e-167">Esto resulta especialmente patente cuando una página contiene animaciones de ejecución continua ("ambiente").</span><span class="sxs-lookup"><span data-stu-id="b152e-167">This is most noticeable when a page contains constantly running ("ambient") animations.</span></span>  
  
 <span data-ttu-id="b152e-168">Por esta razón, es una buena idea usar el <xref:System.Windows.FrameworkElement.Unloaded> evento quite animaciones al salir de una página.</span><span class="sxs-lookup"><span data-stu-id="b152e-168">For this reason, it's a good idea to use the <xref:System.Windows.FrameworkElement.Unloaded> event to remove animations when you navigate away from a page.</span></span>  
  
 <span data-ttu-id="b152e-169">Hay diferentes maneras de quitar una animación.</span><span class="sxs-lookup"><span data-stu-id="b152e-169">There are different ways to remove an animation.</span></span> <span data-ttu-id="b152e-170">Pueden emplear las técnicas siguientes para quitar las animaciones que pertenecen a un <xref:System.Windows.Media.Animation.Storyboard>.</span><span class="sxs-lookup"><span data-stu-id="b152e-170">The following techniques can be used to remove animations that belong to a <xref:System.Windows.Media.Animation.Storyboard>.</span></span>  
  
-   <span data-ttu-id="b152e-171">Para quitar un <xref:System.Windows.Media.Animation.Storyboard> empezó con un desencadenador de eventos, vea [Cómo: quitar un guión gráfico](http://msdn.microsoft.com/en-us/7fe39531-de2f-46a0-a69f-b783d04235ee).</span><span class="sxs-lookup"><span data-stu-id="b152e-171">To remove a <xref:System.Windows.Media.Animation.Storyboard> you started with an event trigger, see [How to: Remove a Storyboard](http://msdn.microsoft.com/en-us/7fe39531-de2f-46a0-a69f-b783d04235ee).</span></span>  
  
-   <span data-ttu-id="b152e-172">Usar código para quitar un <xref:System.Windows.Media.Animation.Storyboard>, consulte el <xref:System.Windows.Media.Animation.Storyboard.Remove%2A> método.</span><span class="sxs-lookup"><span data-stu-id="b152e-172">To use code to remove a <xref:System.Windows.Media.Animation.Storyboard>, see the <xref:System.Windows.Media.Animation.Storyboard.Remove%2A> method.</span></span>  
  
 <span data-ttu-id="b152e-173">La técnica siguiente se puede utilizar sin tener en cuenta cómo se inició la animación.</span><span class="sxs-lookup"><span data-stu-id="b152e-173">The next technique may be used regardless of how the animation was started.</span></span>  
  
-   <span data-ttu-id="b152e-174">Para quitar las animaciones de una propiedad específica, use la <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> método.</span><span class="sxs-lookup"><span data-stu-id="b152e-174">To remove animations from a specific property, use the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method.</span></span> <span data-ttu-id="b152e-175">Especifique la propiedad que se está animada como el primer parámetro, y `null` como el segundo.</span><span class="sxs-lookup"><span data-stu-id="b152e-175">Specify the property being animated as the first parameter, and `null` as the second.</span></span> <span data-ttu-id="b152e-176">De este modo, se quitarán todos los relojes de animación de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="b152e-176">This will remove all animation clocks from the property.</span></span>  
  
 <span data-ttu-id="b152e-177">Para obtener más información sobre las distintas maneras para animar propiedades, consulte [Property Animation Techniques Overview](../../../../docs/framework/wpf/graphics-multimedia/property-animation-techniques-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b152e-177">For more information about the different ways to animate properties, see [Property Animation Techniques Overview](../../../../docs/framework/wpf/graphics-multimedia/property-animation-techniques-overview.md).</span></span>  
  
### <a name="using-the-compose-handoffbehavior-consumes-system-resources"></a><span data-ttu-id="b152e-178">Utilizar el valor Compose de HandoffBehavior consume recursos del sistema</span><span class="sxs-lookup"><span data-stu-id="b152e-178">Using the Compose HandoffBehavior Consumes System Resources</span></span>  
 <span data-ttu-id="b152e-179">Al aplicar un <xref:System.Windows.Media.Animation.Storyboard>, <xref:System.Windows.Media.Animation.AnimationTimeline>, o <xref:System.Windows.Media.Animation.AnimationClock> a una propiedad mediante el <xref:System.Windows.Media.Animation.HandoffBehavior.Compose> <xref:System.Windows.Media.Animation.HandoffBehavior>, cualquier <xref:System.Windows.Media.Animation.Clock> objetos asociados anteriormente a esa propiedad siguen consumiendo recursos del sistema; el sistema de temporización no transmitirá Quite estos relojes automáticamente.</span><span class="sxs-lookup"><span data-stu-id="b152e-179">When you apply a <xref:System.Windows.Media.Animation.Storyboard>, <xref:System.Windows.Media.Animation.AnimationTimeline>, or <xref:System.Windows.Media.Animation.AnimationClock> to a property using the <xref:System.Windows.Media.Animation.HandoffBehavior.Compose><xref:System.Windows.Media.Animation.HandoffBehavior>, any <xref:System.Windows.Media.Animation.Clock> objects previously associated with that property continue to consume system resources; the timing system will not remove these clocks automatically.</span></span>  
  
 <span data-ttu-id="b152e-180">Para evitar problemas de rendimiento cuando se aplica un gran número de relojes con <xref:System.Windows.Media.Animation.HandoffBehavior.Compose>, debe quitar los relojes de composición de la propiedad animada cuando se hayan completado.</span><span class="sxs-lookup"><span data-stu-id="b152e-180">To avoid performance issues when you apply a large number of clocks using <xref:System.Windows.Media.Animation.HandoffBehavior.Compose>, you should remove composing clocks from the animated property after they complete.</span></span> <span data-ttu-id="b152e-181">Hay varias formas de quitar un reloj.</span><span class="sxs-lookup"><span data-stu-id="b152e-181">There are several ways to remove a clock.</span></span>  
  
-   <span data-ttu-id="b152e-182">Para quitar todos los relojes de una propiedad, utilice la <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29> o <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> método del objeto animado.</span><span class="sxs-lookup"><span data-stu-id="b152e-182">To remove all clocks from a property, use the <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29> or <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method of the animated object.</span></span> <span data-ttu-id="b152e-183">Especifique la propiedad que se está animada como el primer parámetro, y `null` como el segundo.</span><span class="sxs-lookup"><span data-stu-id="b152e-183">Specify the property being animated as the first parameter, and `null` as the second.</span></span> <span data-ttu-id="b152e-184">De este modo, se quitarán todos los relojes de animación de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="b152e-184">This will remove all animation clocks from the property.</span></span>  
  
-   <span data-ttu-id="b152e-185">Para quitar un determinado <xref:System.Windows.Media.Animation.AnimationClock> en una lista de relojes, use la <xref:System.Windows.Media.Animation.Clock.Controller%2A> propiedad de la <xref:System.Windows.Media.Animation.AnimationClock> para recuperar un <xref:System.Windows.Media.Animation.ClockController>, a continuación, llame a la <xref:System.Windows.Media.Animation.ClockController.Remove%2A> método de la <xref:System.Windows.Media.Animation.ClockController>.</span><span class="sxs-lookup"><span data-stu-id="b152e-185">To remove a specific <xref:System.Windows.Media.Animation.AnimationClock> from a list of clocks, use the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of the <xref:System.Windows.Media.Animation.AnimationClock> to retrieve a <xref:System.Windows.Media.Animation.ClockController>, then call the <xref:System.Windows.Media.Animation.ClockController.Remove%2A> method of the <xref:System.Windows.Media.Animation.ClockController>.</span></span> <span data-ttu-id="b152e-186">Esto se hace normalmente en el <xref:System.Windows.Media.Animation.Clock.Completed> controlador de eventos para un reloj.</span><span class="sxs-lookup"><span data-stu-id="b152e-186">This is typically done in the <xref:System.Windows.Media.Animation.Clock.Completed> event handler for a clock.</span></span> <span data-ttu-id="b152e-187">Tenga en cuenta que los relojes de raíz única pueden controlarse mediante una <xref:System.Windows.Media.Animation.ClockController>; el <xref:System.Windows.Media.Animation.Clock.Controller%2A> propiedad de un reloj secundario devolverá `null`.</span><span class="sxs-lookup"><span data-stu-id="b152e-187">Note that only root clocks can be controlled by a <xref:System.Windows.Media.Animation.ClockController>; the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of a child clock will return `null`.</span></span> <span data-ttu-id="b152e-188">Tenga en cuenta también que la <xref:System.Windows.Media.Animation.Clock.Completed> no se puede llamar el evento si la duración efectiva del reloj es para siempre.</span><span class="sxs-lookup"><span data-stu-id="b152e-188">Note also that the <xref:System.Windows.Media.Animation.Clock.Completed> event will not be called if the effective duration of the clock is forever.</span></span>  <span data-ttu-id="b152e-189">En ese caso, el usuario deberá determinar cuándo se debe llamar a <xref:System.Windows.Media.Animation.ClockController.Remove%2A>.</span><span class="sxs-lookup"><span data-stu-id="b152e-189">In that case, the user will need to determine when to call <xref:System.Windows.Media.Animation.ClockController.Remove%2A>.</span></span>  
  
 <span data-ttu-id="b152e-190">Este problema se produce principalmente en las animaciones de objetos que tienen un período de duración prolongado.</span><span class="sxs-lookup"><span data-stu-id="b152e-190">This is primarily an issue for animations on objects that have a long lifetime.</span></span>  <span data-ttu-id="b152e-191">Cuando un objeto se recolecta como elemento no utilizado, sus relojes también se desconectan y se recolectan como elementos no utilizados.</span><span class="sxs-lookup"><span data-stu-id="b152e-191">When an object is garbage collected, its clocks will also be disconnected and garbage collected.</span></span>  
  
 <span data-ttu-id="b152e-192">Para obtener más información acerca de los objetos de reloj, consulte [animación y temporización información general del sistema](../../../../docs/framework/wpf/graphics-multimedia/animation-and-timing-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b152e-192">For more information about clock objects, see [Animation and Timing System Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-and-timing-system-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b152e-193">Vea también</span><span class="sxs-lookup"><span data-stu-id="b152e-193">See Also</span></span>  
 [<span data-ttu-id="b152e-194">Información general sobre animaciones</span><span class="sxs-lookup"><span data-stu-id="b152e-194">Animation Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)
