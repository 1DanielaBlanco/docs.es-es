---
title: Confirmación
ms.date: 03/30/2017
ms.assetid: 8637aeaf-ac9e-49b8-93f4-da15dee45277
ms.openlocfilehash: caa712aa52da01ce44335a361fd6c9f5215316bf
ms.sourcegitcommit: ba5c189bf44d44204a3e8838e59ec378a62d82f3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/13/2018
ms.locfileid: "44757244"
---
# <a name="confirmation"></a><span data-ttu-id="93b82-102">Confirmación</span><span class="sxs-lookup"><span data-stu-id="93b82-102">Confirmation</span></span>
<span data-ttu-id="93b82-103">En este ejemplo se muestran cuatro escenarios comunes en torno al uso de <xref:System.Activities.Statements.CompensableActivity> y la confirmación.</span><span class="sxs-lookup"><span data-stu-id="93b82-103">This sample shows four common scenarios surrounding the use of <xref:System.Activities.Statements.CompensableActivity> and confirmation.</span></span> <span data-ttu-id="93b82-104">En el ejemplo se ejecutan cuatro flujos de trabajo para mostrar la confirmación.</span><span class="sxs-lookup"><span data-stu-id="93b82-104">The sample runs four workflows to show confirmation.</span></span> <span data-ttu-id="93b82-105">Este ejemplo está disponible en versiones declarativa e imperativa.</span><span class="sxs-lookup"><span data-stu-id="93b82-105">This sample is available in declarative and imperative versions.</span></span>  
  
## <a name="confirm-a-compensable-activity"></a><span data-ttu-id="93b82-106">Confirmar una actividad compensable</span><span class="sxs-lookup"><span data-stu-id="93b82-106">Confirm a Compensable Activity</span></span>  
 <span data-ttu-id="93b82-107">El primer flujo de trabajo muestra cómo confirmar una actividad compensable y consta de una secuencia de dos instancias de <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="93b82-107">The first workflow demonstrates how to confirm a compensable activity and consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> instances.</span></span> <span data-ttu-id="93b82-108">Después de completar la segunda actividad <xref:System.Activities.Statements.CompensableActivity>, una actividad de confirmación confirma la primera actividad.</span><span class="sxs-lookup"><span data-stu-id="93b82-108">After the completion of the second <xref:System.Activities.Statements.CompensableActivity> a confirm activity confirms the first activity.</span></span> <span data-ttu-id="93b82-109">Cuando el flujo de trabajo se completa correctamente, todas las instancias de <xref:System.Activities.Statements.CompensableActivity> que no se han confirmado ni compensado se confirman automáticamente según el orden predeterminado.</span><span class="sxs-lookup"><span data-stu-id="93b82-109">When the workflow successfully completes, all <xref:System.Activities.Statements.CompensableActivity> instances that have not been confirmed or compensated are automatically confirmed using the default order.</span></span> <span data-ttu-id="93b82-110">Sin la confirmación, la segunda actividad <xref:System.Activities.Statements.CompensableActivity> se habría confirmado en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="93b82-110">Without the confirm, the second <xref:System.Activities.Statements.CompensableActivity> would have been confirmed first.</span></span>  
  
## <a name="explicit-compensation"></a><span data-ttu-id="93b82-111">Compensación explícita</span><span class="sxs-lookup"><span data-stu-id="93b82-111">Explicit Compensation</span></span>  
 <span data-ttu-id="93b82-112">El segundo escenario muestra el efecto en la confirmación predeterminada cuando una actividad <xref:System.Activities.Statements.CompensableActivity> se compensa explícitamente.</span><span class="sxs-lookup"><span data-stu-id="93b82-112">The second scenario shows the affect on default confirmation when a <xref:System.Activities.Statements.CompensableActivity> is explicitly compensated.</span></span> <span data-ttu-id="93b82-113">El flujo de trabajo está compuesto de una secuencia de dos actividades <xref:System.Activities.Statements.CompensableActivity>; cuando se completa la segunda, la primera se compensa explícitamente.</span><span class="sxs-lookup"><span data-stu-id="93b82-113">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> activities, after the second completes the first is explicitly compensated.</span></span> <span data-ttu-id="93b82-114">Como resultado, cuando se completa el flujo de trabajo únicamente está confirmada la segunda actividad <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="93b82-114">As a result when the workflow, completes only the second <xref:System.Activities.Statements.CompensableActivity> is confirmed.</span></span>  
  
## <a name="controlling-the-order-of-confirmation-for-nested-compensableactivity-activities"></a><span data-ttu-id="93b82-115">Controlar el orden de confirmación para las actividades CompensableActivity anidadas</span><span class="sxs-lookup"><span data-stu-id="93b82-115">Controlling the Order of Confirmation for Nested CompensableActivity Activities</span></span>  
 <span data-ttu-id="93b82-116">En el tercer escenario se muestra cómo controlar el orden de confirmación de actividades <xref:System.Activities.Statements.CompensableActivity> anidadas.</span><span class="sxs-lookup"><span data-stu-id="93b82-116">The third scenario shows how to control the order of confirmation for nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="93b82-117">El escenario consta de una actividad <xref:System.Activities.Statements.CompensableActivity> como raíz del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="93b82-117">The scenario consists of a <xref:System.Activities.Statements.CompensableActivity> as the root of the workflow.</span></span> <span data-ttu-id="93b82-118">El cuerpo de la actividad <xref:System.Activities.Statements.CompensableActivity> raíz es una secuencia de tres actividades <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="93b82-118">The body of the root <xref:System.Activities.Statements.CompensableActivity> is a sequence of three <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="93b82-119">La propiedad <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> de la actividad <xref:System.Activities.Statements.CompensableActivity> raíz es una secuencia que especifica que se debe confirmar la primera actividad <xref:System.Activities.Statements.CompensableActivity> anidada y a continuación la segunda.</span><span class="sxs-lookup"><span data-stu-id="93b82-119">The <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> for the root <xref:System.Activities.Statements.CompensableActivity> is a sequence that specifies to confirm the first then the second nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="93b82-120">Cuando el flujo de trabajo se completa, confirma la actividad <xref:System.Activities.Statements.CompensableActivity> raíz que, a continuación, confirma la primera, segunda y tercera actividad <xref:System.Activities.Statements.CompensableActivity> anidadas, en ese orden.</span><span class="sxs-lookup"><span data-stu-id="93b82-120">When the workflow completes it confirms the root <xref:System.Activities.Statements.CompensableActivity>, which then confirms the first, second and third nested <xref:System.Activities.Statements.CompensableActivity>, in that order.</span></span> <span data-ttu-id="93b82-121">Como resultado, el orden de confirmación predeterminado se invierte.</span><span class="sxs-lookup"><span data-stu-id="93b82-121">As a result, the default confirmation order is essentially reversed.</span></span> <span data-ttu-id="93b82-122">Dado que la propiedad <xref:System.Activities.Statements.CompensableActivity> no confirmó explícitamente la tercera actividad <xref:System.Activities.Statements.CompensableActivity> como parte de la actividad <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, se confirma según el orden predeterminado.</span><span class="sxs-lookup"><span data-stu-id="93b82-122">Because the third <xref:System.Activities.Statements.CompensableActivity> was not explicitly confirmed as part of the root <xref:System.Activities.Statements.CompensableActivity> by the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, it is confirmed according to the default order.</span></span> <span data-ttu-id="93b82-123">Sin embargo, dado que es la única actividad <xref:System.Activities.Statements.CompensableActivity> sin confirmar, simplemente significa que se confirma.</span><span class="sxs-lookup"><span data-stu-id="93b82-123">However, because it is the only unconfirmed <xref:System.Activities.Statements.CompensableActivity> this just means it is confirmed.</span></span>  
  
## <a name="scoping-of-variables"></a><span data-ttu-id="93b82-124">Ámbito de variables</span><span class="sxs-lookup"><span data-stu-id="93b82-124">Scoping of Variables</span></span>  
 <span data-ttu-id="93b82-125">En el cuarto escenario se muestra cómo la duración de las variables definidas para una actividad <xref:System.Activities.Statements.CompensableActivity> o uno de sus elementos primarios todavía está dentro del ámbito cuando se ejecutan los controladores de compensación, <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> o <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A>aunque la actividad o el flujo de trabajo se hayan completado.</span><span class="sxs-lookup"><span data-stu-id="93b82-125">The fourth scenario shows how the lifetime of variables defined for a <xref:System.Activities.Statements.CompensableActivity> or one of their parents are still in scope when the <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> or <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> handlers are executed even if the activity has completed or the workflow has completed.</span></span> <span data-ttu-id="93b82-126">El flujo de trabajo consta de una secuencia de dos actividades <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="93b82-126">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="93b82-127">En el cuerpo de la primera, se establece la variable `mySum` en la suma de 5 y 10 y el resultado se imprime.</span><span class="sxs-lookup"><span data-stu-id="93b82-127">In the body of the first, the variable `mySum` is set to the sum of 5 and 10 and the result printed.</span></span> <span data-ttu-id="93b82-128">En el cuerpo de la segunda actividad <xref:System.Activities.Statements.CompensableActivity>, la suma se establece en la suma de la suma existente y 7, y el resultado se imprime.</span><span class="sxs-lookup"><span data-stu-id="93b82-128">In the body of the second <xref:System.Activities.Statements.CompensableActivity>, the sum is set to the sum of the existing sum and 7 and the result printed.</span></span> <span data-ttu-id="93b82-129">Para la primera actividad <xref:System.Activities.Statements.CompensableActivity> se define un controlador de confirmación personalizado, que imprime la suma, resta 7 e imprime la suma de nuevo.</span><span class="sxs-lookup"><span data-stu-id="93b82-129">A custom confirmation handler is defined for the first <xref:System.Activities.Statements.CompensableActivity>, which prints the sum, subtracts 7 and prints the sum again.</span></span> <span data-ttu-id="93b82-130">La inspección de las sumas impresas deja claro que la variable no solo está en el ámbito para los cuerpos de ambas actividades <xref:System.Activities.Statements.CompensableActivity>, sino también del controlador <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>.</span><span class="sxs-lookup"><span data-stu-id="93b82-130">It is clear by inspecting the printed sums that the variable is in scope not only for the bodies of both <xref:System.Activities.Statements.CompensableActivity> but the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> as well.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="93b82-131">Para ejecutar el ejemplo</span><span class="sxs-lookup"><span data-stu-id="93b82-131">To run the sample</span></span>  
  
1.  <span data-ttu-id="93b82-132">Cargue la solución en [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="93b82-132">Load the solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="93b82-133">Ejecute la aplicación ConfirmationSample.exe.</span><span class="sxs-lookup"><span data-stu-id="93b82-133">Run the ConfirmationSample.exe application.</span></span>  
  
3.  <span data-ttu-id="93b82-134">Observe el siguiente resultado:</span><span class="sxs-lookup"><span data-stu-id="93b82-134">Observe the following output:</span></span>  
  
 <span data-ttu-id="93b82-135">**Confirmación explícita: inicio de workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: HandlerEnd de confirmación de workflowCompensableActivity2: confirmación HandlerExplicit compensación: inicio de workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: HandlerEnd de compensación de workflowCompensableActivity2: controlador de confirmación HandlerCustom confirmación: inicio de workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd de workflowCompensableActivity1: confirmación HandlerCompensableActivity2: confirmación HandlerCompensableActivity3: acceso HandlerVariable de confirmación en un controlador de confirmación: Inicio de workflowCompensableActivity1: BodyCompensableActivity1: la suma es: 15CompensableActivity2: BodyCompensableActivity2: agregar 7 a la sumCompensableActivity2: la suma es ahora: 22End de workflowCompensableActivity2: confirmación HandlerCompensableActivity1: Confirmación HandlerCompensableActivity2: la suma es: 22CompensableActivity2: después de restar 12, la suma es ahora: 10Press ENTRAR para salir.**</span><span class="sxs-lookup"><span data-stu-id="93b82-135">**Explicit confirmation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Confirmation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerExplicit compensation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Compensation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerCustom confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd of workflowCompensableActivity1: Confirmation HandlerCompensableActivity2: Confirmation HandlerCompensableActivity3: Confirmation HandlerVariable access in a confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity1: The sum is: 15CompensableActivity2: BodyCompensableActivity2: Adding 7 to the sumCompensableActivity2: The sum is now: 22End of workflowCompensableActivity2: Confirmation HandlerCompensableActivity1: Confirmation HandlerCompensableActivity2: The sum is: 22CompensableActivity2: After subtracting 12 the sum is now: 10Press ENTER to exit.**</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="93b82-136">Puede que los ejemplos ya estén instalados en su equipo.</span><span class="sxs-lookup"><span data-stu-id="93b82-136">The samples may already be installed on your machine.</span></span> <span data-ttu-id="93b82-137">Compruebe el siguiente directorio (predeterminado) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="93b82-137">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="93b82-138">Si no existe este directorio, vaya a [Windows Communication Foundation (WCF) y Windows Workflow Foundation (WF) Samples para .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) para descargar todos los Windows Communication Foundation (WCF) y [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ejemplos.</span><span class="sxs-lookup"><span data-stu-id="93b82-138">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="93b82-139">Este ejemplo se encuentra en el siguiente directorio.</span><span class="sxs-lookup"><span data-stu-id="93b82-139">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Compensation\Confirmation`