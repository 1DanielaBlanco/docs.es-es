---
title: Actividad Policy en .NET Framework 4.5
ms.date: 03/30/2017
ms.assetid: 8e375e0c-d7c1-4d69-88ab-36d52db0aa7e
ms.openlocfilehash: 9d8983f2f1d3f75beffeacfff4b673f6c23c4204
ms.sourcegitcommit: 2350a091ef6459f0fcfd894301242400374d8558
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/21/2018
ms.locfileid: "46562273"
---
# <a name="policy-activity-in-net-framework-45"></a><span data-ttu-id="d46ab-102">Actividad Policy en .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="d46ab-102">Policy Activity in .NET Framework 4.5</span></span>
<span data-ttu-id="d46ab-103">La actividad Policy4 permite Windows Workflow Foundation en [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] (WF 3.5) <xref:System.Workflow.Activities.Rules.RuleSet> objetos para su uso en Windows Workflow Foundation en [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] (WF 4.5) utilizando el motor de reglas que se distribuye con WF 3.5.</span><span class="sxs-lookup"><span data-stu-id="d46ab-103">The Policy4 activity allows Windows Workflow Foundation in [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] (WF 3.5) <xref:System.Workflow.Activities.Rules.RuleSet> objects to be used in Windows Workflow Foundation in [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] (WF 4.5) directly by using the rules engine that is shipped in WF 3.5.</span></span> <span data-ttu-id="d46ab-104">Utilizando esta actividad, puede crear y ejecutar un objeto <xref:System.Workflow.Activities.Rules.RuleSet> de WF 3.5.</span><span class="sxs-lookup"><span data-stu-id="d46ab-104">By using this activity, you can create and execute a WF 3.5 <xref:System.Workflow.Activities.Rules.RuleSet>.</span></span> <span data-ttu-id="d46ab-105">Para obtener más información sobre el motor de reglas de WF 3.5 incluye como parte de Windows Workflow Foundation, lea el apartado introducción al motor de reglas de Windows Workflow Foundation.</span><span class="sxs-lookup"><span data-stu-id="d46ab-105">For more information about WF 3.5 Rules Engine included as part of Windows Workflow Foundation, please read Introduction to the Windows Workflow Foundation Rules Engine.</span></span> <span data-ttu-id="d46ab-106">Para obtener más información sobre cómo migrar reglas a WF [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)], lea [Guía de migración](../../../../docs/framework/windows-workflow-foundation/migration-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="d46ab-106">For more information about migrating rules to WF in [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)], please read [Migration Guidance](../../../../docs/framework/windows-workflow-foundation/migration-guidance.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="d46ab-107">Puede que los ejemplos ya estén instalados en su equipo.</span><span class="sxs-lookup"><span data-stu-id="d46ab-107">The samples may already be installed on your machine.</span></span> <span data-ttu-id="d46ab-108">Compruebe el siguiente directorio (predeterminado) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="d46ab-108">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="d46ab-109">Si no existe este directorio, vaya a [Windows Communication Foundation (WCF) y Windows Workflow Foundation (WF) Samples para .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) para descargar todos los Windows Communication Foundation (WCF) y [!INCLUDE[wf1](../../../../includes/wf1-md.md)] ejemplos.</span><span class="sxs-lookup"><span data-stu-id="d46ab-109">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="d46ab-110">Este ejemplo se encuentra en el siguiente directorio.</span><span class="sxs-lookup"><span data-stu-id="d46ab-110">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\ActivityLibrary\Rules-Policy4`  
  
## <a name="projects-in-this-sample"></a><span data-ttu-id="d46ab-111">Proyectos en este ejemplo</span><span class="sxs-lookup"><span data-stu-id="d46ab-111">Projects in this Sample</span></span>  
  
|<span data-ttu-id="d46ab-112">Nombre del proyecto</span><span class="sxs-lookup"><span data-stu-id="d46ab-112">Project Name</span></span>|<span data-ttu-id="d46ab-113">Descripción</span><span class="sxs-lookup"><span data-stu-id="d46ab-113">Description</span></span>|<span data-ttu-id="d46ab-114">Archivos principales</span><span class="sxs-lookup"><span data-stu-id="d46ab-114">Main Files</span></span>|  
|------------------|-----------------|----------------|  
|<span data-ttu-id="d46ab-115">Policy4</span><span class="sxs-lookup"><span data-stu-id="d46ab-115">Policy4</span></span>|<span data-ttu-id="d46ab-116">Contiene la actividad Policy4 y su diseñador de [!INCLUDE[wf1](../../../../includes/wf1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d46ab-116">Contains the Policy4 activity and its [!INCLUDE[wf1](../../../../includes/wf1-md.md)] designer.</span></span>|<span data-ttu-id="d46ab-117">**Policy4.cs**: definición de la actividad Policy4.</span><span class="sxs-lookup"><span data-stu-id="d46ab-117">**Policy4.cs**: Policy4 activity definition.</span></span><br /><br /> <span data-ttu-id="d46ab-118">**PolicyDesigner.xaml**: diseñador personalizado para la actividad Policy4.</span><span class="sxs-lookup"><span data-stu-id="d46ab-118">**PolicyDesigner.xaml**: Custom designer for Policy4 activity.</span></span> <span data-ttu-id="d46ab-119">Utiliza el editor de reglas ([clase RuleSetDialog](https://go.microsoft.com/fwlink/?LinkId=150378)) desde [!INCLUDE[wf1](../../../../includes/wf1-md.md)] motor de reglas.</span><span class="sxs-lookup"><span data-stu-id="d46ab-119">It uses the rules editor ([RuleSetDialog Class](https://go.microsoft.com/fwlink/?LinkId=150378)) from [!INCLUDE[wf1](../../../../includes/wf1-md.md)] rules engine.</span></span>|  
|<span data-ttu-id="d46ab-120">ImperativeCodeClientSample</span><span class="sxs-lookup"><span data-stu-id="d46ab-120">ImperativeCodeClientSample</span></span>|<span data-ttu-id="d46ab-121">Aplicación cliente de ejemplo que configura y ejecuta un flujo de trabajo mediante una aplicación Policy4 que utiliza el código C# imperativo (no se utiliza ningún diseñador de [!INCLUDE[wf1](../../../../includes/wf1-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="d46ab-121">Sample client application that configures and runs a workflow using a Policy4 application using imperative C# code (no [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Designer used).</span></span>|<span data-ttu-id="d46ab-122">**ApplyDiscount.rules**: archivo con [!INCLUDE[wf1](../../../../includes/wf1-md.md)] definiciones de reglas.</span><span class="sxs-lookup"><span data-stu-id="d46ab-122">**ApplyDiscount.rules**: File with [!INCLUDE[wf1](../../../../includes/wf1-md.md)] rule definitions.</span></span><br /><br /> <span data-ttu-id="d46ab-123">**Order.cs**: tipo que representa un pedido de cliente.</span><span class="sxs-lookup"><span data-stu-id="d46ab-123">**Order.cs**: Type that represents a customer order.</span></span> <span data-ttu-id="d46ab-124">Las reglas se aplican a los objetos de este tipo.</span><span class="sxs-lookup"><span data-stu-id="d46ab-124">Rules are applied to objects of this type.</span></span><br /><br /> <span data-ttu-id="d46ab-125">**Program.cs**: configura y ejecuta un flujo de trabajo que tiene una actividad Policy4 para aplicar las reglas definidas en ApplyDiscount.rules a las instancias de objetos Order.</span><span class="sxs-lookup"><span data-stu-id="d46ab-125">**Program.cs**: Configures and runs a workflow that has a Policy4 activity to apply rules defined in ApplyDiscount.rules to instances of Order objects.</span></span><br /><br /> <span data-ttu-id="d46ab-126">**App.config**: archivo de configuración con la ruta de acceso del archivo de reglas.</span><span class="sxs-lookup"><span data-stu-id="d46ab-126">**App.config**: Configuration file with the path of the rules file.</span></span>|  
|<span data-ttu-id="d46ab-127">DesignerClientSample</span><span class="sxs-lookup"><span data-stu-id="d46ab-127">DesignerClientSample</span></span>|<span data-ttu-id="d46ab-128">Aplicación cliente de ejemplo que configura y ejecuta un flujo de trabajo utilizando una aplicación Policy4 en el diseñador de [!INCLUDE[wf1](../../../../includes/wf1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d46ab-128">Sample client application that configures and runs a workflow using a Policy4 application in the [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Designer.</span></span>|<span data-ttu-id="d46ab-129">**Sequence1.XAML**: flujo de trabajo secuencial que utiliza una actividad Policy4 para realizar evaluaciones de reglas.</span><span class="sxs-lookup"><span data-stu-id="d46ab-129">**Sequence1.xaml**: Sequential workflow that uses a Policy4 activity to perform rule evaluations.</span></span><br /><br /> <span data-ttu-id="d46ab-130">`Program.cs`: ejecuta una instancia de flujo de trabajo definida en Sequence1.xaml.</span><span class="sxs-lookup"><span data-stu-id="d46ab-130">`Program.cs`: Runs an instance of the workflow defined in Sequence1.xaml.</span></span>|  
  
## <a name="the-policy4-activity"></a><span data-ttu-id="d46ab-131">La actividad Policy4</span><span class="sxs-lookup"><span data-stu-id="d46ab-131">The Policy4 Activity</span></span>  
 <span data-ttu-id="d46ab-132">La actividad Policy4 es una clase que se deriva de <xref:System.Activities.NativeActivity%601> y permite a los flujos de trabajo ejecutar RuleSets de [!INCLUDE[wf1](../../../../includes/wf1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d46ab-132">The Policy4 activity is a class that derives from <xref:System.Activities.NativeActivity%601> that allows workflows to execute [!INCLUDE[wf1](../../../../includes/wf1-md.md)] RuleSets.</span></span> <span data-ttu-id="d46ab-133">El siguiente ejemplo de código es una definición simplificada del modelo de objetos público de la actividad.</span><span class="sxs-lookup"><span data-stu-id="d46ab-133">The following code example is a simplified definition of the public OM of the activity.</span></span>  
  
```csharp  
public class Policy4Activity<TResult>: NativeActivity<TResult>  
{  
    public RuleSet RuleSet  
  
    [IsRequired]  
    public InArgument Input  
  
    public OutArgument<ValidationErrorCollection> ValidationErrors  
}  
```  
  
|<span data-ttu-id="d46ab-134">Propiedad</span><span class="sxs-lookup"><span data-stu-id="d46ab-134">Property</span></span>|<span data-ttu-id="d46ab-135">Descripción</span><span class="sxs-lookup"><span data-stu-id="d46ab-135">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="d46ab-136">RuleSet</span><span class="sxs-lookup"><span data-stu-id="d46ab-136">RuleSet</span></span>|<span data-ttu-id="d46ab-137">WF [RuleSet Class](https://go.microsoft.com/fwlink/?LinkId=150379) para .NET Framework 3.5 que se evaluará cuando se ejecuta la actividad.</span><span class="sxs-lookup"><span data-stu-id="d46ab-137">The WF [RuleSet Class](https://go.microsoft.com/fwlink/?LinkId=150379) for .NET Framework 3.5 to be evaluated when the activity is executed.</span></span>|  
|<span data-ttu-id="d46ab-138">TargetObject</span><span class="sxs-lookup"><span data-stu-id="d46ab-138">TargetObject</span></span>|<span data-ttu-id="d46ab-139">El objeto con el que las reglas en el [RuleSet Class](https://go.microsoft.com/fwlink/?LinkId=150379) se evalúan.</span><span class="sxs-lookup"><span data-stu-id="d46ab-139">The object against which the Rules in the [RuleSet Class](https://go.microsoft.com/fwlink/?LinkId=150379) are evaluated.</span></span>|  
|<span data-ttu-id="d46ab-140">ValidationError</span><span class="sxs-lookup"><span data-stu-id="d46ab-140">ValidationError</span></span>|<span data-ttu-id="d46ab-141">La lista de errores de validación devuelta por la [!INCLUDE[wf1](../../../../includes/wf1-md.md)] motor de reglas para .NET Framework 3.5 al validar el [RuleSet Class](https://go.microsoft.com/fwlink/?LinkId=150379) con el objeto de destino antes de la ejecución.</span><span class="sxs-lookup"><span data-stu-id="d46ab-141">The list of validation errors returned by the [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Rule Engine for .NET Framework 3.5 when validating the [RuleSet Class](https://go.microsoft.com/fwlink/?LinkId=150379) against the target object before execution.</span></span>|  
  
## <a name="policy4-activity-designer"></a><span data-ttu-id="d46ab-142">Diseñador de la actividad Policy4</span><span class="sxs-lookup"><span data-stu-id="d46ab-142">Policy4 Activity Designer</span></span>  
 <span data-ttu-id="d46ab-143">El diseñador de Policy4 agrega la capacidad de configurar una actividad Policy4 sin necesidad de escribir código.</span><span class="sxs-lookup"><span data-stu-id="d46ab-143">The Policy4 designer adds the capability to configure a Policy4 activity without the need to write code.</span></span> <span data-ttu-id="d46ab-144">Después de compilar la solución, se puede encontrar en el cuadro de herramientas en la sección **Microsoft.Samples.Activities.Rules**.</span><span class="sxs-lookup"><span data-stu-id="d46ab-144">After building the solution, it can be found in the toolbox in the section **Microsoft.Samples.Activities.Rules**.</span></span>  
  
 <span data-ttu-id="d46ab-145">El diseñador de WF le permite configurar un objeto de destino y un conjunto de reglas.</span><span class="sxs-lookup"><span data-stu-id="d46ab-145">The WF Designer allows you to configure a target object and a RuleSet.</span></span> <span data-ttu-id="d46ab-146">Cuando el **editar RuleSet** botón se hizo clic, WF [clase RuleSetDialog](https://go.microsoft.com/fwlink/?LinkId=150378) para [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] se muestra.</span><span class="sxs-lookup"><span data-stu-id="d46ab-146">When the **Edit RuleSet** button is clicked, the WF [RuleSetDialog Class](https://go.microsoft.com/fwlink/?LinkId=150378) for [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] is displayed.</span></span> <span data-ttu-id="d46ab-147">Este diálogo representa el editor de reglas de [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] re-hospedado.</span><span class="sxs-lookup"><span data-stu-id="d46ab-147">This dialog is the re-hosted [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] Rules Editor.</span></span> <span data-ttu-id="d46ab-148">Utilice el editor para crear y modificar las reglas que la actividad Policy4 ejecuta.</span><span class="sxs-lookup"><span data-stu-id="d46ab-148">Use the editor to create and edit the rules that the Policy4 activity executes.</span></span>  
  
## <a name="using-this-sample"></a><span data-ttu-id="d46ab-149">Utilizar este ejemplo</span><span class="sxs-lookup"><span data-stu-id="d46ab-149">Using this Sample</span></span>  
 <span data-ttu-id="d46ab-150">No se exige ninguna configuración especial para ejecutar este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d46ab-150">No special set up is required to run this sample.</span></span> <span data-ttu-id="d46ab-151">Simplemente abra la solución en Visual Studio y presione F5 para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d46ab-151">Just open the solution in Visual Studio, and press F5 to run the application.</span></span>  
  
 <span data-ttu-id="d46ab-152">Este ejemplo contiene dos aplicaciones cliente: ImperativeCodeClientSample y DesignerClientSample.</span><span class="sxs-lookup"><span data-stu-id="d46ab-152">This sample contains two client applications: ImperativeCodeClientSample and DesignerClientSample.</span></span> <span data-ttu-id="d46ab-153">El cliente ImperativeCodeClientSample muestra cómo configurar y ejecutar la actividad Policy40 utilizando el código imperativo C#.</span><span class="sxs-lookup"><span data-stu-id="d46ab-153">The ImperativeCodeClientSample client shows how to configure and run the Policy40 activity using C# imperative code.</span></span> <span data-ttu-id="d46ab-154">DesignerClientSample muestra cómo configurar y ejecutar la actividad Policy4 mediante el diseñador.</span><span class="sxs-lookup"><span data-stu-id="d46ab-154">The DesignerClientSample shows how to configure and run the Policy4 activity using the designer.</span></span>  
  
#### <a name="to-run-the-imperativecodeclientsample-client-application"></a><span data-ttu-id="d46ab-155">Para ejecutar la aplicación cliente ImperativeCodeClientSample</span><span class="sxs-lookup"><span data-stu-id="d46ab-155">To run the ImperativeCodeClientSample client application</span></span>  
  
1.  <span data-ttu-id="d46ab-156">Abra el archivo de solución Policy4Sample.sln con [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d46ab-156">Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the Policy4Sample.sln solution file.</span></span>  
  
2.  <span data-ttu-id="d46ab-157">En **el Explorador de soluciones**, haga clic en el **ImperativeCodeClientSample** del proyecto y, a continuación, seleccione **establecer como proyecto de inicio**.</span><span class="sxs-lookup"><span data-stu-id="d46ab-157">In **Solution Explorer**, right-click the **ImperativeCodeClientSample** project and then select **Set as startup project**.</span></span>  
  
3.  <span data-ttu-id="d46ab-158">Presione CTRL+F5 para ejecutar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="d46ab-158">To run the project, press CTRL+F5.</span></span>  
  
#### <a name="to-run-the-imperativecodeclientsample-client-application"></a><span data-ttu-id="d46ab-159">Para ejecutar la aplicación cliente ImperativeCodeClientSample</span><span class="sxs-lookup"><span data-stu-id="d46ab-159">To run the ImperativeCodeClientSample client application</span></span>  
  
1.  <span data-ttu-id="d46ab-160">Abra el archivo de solución Policy4Sample.sln con [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d46ab-160">Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the Policy4Sample.sln solution file.</span></span>  
  
2.  <span data-ttu-id="d46ab-161">En **el Explorador de soluciones**, haga clic en el **DesignerClientSample** proyecto.</span><span class="sxs-lookup"><span data-stu-id="d46ab-161">In **Solution Explorer**, right-click the **DesignerClientSample** project.</span></span>  
  
    -   <span data-ttu-id="d46ab-162">Seleccione **establecer como proyecto de inicio**.</span><span class="sxs-lookup"><span data-stu-id="d46ab-162">Select **Set as startup project**.</span></span>  
  
3.  <span data-ttu-id="d46ab-163">Presione CTRL+MAYÚS+B para compilar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="d46ab-163">To compile the project, press CTRL+SHIFT+B.</span></span>  
  
4.  <span data-ttu-id="d46ab-164">Presione CTRL+F5 para ejecutar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="d46ab-164">To run the project, press CTRL+F5.</span></span>