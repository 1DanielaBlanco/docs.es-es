---
title: Host RedLIne WorkflowApplication
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f7b362be-cb42-40d7-b9ef-cfc4aed2455b
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: f8426dd3835f53eeb85711a691c878ce2b877d09
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/22/2017
---
# <a name="workflowapplication-readline-host"></a><span data-ttu-id="99a47-102">Host RedLIne WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="99a47-102">WorkflowApplication ReadLine Host</span></span>
<span data-ttu-id="99a47-103">Este ejemplo es un host ReadLine genérico.</span><span class="sxs-lookup"><span data-stu-id="99a47-103">This sample is a generic ReadLine host.</span></span> <span data-ttu-id="99a47-104">Puede cargar y ejecutar cualquier flujo de trabajo mediante la actividad `ReadLine` incluida (u otras actividades similares que reciban datos de marcadores reanudados con cadenas).</span><span class="sxs-lookup"><span data-stu-id="99a47-104">You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings).</span></span> <span data-ttu-id="99a47-105">El resultado de la actividad `WriteLine` o cualquier escritura que se realice en la extensión <xref:System.Activities.Statements.WriteLine.TextWriter%2A> se dirige a la ventana del host.</span><span class="sxs-lookup"><span data-stu-id="99a47-105">Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window.</span></span> <span data-ttu-id="99a47-106">Cuando una instancia está inactiva, los marcadores disponibles para esa instancia aparecen en un cuadro combinado.</span><span class="sxs-lookup"><span data-stu-id="99a47-106">When an instance is idle, the available bookmarks for that instance appear in a combo box.</span></span> <span data-ttu-id="99a47-107">Seleccione un marcador, escriba algún texto o presione el botón de reanudación del marcador para continuar con la ejecución del flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="99a47-107">Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow.</span></span> <span data-ttu-id="99a47-108">También puede cancelar, anular o finalizar un flujo de trabajo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="99a47-108">You can also cancel, abort, or terminate a selected workflow.</span></span> <span data-ttu-id="99a47-109">La persistencia está activada de forma predeterminada; puede cerrar el host y volver a iniciarlo, y la lista de instancias se rellena con las instancias almacenadas en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="99a47-109">Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database.</span></span> <span data-ttu-id="99a47-110">El seguimiento se utiliza para generar eventos de nivel de <xref:System.Activities.WorkflowApplication> en el host con la opción de agregar seguimiento detallado en el nivel de actividad.</span><span class="sxs-lookup"><span data-stu-id="99a47-110">Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="99a47-111">Detalles del ejemplo</span><span class="sxs-lookup"><span data-stu-id="99a47-111">Sample Details</span></span>  
 <span data-ttu-id="99a47-112">Hay dos niveles en este host: la vista y el administrador de instancias.</span><span class="sxs-lookup"><span data-stu-id="99a47-112">There are two layers to this host: the view and the instance manager.</span></span> <span data-ttu-id="99a47-113">La vista consta de las clases `HostView` y `WorkflowApplicationInfo`.</span><span class="sxs-lookup"><span data-stu-id="99a47-113">The view consists of the `HostView` and `WorkflowApplicationInfo` classes.</span></span> <span data-ttu-id="99a47-114">El patrón general para este host es que la clase `HostView` muestre al usuario las opciones disponibles en función de los objetos `WorkflowApplicationInfo` que se mantienen razonablemente en sincronización con las instancias que representan.</span><span class="sxs-lookup"><span data-stu-id="99a47-114">The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent.</span></span> <span data-ttu-id="99a47-115">El nivel de administrador de instancias se compone de la clase `WorkflowApplicationManager`, que es el núcleo de todas las comunicaciones del host, y la clase `WorkflowDefinitionExtension`, que conserva la relación entre una instancia y la definición del programa con el que se inició y algunas otras clases.</span><span class="sxs-lookup"><span data-stu-id="99a47-115">The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes.</span></span> <span data-ttu-id="99a47-116">`HostView` llama a las operaciones de control en `WorkflowApplicationManager`.</span><span class="sxs-lookup"><span data-stu-id="99a47-116">The `HostView` calls control operations on the `WorkflowApplicationManager`.</span></span> <span data-ttu-id="99a47-117">Estas llamadas suelen ser asincrónicas para mantener una interfaz de usuario que siga respondiendo.</span><span class="sxs-lookup"><span data-stu-id="99a47-117">These calls are typically asynchronous to maintain a responsive user interface.</span></span> <span data-ttu-id="99a47-118">Cuando las llamadas asincrónicas se completan, `WorkflowApplicationManager` realiza llamadas en el nivel de vista a través de una interfaz bien definida (`IHostView`).</span><span class="sxs-lookup"><span data-stu-id="99a47-118">When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`).</span></span> <span data-ttu-id="99a47-119">La clase `HostView` a menudo envía estas llamadas de la clase `WorkflowApplicationManager` al subproceso de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="99a47-119">The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread.</span></span> <span data-ttu-id="99a47-120">La escritura de texto se realiza en los objetos <xref:System.Activities.Statements.WriteLine.TextWriter%2A> seguros para subprocesos proporcionados por la clase `HostView`.</span><span class="sxs-lookup"><span data-stu-id="99a47-120">Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class.</span></span> <span data-ttu-id="99a47-121">La interfaz de usuario no es la única que genera eventos.</span><span class="sxs-lookup"><span data-stu-id="99a47-121">The user interface is not the only thing generating events.</span></span> <span data-ttu-id="99a47-122">Los objetos <xref:System.Activities.WorkflowApplication> también señalan a `WorkflowApplicationManager` cuando pasan al estado `Idle`, `Complete` o `Aborted`, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="99a47-122">The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example.</span></span> <span data-ttu-id="99a47-123">La clase `WorkflowApplicationManager` sale del subproceso de evento enviando el trabajo de limpieza o actualización al host.</span><span class="sxs-lookup"><span data-stu-id="99a47-123">The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host.</span></span>  
  
 <span data-ttu-id="99a47-124">La clase <xref:System.Activities.WorkflowApplication> facilita la grabación del archivo utilizado para iniciar `WorkflowDefinitionExtension`.</span><span class="sxs-lookup"><span data-stu-id="99a47-124">The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class.</span></span> <span data-ttu-id="99a47-125">Implementa la interfaz <xref:System.Activities.Persistence.PersistenceIOParticipant> para participar en la persistencia y conservar la ruta de acceso a la definición de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="99a47-125">It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition.</span></span>  
  
 <span data-ttu-id="99a47-126">El método `WorkflowApplicationManager.Load` utiliza la ruta de acceso almacenada para crear instancias de los programas de flujo de trabajo requeridos para cargar los objetos <xref:System.Activities.WorkflowApplication> inacabados.</span><span class="sxs-lookup"><span data-stu-id="99a47-126">The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="99a47-127">Configurar, compilar y ejecutar el ejemplo</span><span class="sxs-lookup"><span data-stu-id="99a47-127">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="99a47-128">En este ejemplo se requiere instalar SQL Express.</span><span class="sxs-lookup"><span data-stu-id="99a47-128">This sample requires SQL Express to be installed.</span></span> <span data-ttu-id="99a47-129">SQL Express viene con [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="99a47-129">SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="99a47-130">Abra un símbolo del sistema de Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="99a47-130">Open a Visual Studio 2010 command prompt.</span></span>  
  
3.  <span data-ttu-id="99a47-131">Navegue hasta el directorio de ejemplo (\WF\Basic\Execution\ControllingWorkflowApplications) y ejecute CreateInstanceStore.cmd.</span><span class="sxs-lookup"><span data-stu-id="99a47-131">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.</span></span>  
  
4.  <span data-ttu-id="99a47-132">El script CreateInstanceStore.cmd intenta crear la base de datos en la instancia predeterminada de SQL Server 2008 Express.</span><span class="sxs-lookup"><span data-stu-id="99a47-132">The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.</span></span> <span data-ttu-id="99a47-133">Si desea instalar la base de datos en una instancia diferente, modifique el script.</span><span class="sxs-lookup"><span data-stu-id="99a47-133">If you want to install the database on a different instance, modify the script to do so.</span></span>  
  
5.  <span data-ttu-id="99a47-134">Compile el proyecto WorkflowApplicationReadLineHost y ejecútelo desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="99a47-134">Compile the WorkflowApplicationReadLineHost project and run it from the command line.</span></span>  
  
6.  <span data-ttu-id="99a47-135">Cuando se esté ejecutando, puede optar por activar o desactivar la persistencia.</span><span class="sxs-lookup"><span data-stu-id="99a47-135">Once running, you can optionally turn persistence off or on.</span></span> <span data-ttu-id="99a47-136">Además, dispone de la opción de activar o desactivar el seguimiento de actividad detallado.</span><span class="sxs-lookup"><span data-stu-id="99a47-136">Further, you can optionally turn detailed activity tracking on or off.</span></span>  
  
7.  <span data-ttu-id="99a47-137">Presione el botón de puntos suspensivos junto a la **ejecutar** botón para examinar un flujo de trabajo definido en un archivo XAML</span><span class="sxs-lookup"><span data-stu-id="99a47-137">Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file</span></span>  
  
     <span data-ttu-id="99a47-138">En la carpeta SampleWorkflows se pueden encontrar dos ejemplos.</span><span class="sxs-lookup"><span data-stu-id="99a47-138">Two samples can be found under the SampleWorkflows folder.</span></span> <span data-ttu-id="99a47-139">El ejemplo parallel1.xaml pasa a estado inactivo.</span><span class="sxs-lookup"><span data-stu-id="99a47-139">The parallel1.xaml example goes idle.</span></span>  
  
8.  <span data-ttu-id="99a47-140">Una vez seleccionado un ejemplo, presione el **ejecutar** botón.</span><span class="sxs-lookup"><span data-stu-id="99a47-140">Once an example is selected, press the **Run** button.</span></span>  
  
9. <span data-ttu-id="99a47-141">Si o cuando el flujo de trabajo pasa a estado inactivo, el **marcadores** cuadro combinado se rellena con los marcadores disponibles.</span><span class="sxs-lookup"><span data-stu-id="99a47-141">If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks.</span></span>  
  
10. <span data-ttu-id="99a47-142">Las opciones en este punto son reanudar un marcador, cancelar, interrumpir o finalizar el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="99a47-142">The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow.</span></span> <span data-ttu-id="99a47-143">También puede cerrar el host y reiniciarlo.</span><span class="sxs-lookup"><span data-stu-id="99a47-143">You can also shut down the host and restart it.</span></span> <span data-ttu-id="99a47-144">Si la persistencia permanece activada, las instancias se descargan cuando se apaga y se recargan cuando se inicia.</span><span class="sxs-lookup"><span data-stu-id="99a47-144">If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.</span></span>  
  
     <span data-ttu-id="99a47-145">Para reanudar un marcador, seleccione el marcador deseado, escriba un valor en el cuadro de texto situado junto al cuadro combinado y presione **reanudar marcador**.</span><span class="sxs-lookup"><span data-stu-id="99a47-145">To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**.</span></span>  
  
#### <a name="to-remove-the-instance-store-database"></a><span data-ttu-id="99a47-146">Para quitar la base de datos del almacén de instancias</span><span class="sxs-lookup"><span data-stu-id="99a47-146">To remove the instance store database</span></span>  
  
1.  <span data-ttu-id="99a47-147">Abra un símbolo del sistema de Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="99a47-147">Open a Visual Studio 2010 command prompt.</span></span>  
  
2.  <span data-ttu-id="99a47-148">Navegue hasta el directorio de ejemplo (\WF\Basic\Execution\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.</span><span class="sxs-lookup"><span data-stu-id="99a47-148">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="99a47-149">Puede que los ejemplos ya estén instalados en su equipo.</span><span class="sxs-lookup"><span data-stu-id="99a47-149">The samples may already be installed on your machine.</span></span> <span data-ttu-id="99a47-150">Compruebe el siguiente directorio (predeterminado) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="99a47-150">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="99a47-151">Si no existe este directorio, vaya a la página [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) [Ejemplos de Windows Communication Foundation (WCF) y Windows Workflow Foundation (WF) para .NET Framework 4] para descargar todos los ejemplos de [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] y [!INCLUDE[wf1](../../../../includes/wf1-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="99a47-151">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="99a47-152">Este ejemplo se encuentra en el siguiente directorio.</span><span class="sxs-lookup"><span data-stu-id="99a47-152">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Execution\ControllingWorkflowApplications`