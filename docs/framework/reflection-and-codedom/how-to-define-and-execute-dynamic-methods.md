---
title: "Cómo: Definir y ejecutar métodos dinámicos"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- reflection emit, dynamic methods
- dynamic methods
ms.assetid: 07d08a99-62c5-4254-bce2-2a75e55a18ab
caps.latest.revision: 12
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 67e909a7b64500bba533290061652e82ffde07a5
ms.contentlocale: es-es
ms.lasthandoff: 07/28/2017

---
# <a name="how-to-define-and-execute-dynamic-methods"></a><span data-ttu-id="db025-102">Cómo: Definir y ejecutar métodos dinámicos</span><span class="sxs-lookup"><span data-stu-id="db025-102">How to: Define and Execute Dynamic Methods</span></span>
<span data-ttu-id="db025-103">En los procedimientos siguientes se muestra cómo definir y ejecutar un método dinámico simple y un método dinámico enlazado a una instancia de una clase.</span><span class="sxs-lookup"><span data-stu-id="db025-103">The following procedures show how to define and execute a simple dynamic method and a dynamic method bound to an instance of a class.</span></span> <span data-ttu-id="db025-104">Para obtener más información sobre los métodos dinámicos, vea la clase <xref:System.Reflection.Emit.DynamicMethod> y [Reflection Emit Dynamic Method Scenarios](http://msdn.microsoft.com/en-us/7c27ea3d-0f24-4bf3-8ceb-f49d33faca5e) (Escenarios de métodos dinámicos de emisión de reflexión).</span><span class="sxs-lookup"><span data-stu-id="db025-104">For more information on dynamic methods, see the <xref:System.Reflection.Emit.DynamicMethod> class and [Reflection Emit Dynamic Method Scenarios](http://msdn.microsoft.com/en-us/7c27ea3d-0f24-4bf3-8ceb-f49d33faca5e).</span></span>  
  
### <a name="to-define-and-execute-a-dynamic-method"></a><span data-ttu-id="db025-105">Para definir y ejecutar un método dinámico</span><span class="sxs-lookup"><span data-stu-id="db025-105">To define and execute a dynamic method</span></span>  
  
1.  <span data-ttu-id="db025-106">Declare un tipo delegado para ejecutar el método.</span><span class="sxs-lookup"><span data-stu-id="db025-106">Declare a delegate type to execute the method.</span></span> <span data-ttu-id="db025-107">Considere la posibilidad de usar un delegado genérico para minimizar el número de tipos delegados que necesita declarar.</span><span class="sxs-lookup"><span data-stu-id="db025-107">Consider using a generic delegate to minimize the number of delegate types you need to declare.</span></span> <span data-ttu-id="db025-108">El código siguiente declara dos tipos delegados que podrían usarse para el método `SquareIt`, y uno de ellos es genérico.</span><span class="sxs-lookup"><span data-stu-id="db025-108">The following code declares two delegate types that could be used for the `SquareIt` method, and one of them is generic.</span></span>  
  
     <span data-ttu-id="db025-109">[!code-cpp[DynamicMethodHowTo#2](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#2)] [!code-csharp[DynamicMethodHowTo#2](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#2)] [!code-vb[DynamicMethodHowTo#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#2)]</span><span class="sxs-lookup"><span data-stu-id="db025-109">[!code-cpp[DynamicMethodHowTo#2](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#2)]  [!code-csharp[DynamicMethodHowTo#2](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#2)]  [!code-vb[DynamicMethodHowTo#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#2)]</span></span>  
  
2.  <span data-ttu-id="db025-110">Cree una matriz que especifique los tipos de parámetro para el método dinámico.</span><span class="sxs-lookup"><span data-stu-id="db025-110">Create an array that specifies the parameter types for the dynamic method.</span></span> <span data-ttu-id="db025-111">En este ejemplo, el único parámetro es `int` (`Integer` en Visual Basic), por lo que la matriz solo tiene un elemento.</span><span class="sxs-lookup"><span data-stu-id="db025-111">In this example, the only parameter is an `int` (`Integer` in Visual Basic), so the array has only one element.</span></span>  
  
     <span data-ttu-id="db025-112">[!code-cpp[DynamicMethodHowTo#3](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#3)]  [!code-csharp[DynamicMethodHowTo#3](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#3)] [!code-vb[DynamicMethodHowTo#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#3)]</span><span class="sxs-lookup"><span data-stu-id="db025-112">[!code-cpp[DynamicMethodHowTo#3](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#3)]  [!code-csharp[DynamicMethodHowTo#3](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#3)]  [!code-vb[DynamicMethodHowTo#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#3)]</span></span>  
  
3.  <span data-ttu-id="db025-113">Creará un control <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="db025-113">Create a <xref:System.Reflection.Emit.DynamicMethod>.</span></span> <span data-ttu-id="db025-114">En este ejemplo, el método se denomina `SquareIt`.</span><span class="sxs-lookup"><span data-stu-id="db025-114">In this example the method is named `SquareIt`.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="db025-115">No es necesario asignar un nombre a los métodos dinámicos, y estos no se pueden invocar por su nombre.</span><span class="sxs-lookup"><span data-stu-id="db025-115">It is not necessary to give dynamic methods names, and they cannot be invoked by name.</span></span> <span data-ttu-id="db025-116">Se admite que varios métodos dinámicos tengan el mismo nombre,</span><span class="sxs-lookup"><span data-stu-id="db025-116">Multiple dynamic methods can have the same name.</span></span> <span data-ttu-id="db025-117">pero el nombre aparece en pilas de llamadas y puede ser útil para la depuración.</span><span class="sxs-lookup"><span data-stu-id="db025-117">However, the name appears in call stacks and can be useful for debugging.</span></span>  
  
     <span data-ttu-id="db025-118">El tipo del valor devuelto se especifica como `long`.</span><span class="sxs-lookup"><span data-stu-id="db025-118">The type of the return value is specified as `long`.</span></span> <span data-ttu-id="db025-119">El método está asociado con el módulo que contiene la clase `Example`, que contiene el código de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="db025-119">The method is associated with the module that contains the `Example` class, which contains the example code.</span></span> <span data-ttu-id="db025-120">Se puede especificar cualquier módulo cargado.</span><span class="sxs-lookup"><span data-stu-id="db025-120">Any loaded module could be specified.</span></span> <span data-ttu-id="db025-121">El método dinámico actúa como un método `static` de nivel de módulo (`Shared` en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="db025-121">The dynamic method acts like a module-level `static` method (`Shared` in Visual Basic).</span></span>  
  
     <span data-ttu-id="db025-122">[!code-cpp[DynamicMethodHowTo#4](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#4)] [!code-csharp[DynamicMethodHowTo#4](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#4)] [!code-vb[DynamicMethodHowTo#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#4)]</span><span class="sxs-lookup"><span data-stu-id="db025-122">[!code-cpp[DynamicMethodHowTo#4](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#4)]  [!code-csharp[DynamicMethodHowTo#4](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#4)]  [!code-vb[DynamicMethodHowTo#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#4)]</span></span>  
  
4.  <span data-ttu-id="db025-123">Emita el cuerpo del método.</span><span class="sxs-lookup"><span data-stu-id="db025-123">Emit the method body.</span></span> <span data-ttu-id="db025-124">En este ejemplo, se usa un objeto <xref:System.Reflection.Emit.ILGenerator> para emitir el Lenguaje Intermedio de Microsoft (MSIL).</span><span class="sxs-lookup"><span data-stu-id="db025-124">In this example, an <xref:System.Reflection.Emit.ILGenerator> object is used to emit the Microsoft intermediate language (MSIL).</span></span> <span data-ttu-id="db025-125">Como alternativa, se puede usar un objeto <xref:System.Reflection.Emit.DynamicILInfo> junto con generadores de código no administrado para emitir el cuerpo del método para un <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="db025-125">Alternatively, a <xref:System.Reflection.Emit.DynamicILInfo> object can be used in conjunction with unmanaged code generators to emit the method body for a <xref:System.Reflection.Emit.DynamicMethod>.</span></span>  
  
     <span data-ttu-id="db025-126">En este ejemplo, MSIL carga el argumento (que es `int`) en la pila, lo convierte en `long`, duplica `long` y multiplica los dos números.</span><span class="sxs-lookup"><span data-stu-id="db025-126">The MSIL in this example loads the argument, which is an `int`, onto the stack, converts it to a `long`, duplicates the `long`, and multiplies the two numbers.</span></span> <span data-ttu-id="db025-127">Esto deja el resultado al cuadrado en la pila, y lo único que tiene que hacer el método es devolverlo.</span><span class="sxs-lookup"><span data-stu-id="db025-127">This leaves the squared result on the stack, and all the method has to do is return.</span></span>  
  
     <span data-ttu-id="db025-128">[!code-cpp[DynamicMethodHowTo#5](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#5)] [!code-csharp[DynamicMethodHowTo#5](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#5)] [!code-vb[DynamicMethodHowTo#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#5)]</span><span class="sxs-lookup"><span data-stu-id="db025-128">[!code-cpp[DynamicMethodHowTo#5](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#5)]  [!code-csharp[DynamicMethodHowTo#5](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#5)]  [!code-vb[DynamicMethodHowTo#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#5)]</span></span>  
  
5.  <span data-ttu-id="db025-129">Llame al método <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A> para crear una instancia del delegado (declarado en el paso 1) que represente el método dinámico.</span><span class="sxs-lookup"><span data-stu-id="db025-129">Create an instance of the delegate (declared in step 1) that represents the dynamic method by calling the <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A> method.</span></span> <span data-ttu-id="db025-130">La creación del delegado finaliza el método y todos los intentos posteriores de cambiar el método (por ejemplo, mediante la adición de MSIL) se omiten.</span><span class="sxs-lookup"><span data-stu-id="db025-130">Creating the delegate completes the method, and any further attempts to change the method — for example, adding more MSIL — are ignored.</span></span> <span data-ttu-id="db025-131">El código siguiente crea el delegado y lo invoca mediante un delegado genérico.</span><span class="sxs-lookup"><span data-stu-id="db025-131">The following code creates the delegate and invokes it, using a generic delegate.</span></span>  
  
     <span data-ttu-id="db025-132">[!code-cpp[DynamicMethodHowTo#6](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#6)] [!code-csharp[DynamicMethodHowTo#6](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#6)] [!code-vb[DynamicMethodHowTo#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#6)]</span><span class="sxs-lookup"><span data-stu-id="db025-132">[!code-cpp[DynamicMethodHowTo#6](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#6)]  [!code-csharp[DynamicMethodHowTo#6](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#6)]  [!code-vb[DynamicMethodHowTo#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#6)]</span></span>  
  
### <a name="to-define-and-execute-a-dynamic-method-that-is-bound-to-an-object"></a><span data-ttu-id="db025-133">Para definir y ejecutar un método dinámico enlazado a un objeto</span><span class="sxs-lookup"><span data-stu-id="db025-133">To define and execute a dynamic method that is bound to an object</span></span>  
  
1.  <span data-ttu-id="db025-134">Declare un tipo delegado para ejecutar el método.</span><span class="sxs-lookup"><span data-stu-id="db025-134">Declare a delegate type to execute the method.</span></span> <span data-ttu-id="db025-135">Considere la posibilidad de usar un delegado genérico para minimizar el número de tipos delegados que necesita declarar.</span><span class="sxs-lookup"><span data-stu-id="db025-135">Consider using a generic delegate to minimize the number of delegate types you need to declare.</span></span> <span data-ttu-id="db025-136">El código siguiente declara un tipo delegado genérico que puede usarse para ejecutar cualquier método con un parámetro y un valor devuelto, o un método con dos parámetros y un valor devuelto si el delegado está enlazado a un objeto.</span><span class="sxs-lookup"><span data-stu-id="db025-136">The following code declares a generic delegate type that can be used to execute any method with one parameter and a return value, or a method with two parameters and a return value if the delegate is bound to an object.</span></span>  
  
     <span data-ttu-id="db025-137">[!code-cpp[DynamicMethodHowTo#12](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#12)] [!code-csharp[DynamicMethodHowTo#12](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#12)] [!code-vb[DynamicMethodHowTo#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#12)]</span><span class="sxs-lookup"><span data-stu-id="db025-137">[!code-cpp[DynamicMethodHowTo#12](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#12)]  [!code-csharp[DynamicMethodHowTo#12](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#12)]  [!code-vb[DynamicMethodHowTo#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#12)]</span></span>  
  
2.  <span data-ttu-id="db025-138">Cree una matriz que especifique los tipos de parámetro para el método dinámico.</span><span class="sxs-lookup"><span data-stu-id="db025-138">Create an array that specifies the parameter types for the dynamic method.</span></span> <span data-ttu-id="db025-139">Si el delegado que representa el método va a enlazarse a un objeto, el primer parámetro debe coincidir con el tipo al que se enlaza el delegado.</span><span class="sxs-lookup"><span data-stu-id="db025-139">If the delegate representing the method is to be bound to an object, the first parameter must match the type the delegate is bound to.</span></span> <span data-ttu-id="db025-140">En este ejemplo, hay dos parámetros, de tipo `Example` y tipo `int` (`Integer` en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="db025-140">In this example, there are two parameters, of type `Example` and type `int` (`Integer` in Visual Basic).</span></span>  
  
     <span data-ttu-id="db025-141">[!code-cpp[DynamicMethodHowTo#13](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#13)] [!code-csharp[DynamicMethodHowTo#13](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#13)] [!code-vb[DynamicMethodHowTo#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#13)]</span><span class="sxs-lookup"><span data-stu-id="db025-141">[!code-cpp[DynamicMethodHowTo#13](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#13)]  [!code-csharp[DynamicMethodHowTo#13](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#13)]  [!code-vb[DynamicMethodHowTo#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#13)]</span></span>  
  
3.  <span data-ttu-id="db025-142">Creará un control <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="db025-142">Create a <xref:System.Reflection.Emit.DynamicMethod>.</span></span> <span data-ttu-id="db025-143">En este ejemplo el método no tiene nombre.</span><span class="sxs-lookup"><span data-stu-id="db025-143">In this example the method has no name.</span></span> <span data-ttu-id="db025-144">El tipo del valor devuelto se especifica como `int` (`Integer` in Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="db025-144">The type of the return value is specified as `int` (`Integer` in Visual Basic).</span></span> <span data-ttu-id="db025-145">El método tiene acceso a los miembros privados y protegidos de la clase `Example`.</span><span class="sxs-lookup"><span data-stu-id="db025-145">The method has access to the private and protected members of the `Example` class.</span></span>  
  
     <span data-ttu-id="db025-146">[!code-cpp[DynamicMethodHowTo#14](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#14)] [!code-csharp[DynamicMethodHowTo#14](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#14)] [!code-vb[DynamicMethodHowTo#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#14)]</span><span class="sxs-lookup"><span data-stu-id="db025-146">[!code-cpp[DynamicMethodHowTo#14](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#14)]  [!code-csharp[DynamicMethodHowTo#14](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#14)]  [!code-vb[DynamicMethodHowTo#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#14)]</span></span>  
  
4.  <span data-ttu-id="db025-147">Emita el cuerpo del método.</span><span class="sxs-lookup"><span data-stu-id="db025-147">Emit the method body.</span></span> <span data-ttu-id="db025-148">En este ejemplo, se usa un objeto <xref:System.Reflection.Emit.ILGenerator> para emitir el Lenguaje Intermedio de Microsoft (MSIL).</span><span class="sxs-lookup"><span data-stu-id="db025-148">In this example, an <xref:System.Reflection.Emit.ILGenerator> object is used to emit the Microsoft intermediate language (MSIL).</span></span> <span data-ttu-id="db025-149">Como alternativa, se puede usar un objeto <xref:System.Reflection.Emit.DynamicILInfo> junto con generadores de código no administrado para emitir el cuerpo del método para un <xref:System.Reflection.Emit.DynamicMethod>.</span><span class="sxs-lookup"><span data-stu-id="db025-149">Alternatively, a <xref:System.Reflection.Emit.DynamicILInfo> object can be used in conjunction with unmanaged code generators to emit the method body for a <xref:System.Reflection.Emit.DynamicMethod>.</span></span>  
  
     <span data-ttu-id="db025-150">En este ejemplo, MSIL carga el primer argumento, que es una instancia de la clase `Example`, y lo usa para cargar el valor de un campo de instancia privada de tipo `int`.</span><span class="sxs-lookup"><span data-stu-id="db025-150">The MSIL in this example loads the first argument, which is an instance of the `Example` class, and uses it to load the value of a private instance field of type `int`.</span></span> <span data-ttu-id="db025-151">Se carga el segundo argumento y se multiplican los dos números.</span><span class="sxs-lookup"><span data-stu-id="db025-151">The second argument is loaded, and the two numbers are multiplied.</span></span> <span data-ttu-id="db025-152">Si el resultado es mayor que `int`, el valor se trunca y se descartan los bits más significativos.</span><span class="sxs-lookup"><span data-stu-id="db025-152">If the result is larger than `int`, the value is truncated and the most significant bits are discarded.</span></span> <span data-ttu-id="db025-153">El método devuelve un valor, con el valor devuelto en la pila.</span><span class="sxs-lookup"><span data-stu-id="db025-153">The method returns, with the return value on the stack.</span></span>  
  
     <span data-ttu-id="db025-154">[!code-cpp[DynamicMethodHowTo#15](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#15)] [!code-csharp[DynamicMethodHowTo#15](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#15)] [!code-vb[DynamicMethodHowTo#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#15)]</span><span class="sxs-lookup"><span data-stu-id="db025-154">[!code-cpp[DynamicMethodHowTo#15](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#15)]  [!code-csharp[DynamicMethodHowTo#15](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#15)]  [!code-vb[DynamicMethodHowTo#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#15)]</span></span>  
  
5.  <span data-ttu-id="db025-155">Cree una instancia del delegado (declarado en el paso 1) que represente el método dinámico mediante una llamada a la sobrecarga del método <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%28System.Type%2CSystem.Object%29>.</span><span class="sxs-lookup"><span data-stu-id="db025-155">Create an instance of the delegate (declared in step 1) that represents the dynamic method by calling the <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%28System.Type%2CSystem.Object%29> method overload.</span></span> <span data-ttu-id="db025-156">La creación del delegado finaliza el método y todos los intentos posteriores de cambiar el método (por ejemplo, mediante la adición de MSIL) se omiten.</span><span class="sxs-lookup"><span data-stu-id="db025-156">Creating the delegate completes the method, and any further attempts to change the method — for example, adding more MSIL — are ignored.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="db025-157">Puede llamar al método <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A> varias veces para crear delegados enlazados a otras instancias del tipo de destino.</span><span class="sxs-lookup"><span data-stu-id="db025-157">You can call the <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A> method multiple times to create delegates bound to other instances of the target type.</span></span>  
  
     <span data-ttu-id="db025-158">El código siguiente enlaza el método a una nueva instancia de la clase `Example` cuyo campo de prueba privado está establecido en 42.</span><span class="sxs-lookup"><span data-stu-id="db025-158">The following code binds the method to a new instance of the `Example` class whose private test field is set to 42.</span></span> <span data-ttu-id="db025-159">Es decir, cada vez que se invoca el delegado, la instancia de `Example` se pasa al primer parámetro del método.</span><span class="sxs-lookup"><span data-stu-id="db025-159">That is, each time the delegate is invoked the instance of `Example` is passed to the first parameter of the method.</span></span>  
  
     <span data-ttu-id="db025-160">Se usa el delegado `OneParameter` porque el primer parámetro del método siempre recibe la instancia de `Example`.</span><span class="sxs-lookup"><span data-stu-id="db025-160">The delegate `OneParameter` is used because the first parameter of the method always receives the instance of `Example`.</span></span> <span data-ttu-id="db025-161">Cuando se invoca el delegado, solo es necesario el segundo parámetro.</span><span class="sxs-lookup"><span data-stu-id="db025-161">When the delegate is invoked, only the second parameter is required.</span></span>  
  
     <span data-ttu-id="db025-162">[!code-cpp[DynamicMethodHowTo#16](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#16)] [!code-csharp[DynamicMethodHowTo#16](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#16)] [!code-vb[DynamicMethodHowTo#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#16)]</span><span class="sxs-lookup"><span data-stu-id="db025-162">[!code-cpp[DynamicMethodHowTo#16](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#16)]  [!code-csharp[DynamicMethodHowTo#16](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#16)]  [!code-vb[DynamicMethodHowTo#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#16)]</span></span>  
  
## <a name="example"></a><span data-ttu-id="db025-163">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="db025-163">Example</span></span>  
 <span data-ttu-id="db025-164">En el código siguiente se muestra un método dinámico simple y un método dinámico enlazado a una instancia de una clase.</span><span class="sxs-lookup"><span data-stu-id="db025-164">The following code example demonstrates a simple dynamic method and a dynamic method bound to an instance of a class.</span></span>  
  
 <span data-ttu-id="db025-165">El método dinámico simple toma un argumento, un entero de 32 bits, y devuelve el cuadrado de 64 bits de ese entero.</span><span class="sxs-lookup"><span data-stu-id="db025-165">The simple dynamic method takes one argument, a 32-bit integer, and returns the 64-bit square of that integer.</span></span> <span data-ttu-id="db025-166">Se usa un delegado genérico para invocar el método.</span><span class="sxs-lookup"><span data-stu-id="db025-166">A generic delegate is used to invoke the method.</span></span>  
  
 <span data-ttu-id="db025-167">El segundo método dinámico tiene dos parámetros, de tipo `Example` y tipo `int` (`Integer` en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="db025-167">The second dynamic method has two parameters, of type `Example` and type `int` (`Integer` in Visual Basic).</span></span> <span data-ttu-id="db025-168">Cuando se ha creado el método dinámico, se enlaza a una instancia de `Example` mediante un delegado genérico que tiene un argumento de tipo `int`.</span><span class="sxs-lookup"><span data-stu-id="db025-168">When the dynamic method has been created, it is bound to an instance of `Example`, using a generic delegate that has one argument of type `int`.</span></span> <span data-ttu-id="db025-169">El delegado no tiene un argumento de tipo `Example` porque el primer parámetro del método siempre recibe la instancia enlazada de `Example`.</span><span class="sxs-lookup"><span data-stu-id="db025-169">The delegate does not have an argument of type `Example` because the first parameter of the method always receives the bound instance of `Example`.</span></span> <span data-ttu-id="db025-170">Cuando se invoca el delegado, solo se proporciona el argumento `int`.</span><span class="sxs-lookup"><span data-stu-id="db025-170">When the delegate is invoked, only the `int` argument is supplied.</span></span> <span data-ttu-id="db025-171">Este método dinámico obtiene acceso a un campo privado de la clase `Example` y devuelve el producto del campo privado y el argumento `int`.</span><span class="sxs-lookup"><span data-stu-id="db025-171">This dynamic method accesses a private field of the `Example` class and returns the product of the private field and the `int` argument.</span></span>  
  
 <span data-ttu-id="db025-172">En el ejemplo de código se definen delegados que pueden usarse para ejecutar los métodos.</span><span class="sxs-lookup"><span data-stu-id="db025-172">The code example defines delegates that can be used to execute the methods.</span></span>  
  
 <span data-ttu-id="db025-173">[!code-cpp[DynamicMethodHowTo#1](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#1)] [!code-csharp[DynamicMethodHowTo#1](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#1)] [!code-vb[DynamicMethodHowTo#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#1)]</span><span class="sxs-lookup"><span data-stu-id="db025-173">[!code-cpp[DynamicMethodHowTo#1](../../../samples/snippets/cpp/VS_Snippets_CLR/DynamicMethodHowTo/cpp/source.cpp#1)] [!code-csharp[DynamicMethodHowTo#1](../../../samples/snippets/csharp/VS_Snippets_CLR/DynamicMethodHowTo/cs/source.cs#1)] [!code-vb[DynamicMethodHowTo#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/DynamicMethodHowTo/vb/source.vb#1)]</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="db025-174">Compilar el código</span><span class="sxs-lookup"><span data-stu-id="db025-174">Compiling the Code</span></span>  
  
-   <span data-ttu-id="db025-175">El código contiene las instrucciones `using` de C# (`Imports` en Visual Basic) necesarias para la compilación.</span><span class="sxs-lookup"><span data-stu-id="db025-175">The code contains the C# `using` statements (`Imports` in Visual Basic) necessary for compilation.</span></span>  
  
-   <span data-ttu-id="db025-176">No se requiere ninguna referencia de ensamblado adicional.</span><span class="sxs-lookup"><span data-stu-id="db025-176">No additional assembly references are required.</span></span>  
  
-   <span data-ttu-id="db025-177">Compile el código en la línea de comandos mediante csc.exe, vbc.exe o cl.exe.</span><span class="sxs-lookup"><span data-stu-id="db025-177">Compile the code at the command line using csc.exe, vbc.exe, or cl.exe.</span></span> <span data-ttu-id="db025-178">Para compilar el código en Visual Studio, póngalo en una plantilla de proyecto de aplicación de consola.</span><span class="sxs-lookup"><span data-stu-id="db025-178">To compile the code in Visual Studio, place it in a console application project template.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="db025-179">Vea también</span><span class="sxs-lookup"><span data-stu-id="db025-179">See Also</span></span>  
 <span data-ttu-id="db025-180"><xref:System.Reflection.Emit.DynamicMethod></span><span class="sxs-lookup"><span data-stu-id="db025-180"><xref:System.Reflection.Emit.DynamicMethod></span></span>   
 <span data-ttu-id="db025-181">[Usar la emisión de reflexión](http://msdn.microsoft.com/en-us/ccc6540d-0e2c-4d89-b456-eb7353f9e9ac) </span><span class="sxs-lookup"><span data-stu-id="db025-181">[Using Reflection Emit](http://msdn.microsoft.com/en-us/ccc6540d-0e2c-4d89-b456-eb7353f9e9ac) </span></span>  
 [<span data-ttu-id="db025-182">Escenarios de métodos dinámicos de emisión de reflexión</span><span class="sxs-lookup"><span data-stu-id="db025-182">Reflection Emit Dynamic Method Scenarios</span></span>](http://msdn.microsoft.com/en-us/7c27ea3d-0f24-4bf3-8ceb-f49d33faca5e)

