---
title: "Cómo: Definir un tipo genérico con emisión de reflexión"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- generics [.NET Framework], dynamic types
- reflection emit, generic types
ms.assetid: 07d5f01a-7b5b-40ea-9b15-f21561098fe4
caps.latest.revision: 14
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 85e5bc1cdbd9d90597864c75a5bd33109e4ae783
ms.contentlocale: es-es
ms.lasthandoff: 07/28/2017

---
# <a name="how-to-define-a-generic-type-with-reflection-emit"></a><span data-ttu-id="b9040-102">Cómo: Definir un tipo genérico con emisión de reflexión</span><span class="sxs-lookup"><span data-stu-id="b9040-102">How to: Define a Generic Type with Reflection Emit</span></span>
<span data-ttu-id="b9040-103">En este tema se muestra cómo crear un tipo genérico simple con dos parámetros de tipo, cómo aplicar restricciones de clase, restricciones de interfaz y restricciones especiales a los parámetros de tipo, y cómo crear miembros que usen los parámetros de tipo de la clase como tipos de parámetro y tipos de valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="b9040-103">This topic shows how to create a simple generic type with two type parameters, how to apply class constraints, interface constraints, and special constraints to the type parameters, and how to create members that use the type parameters of the class as parameter types and return types.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="b9040-104">Un método no es genérico sólo porque pertenece a un tipo genérico y utiliza los parámetros de tipo de ese tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="b9040-104">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="b9040-105">Un método sólo es genérico si tiene su propia lista de parámetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-105">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="b9040-106">La mayoría de los métodos de los tipos genéricos no son genéricos, como en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="b9040-106">Most methods on generic types are not generic, as in this example.</span></span> <span data-ttu-id="b9040-107">Para obtener un ejemplo de emisión de un método genérico, vea [How to: Define a Generic Method with Reflection Emit (Cómo: Definir un método genérico con emisión de reflexión)](../../../docs/framework/reflection-and-codedom/how-to-define-a-generic-method-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="b9040-107">For an example of emitting a generic method, see [How to: Define a Generic Method with Reflection Emit](../../../docs/framework/reflection-and-codedom/how-to-define-a-generic-method-with-reflection-emit.md).</span></span>  
  
### <a name="to-define-a-generic-type"></a><span data-ttu-id="b9040-108">Para definir un tipo genérico</span><span class="sxs-lookup"><span data-stu-id="b9040-108">To define a generic type</span></span>  
  
1.  <span data-ttu-id="b9040-109">Defina un ensamblado dinámico denominado `GenericEmitExample1`.</span><span class="sxs-lookup"><span data-stu-id="b9040-109">Define a dynamic assembly named `GenericEmitExample1`.</span></span> <span data-ttu-id="b9040-110">En este ejemplo, el ensamblado se ha ejecutado y guardado en el disco, por lo que se especifica <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="b9040-110">In this example, the assembly is executed and saved to disk, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=fullName> is specified.</span></span>  
  
     <span data-ttu-id="b9040-111">[!code-cpp[EmitGenericType#2](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#2)]  [!code-csharp[EmitGenericType#2](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#2)]  [!code-vb[EmitGenericType#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#2)]</span><span class="sxs-lookup"><span data-stu-id="b9040-111">[!code-cpp[EmitGenericType#2](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#2)]  [!code-csharp[EmitGenericType#2](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#2)]  [!code-vb[EmitGenericType#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#2)]</span></span>  
  
2.  <span data-ttu-id="b9040-112">Defina un módulo dinámico.</span><span class="sxs-lookup"><span data-stu-id="b9040-112">Define a dynamic module.</span></span> <span data-ttu-id="b9040-113">Un ensamblado se compone de módulos ejecutables.</span><span class="sxs-lookup"><span data-stu-id="b9040-113">An assembly is made up of executable modules.</span></span> <span data-ttu-id="b9040-114">En el caso de un ensamblado de un solo módulo, el nombre del módulo es el mismo que el nombre del ensamblado y el nombre del archivo es el nombre del módulo más una extensión.</span><span class="sxs-lookup"><span data-stu-id="b9040-114">For a single-module assembly, the module name is the same as the assembly name, and the file name is the module name plus an extension.</span></span>  
  
     <span data-ttu-id="b9040-115">[!code-cpp[EmitGenericType#3](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#3)]  [!code-csharp[EmitGenericType#3](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#3)]  [!code-vb[EmitGenericType#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#3)]</span><span class="sxs-lookup"><span data-stu-id="b9040-115">[!code-cpp[EmitGenericType#3](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#3)]  [!code-csharp[EmitGenericType#3](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#3)]  [!code-vb[EmitGenericType#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#3)]</span></span>  
  
3.  <span data-ttu-id="b9040-116">Defina una clase.</span><span class="sxs-lookup"><span data-stu-id="b9040-116">Define a class.</span></span> <span data-ttu-id="b9040-117">En este ejemplo, la clase se denomina `Sample`.</span><span class="sxs-lookup"><span data-stu-id="b9040-117">In this example, the class is named `Sample`.</span></span>  
  
     <span data-ttu-id="b9040-118">[!code-cpp[EmitGenericType#4](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#4)]  [!code-csharp[EmitGenericType#4](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#4)]  [!code-vb[EmitGenericType#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#4)]</span><span class="sxs-lookup"><span data-stu-id="b9040-118">[!code-cpp[EmitGenericType#4](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#4)]  [!code-csharp[EmitGenericType#4](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#4)]  [!code-vb[EmitGenericType#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#4)]</span></span>  
  
4.  <span data-ttu-id="b9040-119">Defina los parámetros de tipo genérico de `Sample` pasando una matriz de cadenas que contienen los nombres de los parámetros al método <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="b9040-119">Define the generic type parameters of `Sample` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=fullName> method.</span></span> <span data-ttu-id="b9040-120">Esto convierte a la clase en un tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="b9040-120">This makes the class a generic type.</span></span> <span data-ttu-id="b9040-121">El valor devuelto es una matriz de objetos <xref:System.Reflection.Emit.GenericTypeParameterBuilder> que representan los parámetros de tipo y que se pueden usar en el código emitido.</span><span class="sxs-lookup"><span data-stu-id="b9040-121">The return value is an array of <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the type parameters, which can be used in your emitted code.</span></span>  
  
     <span data-ttu-id="b9040-122">En el código siguiente, `Sample` se convierte en un tipo genérico con parámetros de tipo `TFirst` y `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="b9040-122">In the following code, `Sample` becomes a generic type with type parameters `TFirst` and `TSecond`.</span></span> <span data-ttu-id="b9040-123">Para que el código sea más fácil de leer, cada <xref:System.Reflection.Emit.GenericTypeParameterBuilder> se coloca en una variable con el mismo nombre que el parámetro de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-123">To make the code easier to read, each <xref:System.Reflection.Emit.GenericTypeParameterBuilder> is placed in a variable with the same name as the type parameter.</span></span>  
  
     <span data-ttu-id="b9040-124">[!code-cpp[EmitGenericType#5](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#5)]  [!code-csharp[EmitGenericType#5](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#5)]  [!code-vb[EmitGenericType#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#5)]</span><span class="sxs-lookup"><span data-stu-id="b9040-124">[!code-cpp[EmitGenericType#5](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#5)]  [!code-csharp[EmitGenericType#5](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#5)]  [!code-vb[EmitGenericType#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#5)]</span></span>  
  
5.  <span data-ttu-id="b9040-125">Agregue restricciones especiales a los parámetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-125">Add special constraints to the type parameters.</span></span> <span data-ttu-id="b9040-126">En este ejemplo, el parámetro de tipo `TFirst` está restringido a tipos que tienen constructores sin parámetros y a tipos de referencia.</span><span class="sxs-lookup"><span data-stu-id="b9040-126">In this example, type parameter `TFirst` is constrained to types that have parameterless constructors, and to reference types.</span></span>  
  
     <span data-ttu-id="b9040-127">[!code-cpp[EmitGenericType#6](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#6)]  [!code-csharp[EmitGenericType#6](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#6)]  [!code-vb[EmitGenericType#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#6)]</span><span class="sxs-lookup"><span data-stu-id="b9040-127">[!code-cpp[EmitGenericType#6](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#6)]  [!code-csharp[EmitGenericType#6](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#6)]  [!code-vb[EmitGenericType#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#6)]</span></span>  
  
6.  <span data-ttu-id="b9040-128">También tiene la opción de agregar restricciones de clase y de interfaz a los parámetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-128">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="b9040-129">En este ejemplo, el parámetro de tipo `TFirst` está restringido a tipos que derivan de la clase base representada por el objeto <xref:System.Type> incluido en la variable `baseType` y que implementan las interfaces cuyos tipos están incluidos en las variables `interfaceA` y `interfaceB`.</span><span class="sxs-lookup"><span data-stu-id="b9040-129">In this example, type parameter `TFirst` is constrained to types that derive from the base class represented by the <xref:System.Type> object contained in the variable `baseType`, and that implement the interfaces whose types are contained in the variables `interfaceA` and `interfaceB`.</span></span> <span data-ttu-id="b9040-130">Vea en el ejemplo de código la declaración y la asignación de estas variables.</span><span class="sxs-lookup"><span data-stu-id="b9040-130">See the code example for the declaration and assignment of these variables.</span></span>  
  
     <span data-ttu-id="b9040-131">[!code-cpp[EmitGenericType#7](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#7)]  [!code-csharp[EmitGenericType#7](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#7)]  [!code-vb[EmitGenericType#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#7)]</span><span class="sxs-lookup"><span data-stu-id="b9040-131">[!code-cpp[EmitGenericType#7](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#7)]  [!code-csharp[EmitGenericType#7](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#7)]  [!code-vb[EmitGenericType#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#7)]</span></span>  
  
7.  <span data-ttu-id="b9040-132">Defina un campo.</span><span class="sxs-lookup"><span data-stu-id="b9040-132">Define a field.</span></span> <span data-ttu-id="b9040-133">En este ejemplo, el tipo del campo es especificado por el parámetro de tipo `TFirst`.</span><span class="sxs-lookup"><span data-stu-id="b9040-133">In this example, the type of the field is specified by type parameter `TFirst`.</span></span> <span data-ttu-id="b9040-134"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> deriva de <xref:System.Type>, por lo que puede usar parámetros de tipo genérico en cualquier lugar en que se pueda usar un tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-134"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> derives from <xref:System.Type>, so you can use generic type parameters anywhere a type can be used.</span></span>  
  
     <span data-ttu-id="b9040-135">[!code-cpp[EmitGenericType#21](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#21)]  [!code-csharp[EmitGenericType#21](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#21)]  [!code-vb[EmitGenericType#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#21)]</span><span class="sxs-lookup"><span data-stu-id="b9040-135">[!code-cpp[EmitGenericType#21](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#21)]  [!code-csharp[EmitGenericType#21](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#21)]  [!code-vb[EmitGenericType#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#21)]</span></span>  
  
8.  <span data-ttu-id="b9040-136">Defina un método que use los parámetros del tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="b9040-136">Define a method that uses the type parameters of the generic type.</span></span> <span data-ttu-id="b9040-137">Tenga en cuenta que estos métodos no son genéricos a menos que tengan sus propias listas de parámetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-137">Note that such methods are not generic unless they have their own type parameter lists.</span></span> <span data-ttu-id="b9040-138">El código siguiente define un método `static` (`Shared` en Visual Basic) que toma una matriz de `TFirst` y devuelve un tipo `List<TFirst>` (`List(Of TFirst)` en Visual Basic) que contiene todos los elementos de la matriz.</span><span class="sxs-lookup"><span data-stu-id="b9040-138">The following code defines a `static` method (`Shared` in Visual Basic) that takes an array of `TFirst` and returns a `List<TFirst>` (`List(Of TFirst)` in Visual Basic) containing all the elements of the array.</span></span> <span data-ttu-id="b9040-139">Para definir este método, es necesario crear el tipo `List<TFirst>`. Para ello, se llama a <xref:System.Type.MakeGenericType%2A> en la definición de tipo genérico, `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="b9040-139">To define this method, it is necessary to create the type `List<TFirst>` by calling <xref:System.Type.MakeGenericType%2A> on the generic type definition, `List<T>`.</span></span> <span data-ttu-id="b9040-140">(`T` se omite cuando se usa el operador `typeof` [`GetType` en Visual Basic] para obtener la definición de tipo genérico). El tipo de parámetro se crea con el método <xref:System.Type.MakeArrayType%2A>.</span><span class="sxs-lookup"><span data-stu-id="b9040-140">(The `T` is omitted when you use the `typeof` operator (`GetType` in Visual Basic) to get the generic type definition.) The parameter type is created by using the <xref:System.Type.MakeArrayType%2A> method.</span></span>  
  
     <span data-ttu-id="b9040-141">[!code-cpp[EmitGenericType#22](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#22)]  [!code-csharp[EmitGenericType#22](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#22)]  [!code-vb[EmitGenericType#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#22)]</span><span class="sxs-lookup"><span data-stu-id="b9040-141">[!code-cpp[EmitGenericType#22](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#22)]  [!code-csharp[EmitGenericType#22](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#22)]  [!code-vb[EmitGenericType#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#22)]</span></span>  
  
9. <span data-ttu-id="b9040-142">Emita el cuerpo del método.</span><span class="sxs-lookup"><span data-stu-id="b9040-142">Emit the method body.</span></span> <span data-ttu-id="b9040-143">El cuerpo del método consta de tres códigos de operación que cargan la matriz de entrada en la pila, llaman al constructor `List<TFirst>` que toma `IEnumerable<TFirst>` (que hace todo el trabajo de colocar los elementos de entrada en la lista) y devuelven (dejando el nuevo objeto <xref:System.Collections.Generic.List%601> en la pila).</span><span class="sxs-lookup"><span data-stu-id="b9040-143">The method body consists of three opcodes that load the input array onto the stack, call the `List<TFirst>` constructor that takes `IEnumerable<TFirst>` (which does all the work of putting the input elements into the list), and return (leaving the new <xref:System.Collections.Generic.List%601> object on the stack).</span></span> <span data-ttu-id="b9040-144">La parte difícil a la hora de emitir este código es la obtención del constructor.</span><span class="sxs-lookup"><span data-stu-id="b9040-144">The difficult part of emitting this code is getting the constructor.</span></span>  
  
     <span data-ttu-id="b9040-145">El método <xref:System.Type.GetConstructor%2A> no se admite en un <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, por lo que no es posible obtener el constructor de `List<TFirst>` directamente.</span><span class="sxs-lookup"><span data-stu-id="b9040-145">The <xref:System.Type.GetConstructor%2A> method is not supported on a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, so it is not possible to get the constructor of `List<TFirst>` directly.</span></span> <span data-ttu-id="b9040-146">En primer lugar, es necesario obtener el constructor de la definición de tipo genérico `List<T>` y luego llamar a un método que lo convierta en el constructor correspondiente de `List<TFirst>`.</span><span class="sxs-lookup"><span data-stu-id="b9040-146">First, it is necessary to get the constructor of the generic type definition `List<T>` and then to call a method that converts it to the corresponding constructor of `List<TFirst>`.</span></span>  
  
     <span data-ttu-id="b9040-147">El constructor usado para este ejemplo de código toma un tipo `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="b9040-147">The constructor used for this code example takes an `IEnumerable<T>`.</span></span> <span data-ttu-id="b9040-148">Pero tenga en cuenta que no es la definición de tipo genérico de la interfaz genérica <xref:System.Collections.Generic.IEnumerable%601>; en su lugar, debe sustituirse el parámetro de tipo `T` de `List<T>` por el parámetro de tipo `T` de `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="b9040-148">Note, however, that this is not the generic type definition of the <xref:System.Collections.Generic.IEnumerable%601> generic interface; instead, the type parameter `T` from `List<T>` must be substituted for the type parameter `T` of `IEnumerable<T>`.</span></span> <span data-ttu-id="b9040-149">(Esto parece confuso solo porque ambos tipos tienen parámetros de tipo con el nombre `T`.</span><span class="sxs-lookup"><span data-stu-id="b9040-149">(This seems confusing only because both types have type parameters named `T`.</span></span> <span data-ttu-id="b9040-150">Por eso este ejemplo de código usa los nombres `TFirst` y `TSecond`). Para obtener el tipo del argumento del constructor, comience con la definición de tipo genérico `IEnumerable<T>` y llame a <xref:System.Type.MakeGenericType%2A> con el primer parámetro de tipo genérico de `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="b9040-150">That is why this code example uses the names `TFirst` and `TSecond`.) To get the type of the constructor argument, start with the generic type definition `IEnumerable<T>` and call <xref:System.Type.MakeGenericType%2A> with the first generic type parameter of `List<T>`.</span></span> <span data-ttu-id="b9040-151">La lista de argumentos del constructor se debe pasar como matriz, con un único argumento en este caso.</span><span class="sxs-lookup"><span data-stu-id="b9040-151">The constructor argument list must be passed as an array, with just one argument in this case.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="b9040-152">La definición de tipo genérico se expresa como `IEnumerable<>` cuando se usa el operador `typeof` de C#, o como `IEnumerable(Of )` cuando se usa el operador `GetType` de Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="b9040-152">The generic type definition is expressed as `IEnumerable<>` when you use the `typeof` operator in C#, or `IEnumerable(Of )` when you use the `GetType` operator in Visual Basic.</span></span>  
  
     <span data-ttu-id="b9040-153">Ahora es posible obtener el constructor de `List<T>` con una llamada a <xref:System.Type.GetConstructor%2A> en la definición de tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="b9040-153">Now it is possible to get the constructor of `List<T>` by calling <xref:System.Type.GetConstructor%2A> on the generic type definition.</span></span> <span data-ttu-id="b9040-154">Para convertir este constructor en el constructor correspondiente de `List<TFirst>`, pase `List<TFirst>` y el constructor de `List<T>` al método estático <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="b9040-154">To convert this constructor to the corresponding constructor of `List<TFirst>`, pass `List<TFirst>` and the constructor from `List<T>` to the static <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=fullName> method.</span></span>  
  
     <span data-ttu-id="b9040-155">[!code-cpp[EmitGenericType#23](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#23)]   [!code-csharp[EmitGenericType#23](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#23)]   [!code-vb[EmitGenericType#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#23)]</span><span class="sxs-lookup"><span data-stu-id="b9040-155">[!code-cpp[EmitGenericType#23](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#23)]   [!code-csharp[EmitGenericType#23](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#23)]   [!code-vb[EmitGenericType#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#23)]</span></span>  
  
10. <span data-ttu-id="b9040-156">Cree el tipo y guarde el archivo.</span><span class="sxs-lookup"><span data-stu-id="b9040-156">Create the type and save the file.</span></span>  
  
     <span data-ttu-id="b9040-157">[!code-cpp[EmitGenericType#8](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#8)]  [!code-csharp[EmitGenericType#8](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#8)]  [!code-vb[EmitGenericType#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#8)]</span><span class="sxs-lookup"><span data-stu-id="b9040-157">[!code-cpp[EmitGenericType#8](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#8)]  [!code-csharp[EmitGenericType#8](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#8)]  [!code-vb[EmitGenericType#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#8)]</span></span>  
  
11. <span data-ttu-id="b9040-158">Invoque al método.</span><span class="sxs-lookup"><span data-stu-id="b9040-158">Invoke the method.</span></span> <span data-ttu-id="b9040-159">`ExampleMethod` no es genérico, pero el tipo al que pertenece sí lo es, así que para obtener un elemento <xref:System.Reflection.MethodInfo> que pueda invocarse es necesario crear un tipo construido de la definición de tipo para `Sample`.</span><span class="sxs-lookup"><span data-stu-id="b9040-159">`ExampleMethod` is not generic, but the type it belongs to is generic, so in order to get a <xref:System.Reflection.MethodInfo> that can be invoked it is necessary to create a constructed type from the type definition for `Sample`.</span></span> <span data-ttu-id="b9040-160">El tipo construido usa la clase `Example`, que satisface las restricciones de `TFirst` porque es un tipo de referencia y tiene un constructor sin parámetros predeterminado, y la clase `ExampleDerived`, que satisface las restricciones de `TSecond`.</span><span class="sxs-lookup"><span data-stu-id="b9040-160">The constructed type uses the `Example` class, which satisfies the constraints on `TFirst` because it is a reference type and has a default parameterless constructor, and the `ExampleDerived` class which satisfies the constraints on `TSecond`.</span></span> <span data-ttu-id="b9040-161">(El código de `ExampleDerived` puede encontrarse en la sección de código de ejemplo). Estos dos tipos se pasan a <xref:System.Type.MakeGenericType%2A> para crear el tipo construido.</span><span class="sxs-lookup"><span data-stu-id="b9040-161">(The code for `ExampleDerived` can be found in the example code section.) These two types are passed to <xref:System.Type.MakeGenericType%2A> to create the constructed type.</span></span> <span data-ttu-id="b9040-162">Luego se obtiene <xref:System.Reflection.MethodInfo> mediante el método <xref:System.Type.GetMethod%2A>.</span><span class="sxs-lookup"><span data-stu-id="b9040-162">The <xref:System.Reflection.MethodInfo> is then obtained using the <xref:System.Type.GetMethod%2A> method.</span></span>  
  
     <span data-ttu-id="b9040-163">[!code-cpp[EmitGenericType#9](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#9)]  [!code-csharp[EmitGenericType#9](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#9)]  [!code-vb[EmitGenericType#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#9)]</span><span class="sxs-lookup"><span data-stu-id="b9040-163">[!code-cpp[EmitGenericType#9](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#9)]  [!code-csharp[EmitGenericType#9](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#9)]  [!code-vb[EmitGenericType#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#9)]</span></span>  
  
12. <span data-ttu-id="b9040-164">El código siguiente crea una matriz de objetos `Example`, coloca esa matriz en una matriz de tipo <xref:System.Object> que representa los argumentos del método que se va a invocar y los pasa al método <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="b9040-164">The following code creates an array of `Example` objects, places that array in an array of type <xref:System.Object> representing the arguments of the method to be invoked, and passes them to the <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29> method.</span></span> <span data-ttu-id="b9040-165">El primer argumento del método <xref:System.Reflection.MethodBase.Invoke%2A> es una referencia nula porque el método es `static`.</span><span class="sxs-lookup"><span data-stu-id="b9040-165">The first argument of the <xref:System.Reflection.MethodBase.Invoke%2A> method is a null reference because the method is `static`.</span></span>  
  
     <span data-ttu-id="b9040-166">[!code-cpp[EmitGenericType#10](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#10)]  [!code-csharp[EmitGenericType#10](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#10)]  [!code-vb[EmitGenericType#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#10)]</span><span class="sxs-lookup"><span data-stu-id="b9040-166">[!code-cpp[EmitGenericType#10](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#10)]  [!code-csharp[EmitGenericType#10](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#10)]  [!code-vb[EmitGenericType#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#10)]</span></span>  
  
## <a name="example"></a><span data-ttu-id="b9040-167">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="b9040-167">Example</span></span>  
 <span data-ttu-id="b9040-168">En el ejemplo de código siguiente se define una clase denominada `Sample` junto con una clase base y dos interfaces.</span><span class="sxs-lookup"><span data-stu-id="b9040-168">The following code example defines a class named `Sample`, along with a base class and two interfaces.</span></span> <span data-ttu-id="b9040-169">El programa define dos parámetros de tipo genérico para `Sample`, con lo que lo convierte en un tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="b9040-169">The program defines two generic type parameters for `Sample`, turning it into a generic type.</span></span> <span data-ttu-id="b9040-170">Los parámetros de tipo son lo único que convierte un tipo genérico.</span><span class="sxs-lookup"><span data-stu-id="b9040-170">Type parameters are the only thing that makes a type generic.</span></span> <span data-ttu-id="b9040-171">El programa lo indica al mostrar un mensaje de prueba antes y después de la definición de los parámetros de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-171">The program shows this by displaying a test message before and after the definition of the type parameters.</span></span>  
  
 <span data-ttu-id="b9040-172">El parámetro de tipo `TSecond` se usa para mostrar las restricciones de interfaz y de clase, mediante la clase base y las interfaces, y el parámetro de tipo `TFirst` se emplea para mostrar restricciones especiales.</span><span class="sxs-lookup"><span data-stu-id="b9040-172">The type parameter `TSecond` is used to demonstrate class and interface constraints, using the base class and interfaces, and the type parameter `TFirst` is used to demonstrate special constraints.</span></span>  
  
 <span data-ttu-id="b9040-173">El ejemplo de código define un campo y un método con los parámetros de tipo de la clase para el tipo de campo y para el parámetro y el tipo devuelto del método.</span><span class="sxs-lookup"><span data-stu-id="b9040-173">The code example defines a field and a method using the class's type parameters for the field type and for the parameter and return type of the method.</span></span>  
  
 <span data-ttu-id="b9040-174">Una vez creada la clase `Sample`, se invoca al método.</span><span class="sxs-lookup"><span data-stu-id="b9040-174">After the `Sample` class has been created, the method is invoked.</span></span>  
  
 <span data-ttu-id="b9040-175">El programa incluye un método que enumera información sobre un tipo genérico y un método que enumera las restricciones especiales de un parámetro de tipo.</span><span class="sxs-lookup"><span data-stu-id="b9040-175">The program includes a method that lists information about a generic type, and a method that lists the special constraints on a type parameter.</span></span> <span data-ttu-id="b9040-176">Estos métodos se usan para mostrar información sobre la clase finalizada `Sample`.</span><span class="sxs-lookup"><span data-stu-id="b9040-176">These methods are used to display information about the finished `Sample` class.</span></span>  
  
 <span data-ttu-id="b9040-177">El programa guarda el módulo finalizado en el disco como `GenericEmitExample1.dll`, por lo que se puede abrir con [Ildasm.exe (Desensamblador de IL)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) y examinar el MSIL de la clase `Sample`.</span><span class="sxs-lookup"><span data-stu-id="b9040-177">The program saves the finished module to disk as `GenericEmitExample1.dll`, so you can open it with the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) and examine the MSIL for the `Sample` class.</span></span>  
  
 <span data-ttu-id="b9040-178">[!code-cpp[EmitGenericType#1](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#1)] [!code-csharp[EmitGenericType#1](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#1)] [!code-vb[EmitGenericType#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#1)]</span><span class="sxs-lookup"><span data-stu-id="b9040-178">[!code-cpp[EmitGenericType#1](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#1)] [!code-csharp[EmitGenericType#1](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#1)] [!code-vb[EmitGenericType#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#1)]</span></span>  
  
## <a name="compiling-the-code"></a><span data-ttu-id="b9040-179">Compilar el código</span><span class="sxs-lookup"><span data-stu-id="b9040-179">Compiling the Code</span></span>  
  
-   <span data-ttu-id="b9040-180">El código contiene las instrucciones `using` de C# (`Imports` en Visual Basic) necesarias para la compilación.</span><span class="sxs-lookup"><span data-stu-id="b9040-180">The code contains the C# `using` statements (`Imports` in Visual Basic) necessary for compilation.</span></span>  
  
-   <span data-ttu-id="b9040-181">No se requiere ninguna referencia de ensamblado adicional.</span><span class="sxs-lookup"><span data-stu-id="b9040-181">No additional assembly references are required.</span></span>  
  
-   <span data-ttu-id="b9040-182">Compile el código en la línea de comandos mediante csc.exe, vbc.exe o cl.exe.</span><span class="sxs-lookup"><span data-stu-id="b9040-182">Compile the code at the command line using csc.exe, vbc.exe, or cl.exe.</span></span> <span data-ttu-id="b9040-183">Para compilar el código en Visual Studio, póngalo en una plantilla de proyecto de aplicación de consola.</span><span class="sxs-lookup"><span data-stu-id="b9040-183">To compile the code in Visual Studio, place it in a console application project template.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b9040-184">Vea también</span><span class="sxs-lookup"><span data-stu-id="b9040-184">See Also</span></span>  
 <span data-ttu-id="b9040-185"><xref:System.Reflection.Emit.GenericTypeParameterBuilder></span><span class="sxs-lookup"><span data-stu-id="b9040-185"><xref:System.Reflection.Emit.GenericTypeParameterBuilder></span></span>   
 <span data-ttu-id="b9040-186">[Utilizar Reflection Emit](http://msdn.microsoft.com/en-us/ccc6540d-0e2c-4d89-b456-eb7353f9e9ac) </span><span class="sxs-lookup"><span data-stu-id="b9040-186">[Using Reflection Emit](http://msdn.microsoft.com/en-us/ccc6540d-0e2c-4d89-b456-eb7353f9e9ac) </span></span>  
 [<span data-ttu-id="b9040-187">Reflection Emit Dynamic Assembly Scenarios (Escenarios de ensamblado dinámico de emisión de la reflexión)</span><span class="sxs-lookup"><span data-stu-id="b9040-187">Reflection Emit Dynamic Assembly Scenarios</span></span>](http://msdn.microsoft.com/en-us/e1cc6750-e20f-473b-bb4e-f43bc66aecce)

